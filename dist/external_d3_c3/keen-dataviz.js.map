{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/utils/each.js","webpack:///./lib/utils/extend.js","webpack:///./lib/utils/escape-html.js","webpack:///external \"d3\"","webpack:///./lib/utils/strip-html-tags.js","webpack:///./lib/dataset/utils/create-null-list.js","webpack:///./lib/dataset/modifiers/append.js","webpack:///./lib/dataset/modifiers/delete.js","webpack:///./lib/dataset/modifiers/filter.js","webpack:///./lib/dataset/modifiers/insert.js","webpack:///./lib/dataset/modifiers/select.js","webpack:///./lib/dataset/utils/analyses.js","webpack:///./lib/dataset/modifiers/sort.js","webpack:///./lib/dataset/modifiers/update.js","webpack:///./lib/dataset/utils/flatten.js","webpack:///./lib/dataset/utils/parsers.js","webpack:///./lib/dataset/index.js","webpack:///./lib/utils/assert-date-string.js","webpack:///external \"c3\"","webpack:///./lib/utils/extend-deep.js","webpack:///./lib/libraries/c3/extensions/default-date-format.js","webpack:///./lib/libraries/c3/extensions/paginating-legend.js","webpack:///./lib/libraries/c3/extensions/tooltip-contents.js","webpack:///./lib/libraries/default/message.js","webpack:///./lib/utils/pretty-number.js","webpack:///./lib/libraries/default/metric.js","webpack:///./lib/libraries/default/table.js","webpack:///./lib/libraries/default/spinner.js","webpack:///./lib/libraries/index.js","webpack:///./lib/data.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./lib/style/blank.css","webpack:///./lib/style/blank.css?495e","webpack:///(webpack)/buildin/global.js","webpack:///./lib/index.js"],"names":["each","o","cb","s","n","Array","length","call","hasOwnProperty","extend","target","i","arguments","prop","matchHtmlRegExp","escapeHtml","string","str","match","exec","escape","html","index","lastIndex","charCodeAt","substring","stripHtmlTags","inputString","replace","len","list","push","appendColumn","input","self","args","prototype","slice","label","undefined","matrix","row","cell","concat","createNullList","value","appendRow","String","newRow","col","selectColumn","deleteColumn","q","indexOf","splice","deleteRow","filterColumns","fn","clone","selectedColumn","ri","data","filterRows","insertColumn","insertRow","result","selectRow","helpers","average","arr","start","end","set","sum","avg","val","isNaN","parseFloat","maximum","nums","Math","max","apply","minimum","min","methods","method","name","capitalized","charAt","toUpperCase","sortColumns","comp","head","cols","analysesUtilMethods","getColumnLabel","sort","a","b","op","sortRows","body","getRowIndex","updateColumn","updateRow","flatten","ob","toReturn","flatObject","x","Dataset","initialize","lib","options","parsers","parseMetric","res","type","parseInterval","dataset","record","timeframe","parseGroupedMetric","key","parseGroupedInterval","group","j","parseDoubleGroupedMetric","rowLabel","parseDoubleGroupedInterval","parseFunnel","steps","event_collection","parseList","parseExtraction","metric","interval","funnel","extraction","meta","coords","Error","colIndex","rowIndex","colResult","rowResult","append","parser","testObject","getTime","testString","ISO_8601","test","extendDeep","startDate","endDate","timeDiff","abs","Date","months","ms","date","getMonth","getFullYear","getDate","chart","view","_artifacts","c3","columns","domNode","el","querySelector","theme","legendWidth","pagination","hidden","labels","position","range","round","offsetHeight","total","isDateString","legendEl","d3","select","attr","style","legendItems","paginateElOffset","paginateEl","paginateData","renderLegendComponent","renderPaginationComponent","resize","selectAll","remove","legendItemList","enter","id","isHidden","text","node","getBBox","width","color","on","focus","revert","toggle","exit","direction","path_d","d","clearSelectedText","selection","document","empty","window","getSelection","removeAllRanges","defaultTitleFormat","defaultValueFormat","bgcolor","nameFormat","title","titleFormat","valueFormat","config","tooltip_format_name","tooltip_format_title","tooltip_format_value","CLASS","tooltip","ratio","levelColor","tooltipName","render","outer","createElement","inner","msg","height","titleContainer","notesContainer","className","innerHTML","notes","appendChild","actualInnerHeight","paddingTop","update","destroy","prettyNumber","Number","sciNo","toPrecision","prefix","suffixes","recurse","iteration","split","rhs","numNumerals","colors","opts","chartOptions","suffix","formattedNum","valueEl","parseInt","defaults","stickyHeader","stickyFooter","_generateTableRows","colWidths","colAligns","fixedHeader","isEmpty","message","bind","onscroll","e","top","scrollTop","artifacts","spinner","offsetPadding","prefixes","radius","animationName","setInterval","clearInterval","types","table","timer","delay","bindResizeListener","clearTimeout","visuals","setTimeout","defineC3","c3Types","getDefaultOptions","DEFAULT_OPTIONS","ENFORCED_OPTIONS","axis","order","legend","show","padding","point","expand","enabled","r","transition","duration","bindto","pattern","colorMapping","size","rotated","tick","format","dateFormat","c3DefaultDateFormat","culling","stacked","groups","categories","c3CustomDataMapping","contents","c3CustomTooltipFiltering","paddedWidth","offsetWidth","setAttribute","generate","c3PaginatingLegend","scope","onresize","addEventListener","attachEvent","parseResponse","response","indexBy","parserArgs","query","selectedParser","metadata","analysis_type","filters","group_by","timezone","display_name","getDefaultTitle","visualization","chart_type","getDefaultType","analysis","Dataviz","_prepared","_rendered","labelMapping","library","sortGroups","sortIntervals","libraries","default","register","actions","find","nodeName","visual","attributes","obj","element","domReady","num","loader","prepare","buildDomWrapper","getColumnSum","getRowSum","bool","convertChartTypes","chartType","error","parseRawData","parseRequest","map","areachart","barchart","columnchart","linechart","piechart","testDom","readyState","DOMContentLoaded","removeEventListener","__KEEN_NO_COMMON_GLOBAL_OBJECT__","env","Keen","global"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;ACnEO,SAASA,IAAT,CAAcC,CAAd,EAAiBC,EAAjB,EAAqBC,CAArB,EAAwB;AAC7B,MAAIC,CAAJ;AACA,MAAI,CAACH,CAAL,EAAQ;AACN,WAAO,CAAP;AACD;AACDE,MAAI,CAACA,CAAD,GAAKF,CAAL,GAASE,CAAb;AACA,MAAIF,aAAaI,KAAjB,EAAwB;AACtB;AACA,SAAKD,IAAI,CAAT,EAAYA,IAAIH,EAAEK,MAAlB,EAA0BF,GAA1B,EAA+B;AAC7B,UAAIF,GAAGK,IAAH,CAAQJ,CAAR,EAAWF,EAAEG,CAAF,CAAX,EAAiBA,CAAjB,EAAoBH,CAApB,MAA2B,KAA/B,EAAsC;AACpC,eAAO,CAAP;AACD;AACF;AACF,GAPD,MAOO;AACL;AACA,SAAKG,CAAL,IAAUH,CAAV,EAAa;AACX,UAAIA,EAAEO,cAAF,CAAiBJ,CAAjB,CAAJ,EAAyB;AACvB,YAAIF,GAAGK,IAAH,CAAQJ,CAAR,EAAWF,EAAEG,CAAF,CAAX,EAAiBA,CAAjB,EAAoBH,CAApB,MAA2B,KAA/B,EAAqC;AACnC,iBAAO,CAAP;AACD;AACF;AACF;AACF;AACD,SAAO,CAAP;AACD,C;;;;;;;;ACxBM,SAASQ,MAAT,CAAgBC,MAAhB,EAAwB;AAC7B,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIC,UAAUN,MAA9B,EAAsCK,GAAtC,EAA2C;AACzC,SAAK,IAAIE,IAAT,IAAiBD,UAAUD,CAAV,CAAjB,EAA8B;AAC5BD,aAAOG,IAAP,IAAeD,UAAUD,CAAV,EAAaE,IAAb,CAAf;AACD;AACF;AACD,SAAOH,MAAP;AACD,C;;;;;;;ACPD;AAAA,IAAMI,kBAAkB,SAAxB;;AAEA;;;;;;;;AAQO,SAASC,UAAT,CAAoBC,MAApB,EAA4B;AACjC,MAAIC,MAAM,KAAKD,MAAf;AACA,MAAIE,QAAQJ,gBAAgBK,IAAhB,CAAqBF,GAArB,CAAZ;;AAEA,MAAI,CAACC,KAAL,EAAY;AACV,WAAOD,GAAP;AACD;;AAED,MAAIG,MAAJ;AACA,MAAIC,OAAO,EAAX;AACA,MAAIC,QAAQ,CAAZ;AACA,MAAIC,YAAY,CAAhB;;AAEA,OAAKD,QAAQJ,MAAMI,KAAnB,EAA0BA,QAAQL,IAAIX,MAAtC,EAA8CgB,OAA9C,EAAuD;AACrD,YAAQL,IAAIO,UAAJ,CAAeF,KAAf,CAAR;AACE,WAAK,EAAL;AAAS;AACPF,iBAAS,QAAT;AACA;AACF,WAAK,EAAL;AAAS;AACPA,iBAAS,OAAT;AACA;AACF,WAAK,EAAL;AAAS;AACPA,iBAAS,OAAT;AACA;AACF,WAAK,EAAL;AAAS;AACPA,iBAAS,MAAT;AACA;AACF,WAAK,EAAL;AAAS;AACPA,iBAAS,MAAT;AACA;AACF;AACE;AAjBJ;;AAoBA,QAAIG,cAAcD,KAAlB,EAAyB;AACvBD,cAAQJ,IAAIQ,SAAJ,CAAcF,SAAd,EAAyBD,KAAzB,CAAR;AACD;;AAEDC,gBAAYD,QAAQ,CAApB;AACAD,YAAQD,MAAR;AACD;;AAED,SAAOG,cAAcD,KAAd,GACHD,OAAOJ,IAAIQ,SAAJ,CAAcF,SAAd,EAAyBD,KAAzB,CADJ,GAEHD,IAFJ;AAGD,C;;;;;;ACvDD,gD;;;;;;;ACAA;AAAA;;;;;;;;AAQO,SAASK,aAAT,CAAuBC,WAAvB,EAAoC;AACzC,SAAOA,YAAYC,OAAZ,CAAoB,eAApB,EAAqC,EAArC,CAAP;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVD,qDAAe,UAAUC,GAAV,EAAe;AAC5B,MAAMC,OAAO,EAAb;AACA,OAAK,IAAInB,IAAI,CAAb,EAAgBA,IAAIkB,GAApB,EAAyBlB,GAAzB,EAA8B;AAC5BmB,SAAKC,IAAL,CAAU,IAAV;AACD;AACD,SAAOD,IAAP;AACD,C;;;;;ACND;AACA;;AAEO,SAASE,YAAT,CAAsBf,GAAtB,EAA2BgB,KAA3B,EAAkC;AACvC,MAAMC,OAAO,IAAb;AACA,MAAMC,OAAO9B,MAAM+B,SAAN,CAAgBC,KAAhB,CAAsB9B,IAAtB,CAA2BK,SAA3B,EAAsC,CAAtC,CAAb;AACA,MAAM0B,QAASrB,QAAQsB,SAAT,GAAsBtB,GAAtB,GAA4B,IAA1C;;AAEA,MAAI,OAAOgB,KAAP,KAAiB,UAArB,EAAiC;AAC/BC,SAAKM,MAAL,CAAY,CAAZ,EAAeT,IAAf,CAAoBO,KAApB;AACAtC,IAAA,4BAAAA,CAAKkC,KAAKM,MAAV,EAAkB,UAASC,GAAT,EAAc9B,CAAd,EAAiB;AACjC,UAAI+B,aAAJ;AACA,UAAI/B,IAAI,CAAR,EAAW;AACT+B,eAAOT,MAAM1B,IAAN,CAAW2B,IAAX,EAAiBO,GAAjB,EAAsB9B,CAAtB,CAAP;AACA,YAAI,OAAO+B,IAAP,KAAgB,WAApB,EAAiC;AAC/BA,iBAAO,IAAP;AACD;AACDR,aAAKM,MAAL,CAAY7B,CAAZ,EAAeoB,IAAf,CAAoBW,IAApB;AACD;AACF,KATD;AAUD,GAZD,MAcK,IAAI,CAACT,KAAD,IAAUA,iBAAiB5B,KAA/B,EAAsC;AACzC4B,YAAQA,SAAS,EAAjB;;AAEA,QAAIA,MAAM3B,MAAN,IAAgB4B,KAAKM,MAAL,CAAYlC,MAAZ,GAAqB,CAAzC,EAA4C;AAC1C2B,cAAQA,MAAMU,MAAN,CAAa,gBAAAC,CAAeV,KAAKM,MAAL,CAAYlC,MAAZ,GAAqB,CAArB,GAAyB2B,MAAM3B,MAA9C,CAAb,CAAR;AACD,KAFD,MAGK;AACH;AACA;AACAN,MAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5B,YAAIuB,KAAKM,MAAL,CAAYlC,MAAZ,GAAoB,CAApB,GAAwB2B,MAAM3B,MAAlC,EAA0C;AACxCwC,oBAAUvC,IAAV,CAAe2B,IAAf,EAAqBa,OAAOb,KAAKM,MAAL,CAAYlC,MAAnB,CAArB;AACD;AACF,OAJD;AAKD;;AAED4B,SAAKM,MAAL,CAAY,CAAZ,EAAeT,IAAf,CAAoBO,KAApB;AACAtC,IAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5BuB,WAAKM,MAAL,CAAY7B,IAAE,CAAd,EAAiBuB,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAsB,CAAvC,IAA4CuC,KAA5C;AACD,KAFD;AAID;;AAED,SAAOX,IAAP;AACD;;AAEM,SAASY,SAAT,CAAmB7B,GAAnB,EAAwBgB,KAAxB,EAA+B;AACpC,MAAMC,OAAO,IAAb;AACA,MAAMC,OAAO9B,MAAM+B,SAAN,CAAgBC,KAAhB,CAAsB9B,IAAtB,CAA2BK,SAA3B,EAAsC,CAAtC,CAAb;AACA,MAAM0B,QAASrB,QAAQsB,SAAT,GAAsBtB,GAAtB,GAA4B,IAA1C;AACA,MAAM+B,SAAS,EAAf;;AAEAA,SAAOjB,IAAP,CAAYO,KAAZ;;AAEA,MAAI,OAAOL,KAAP,KAAiB,UAArB,EAAiC;AAC/BjC,IAAA,4BAAAA,CAAKkC,KAAKM,MAAL,CAAY,CAAZ,CAAL,EAAqB,UAASF,KAAT,EAAgB3B,CAAhB,EAAkB;AACrC,UAAIsC,YAAJ;AACA,UAAIP,aAAJ;AACA,UAAI/B,IAAI,CAAR,EAAW;AACTsC,cAAMf,KAAKgB,YAAL,CAAkBvC,CAAlB,CAAN;AACA+B,eAAOT,MAAM1B,IAAN,CAAW2B,IAAX,EAAiBe,GAAjB,EAAsBtC,CAAtB,CAAP;AACA,YAAI,OAAO+B,IAAP,KAAgB,WAApB,EAAiC;AAC/BA,iBAAO,IAAP;AACD;AACDM,eAAOjB,IAAP,CAAYW,IAAZ;AACD;AACF,KAXD;AAYAR,SAAKM,MAAL,CAAYT,IAAZ,CAAiBiB,MAAjB;AACD,GAdD,MAgBK,IAAI,CAACf,KAAD,IAAUA,iBAAiB5B,KAA/B,EAAsC;AACzC4B,YAAQA,SAAS,EAAjB;;AAEA,QAAIA,MAAM3B,MAAN,IAAgB4B,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAwB,CAA5C,EAA+C;AAC7C2B,cAAQA,MAAMU,MAAN,CAAc,gBAAAC,CAAgBV,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAwB,CAAxB,GAA4B2B,MAAM3B,MAAlD,CAAd,CAAR;AACD,KAFD,MAGK;AACHN,MAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5B,YAAIuB,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAuB,CAAvB,GAA2B2B,MAAM3B,MAArC,EAA6C;AAC3C0B,uBAAazB,IAAb,CAAkB2B,IAAlB,EAAwBa,OAAQb,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAvB,CAAxB;AACD;AACF,OAJD;AAKD;;AAED4B,SAAKM,MAAL,CAAYT,IAAZ,CAAiBiB,OAAOL,MAAP,CAAcV,KAAd,CAAjB;AACD;;AAED,SAAOC,IAAP;AACD,C;;AC1FD;;AAEO,SAASiB,YAAT,CAAsBC,CAAtB,EAAyB;AAC9B,MAAMlB,OAAO,IAAb;AACA,MAAMZ,QAAS,OAAO8B,CAAP,KAAa,QAAd,GAA0BA,CAA1B,GAA8B,KAAKZ,MAAL,CAAY,CAAZ,EAAea,OAAf,CAAuBD,CAAvB,CAA5C;;AAEA,MAAI9B,QAAQ,CAAC,CAAb,EAAgB;AACdtB,IAAA,4BAAAA,CAAKkC,KAAKM,MAAV,EAAkB,UAASC,GAAT,EAAc9B,CAAd,EAAgB;AAChCuB,WAAKM,MAAL,CAAY7B,CAAZ,EAAe2C,MAAf,CAAsBhC,KAAtB,EAA6B,CAA7B;AACD,KAFD;AAGD;AACD,SAAOY,IAAP;AACD;;AAEM,SAASqB,SAAT,CAAmBH,CAAnB,EAAsB;AAC3B,MAAI9B,QAAS,OAAO8B,CAAP,KAAa,QAAd,GAA0BA,CAA1B,GAA8B,KAAKF,YAAL,CAAkB,CAAlB,EAAqBG,OAArB,CAA6BD,CAA7B,CAA1C;;AAEA,MAAI9B,QAAQ,CAAC,CAAb,EAAgB;AACd,SAAKkB,MAAL,CAAYc,MAAZ,CAAmBhC,KAAnB,EAA0B,CAA1B;AACD;AACD,SAAO,IAAP;AACD,C;;ACrBD;;AAEO,SAASkC,aAAT,CAAuBC,EAAvB,EAA2B;AAChC,MAAMvB,OAAO,IAAb;AACA,MAAMwB,QAAQ,EAAd;;AAEA1D,EAAA,4BAAAA,CAAKkC,KAAKM,MAAV,EAAkB,UAASC,GAAT,EAAc9B,CAAd,EAAiB;AACjC+C,UAAM3B,IAAN,CAAW,EAAX;AACD,GAFD;;AAIA/B,EAAA,4BAAAA,CAAKkC,KAAKM,MAAL,CAAY,CAAZ,CAAL,EAAqB,UAASS,GAAT,EAActC,CAAd,EAAgB;AACnC,QAAIgD,iBAAiBzB,KAAKgB,YAAL,CAAkBvC,CAAlB,CAArB;AACA,QAAIA,KAAK,CAAL,IAAU8C,GAAGlD,IAAH,CAAQ2B,IAAR,EAAcyB,cAAd,EAA8BhD,CAA9B,CAAd,EAAgD;AAC9CX,MAAA,4BAAAA,CAAK2D,cAAL,EAAqB,UAASjB,IAAT,EAAekB,EAAf,EAAkB;AACrCF,cAAME,EAAN,EAAU7B,IAAV,CAAeW,IAAf;AACD,OAFD;AAGD;AACF,GAPD;;AASAR,OAAK2B,IAAL,CAAUH,KAAV;AACA,SAAOxB,IAAP;AACD;;AAEM,SAAS4B,UAAT,CAAoBL,EAApB,EAAwB;AAC7B,MAAMvB,OAAO,IAAb;AACA,MAAMwB,QAAQ,EAAd;;AAEA1D,EAAA,4BAAAA,CAAKkC,KAAKM,MAAV,EAAkB,UAASC,GAAT,EAAc9B,CAAd,EAAgB;AAChC,QAAIA,KAAK,CAAL,IAAU8C,GAAGlD,IAAH,CAAQ2B,IAAR,EAAcO,GAAd,EAAmB9B,CAAnB,CAAd,EAAqC;AACnC+C,YAAM3B,IAAN,CAAWU,GAAX;AACD;AACF,GAJD;;AAMAP,OAAK2B,IAAL,CAAUH,KAAV;AACA,SAAOxB,IAAP;AACD,C;;ACnCD;AACA;AACA;;AAEO,SAAS6B,YAAT,CAAsBzC,KAAtB,EAA6BL,GAA7B,EAAkCgB,KAAlC,EAAyC;AAC9C,MAAMC,OAAO,IAAb;AACA,MAAMI,QAASrB,QAAQsB,SAAT,GAAsBtB,GAAtB,GAA4B,IAA1C;;AAEA,MAAI,OAAOgB,KAAP,KAAiB,UAArB,EAAiC;;AAE/BC,SAAKM,MAAL,CAAY,CAAZ,EAAec,MAAf,CAAsBhC,KAAtB,EAA6B,CAA7B,EAAgCgB,KAAhC;AACAtC,IAAA,4BAAAA,CAAKkC,KAAKM,MAAV,EAAkB,UAASC,GAAT,EAAc9B,CAAd,EAAiB;AACjC,UAAI+B,IAAJ;AACA,UAAI/B,IAAI,CAAR,EAAW;AACT+B,eAAOT,MAAM1B,IAAN,CAAW2B,IAAX,EAAiBO,GAAjB,EAAsB9B,CAAtB,CAAP;AACA,YAAI,OAAO+B,IAAP,KAAgB,WAApB,EAAiC;AAC/BA,iBAAO,IAAP;AACD;AACDR,aAAKM,MAAL,CAAY7B,CAAZ,EAAe2C,MAAf,CAAsBhC,KAAtB,EAA6B,CAA7B,EAAgCoB,IAAhC;AACD;AACF,KATD;AAWD,GAdD,MAgBK,IAAI,CAACT,KAAD,IAAUA,iBAAiB5B,KAA/B,EAAsC;AACzC4B,YAAQA,SAAS,EAAjB;;AAEA,QAAIA,MAAM3B,MAAN,IAAgB4B,KAAKM,MAAL,CAAYlC,MAAZ,GAAqB,CAAzC,EAA4C;AAC1C2B,cAAQA,MAAMU,MAAN,CAAc,gBAAAC,CAAeV,KAAKM,MAAL,CAAYlC,MAAZ,GAAqB,CAArB,GAAyB2B,MAAM3B,MAA9C,CAAd,CAAR;AACD,KAFD,MAGK;AACH;AACA;AACAN,MAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5B,YAAIuB,KAAKM,MAAL,CAAYlC,MAAZ,GAAoB,CAApB,GAAwB2B,MAAM3B,MAAlC,EAA0C;AACxCwC,UAAA,SAAAA,CAAUvC,IAAV,CAAe2B,IAAf,EAAqBa,OAAQb,KAAKM,MAAL,CAAYlC,MAApB,CAArB;AACD;AACF,OAJD;AAKD;;AAED4B,SAAKM,MAAL,CAAY,CAAZ,EAAec,MAAf,CAAsBhC,KAAtB,EAA6B,CAA7B,EAAgCgB,KAAhC;AACAtC,IAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5BuB,WAAKM,MAAL,CAAY7B,IAAE,CAAd,EAAiB2C,MAAjB,CAAwBhC,KAAxB,EAA+B,CAA/B,EAAkCuB,KAAlC;AACD,KAFD;AAID;AACD,SAAOX,IAAP;AACD;;AAEM,SAAS8B,SAAT,CAAmB1C,KAAnB,EAA0BL,GAA1B,EAA+BgB,KAA/B,EAAsC;AAC3C,MAAMC,OAAO,IAAb;AACA,MAAMc,SAAS,EAAf;AACA,MAAMV,QAASrB,QAAQsB,SAAT,GAAsBtB,GAAtB,GAA4B,IAA1C;AACA+B,SAAOjB,IAAP,CAAYO,KAAZ;;AAEA,MAAI,OAAOL,KAAP,KAAiB,UAArB,EAAiC;AAC/BjC,IAAA,4BAAAA,CAAKkC,KAAKM,MAAL,CAAY,CAAZ,CAAL,EAAqB,UAASF,KAAT,EAAgB3B,CAAhB,EAAmB;AACtC,UAAIsC,YAAJ;AACA,UAAIP,aAAJ;AACA,UAAI/B,IAAI,CAAR,EAAW;AACTsC,cAAMf,KAAKgB,YAAL,CAAkBvC,CAAlB,CAAN;AACA+B,eAAOT,MAAM1B,IAAN,CAAW2B,IAAX,EAAiBe,GAAjB,EAAsBtC,CAAtB,CAAP;AACA,YAAI,OAAO+B,IAAP,KAAgB,WAApB,EAAiC;AAC/BA,iBAAO,IAAP;AACD;AACDM,eAAOjB,IAAP,CAAYW,IAAZ;AACD;AACF,KAXD;AAYAR,SAAKM,MAAL,CAAYc,MAAZ,CAAmBhC,KAAnB,EAA0B,CAA1B,EAA6B0B,MAA7B;AACD,GAdD,MAgBK,IAAI,CAACf,KAAD,IAAUA,iBAAiB5B,KAA/B,EAAsC;AACzC4B,YAAQA,SAAS,EAAjB;;AAEA,QAAIA,MAAM3B,MAAN,IAAgB4B,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAwB,CAA5C,EAA+C;AAC7C2B,cAAQA,MAAMU,MAAN,CAAc,gBAAAC,CAAgBV,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAwB,CAAxB,GAA4B2B,MAAM3B,MAAlD,CAAd,CAAR;AACD,KAFD,MAGK;AACHN,MAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5B,YAAIuB,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAuB,CAAvB,GAA2B2B,MAAM3B,MAArC,EAA6C;AAC3C0B,UAAA,YAAAA,CAAazB,IAAb,CAAkB2B,IAAlB,EAAwBa,OAAQb,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAvB,CAAxB;AACD;AACF,OAJD;AAKD;;AAED4B,SAAKM,MAAL,CAAYc,MAAZ,CAAmBhC,KAAnB,EAA0B,CAA1B,EAA6B0B,OAAOL,MAAP,CAAcV,KAAd,CAA7B;AACD;;AAED,SAAOC,IAAP;AACD,C;;ACzFD;;AAEO,SAASgB,YAAT,CAAsBE,CAAtB,EAAyB;AAC9B,MAAMa,SAAS,EAAf;AACA,MAAM3C,QAAS,OAAO8B,CAAP,KAAa,QAAd,GAA0BA,CAA1B,GAA8B,KAAKZ,MAAL,CAAY,CAAZ,EAAea,OAAf,CAAuBD,CAAvB,CAA5C;;AAEA,MAAI9B,QAAQ,CAAC,CAAT,IAAc,OAAO,KAAKkB,MAAL,CAAY,CAAZ,EAAelB,KAAf,CAAP,KAAiC,WAAnD,EAAgE;AAC9DtB,IAAA,4BAAAA,CAAK,KAAKwC,MAAV,EAAkB,UAASC,GAAT,EAAc9B,CAAd,EAAiB;AACjCsD,aAAOlC,IAAP,CAAYU,IAAInB,KAAJ,CAAZ;AACD,KAFD;AAGD;AACD,SAAO2C,MAAP;AACD;;AAEM,SAASC,SAAT,CAAmBd,CAAnB,EAAsB;AAC3B,MAAIa,SAAS,EAAb;AACA,MAAM3C,QAAS,OAAO8B,CAAP,KAAa,QAAd,GAA0BA,CAA1B,GAA8B,KAAKF,YAAL,CAAkB,CAAlB,EAAqBG,OAArB,CAA6BD,CAA7B,CAA5C;;AAEA,MAAI9B,QAAQ,CAAC,CAAT,IAAc,OAAO,KAAKkB,MAAL,CAAYlB,KAAZ,CAAP,KAA8B,WAAhD,EAA6D;AAC3D2C,aAAS,KAAKzB,MAAL,CAAYlB,KAAZ,CAAT;AACD;AACD,SAAO2C,MAAP;AACD,C;;;;;ACtBD;AACA;;AAEA,IAAME,UAAU,EAAhB;;AAEA,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,KAAtB,EAA6BC,GAA7B,EAAiC;AAC/B,MAAIC,MAAMH,IAAIhC,KAAJ,CAAUiC,SAAO,CAAjB,EAAqBC,MAAMA,MAAI,CAAV,GAAcF,IAAI/D,MAAvC,CAAV;AAAA,MACImE,MAAM,CADV;AAAA,MAEIC,MAAM,IAFV;;AAIA;AACA1E,EAAA,4BAAAA,CAAKwE,GAAL,EAAU,UAASG,GAAT,EAAchE,CAAd,EAAgB;AACxB,QAAI,OAAOgE,GAAP,KAAe,QAAf,IAA2B,CAACC,MAAMC,WAAWF,GAAX,CAAN,CAAhC,EAAwD;AACtDF,aAAOI,WAAWF,GAAX,CAAP;AACD;AACF,GAJD;AAKA,SAAOF,MAAMD,IAAIlE,MAAjB;AACD;;AAED,SAASwE,OAAT,CAAiBT,GAAjB,EAAsBC,KAAtB,EAA6BC,GAA7B,EAAiC;AAC/B,MAAIC,MAAMH,IAAIhC,KAAJ,CAAUiC,SAAO,CAAjB,EAAqBC,MAAMA,MAAI,CAAV,GAAcF,IAAI/D,MAAvC,CAAV;AAAA,MACIyE,OAAO,EADX;;AAGA;AACA/E,EAAA,4BAAAA,CAAKwE,GAAL,EAAU,UAASG,GAAT,EAAchE,CAAd,EAAgB;AACxB,QAAI,OAAOgE,GAAP,KAAe,QAAf,IAA2B,CAACC,MAAMC,WAAWF,GAAX,CAAN,CAAhC,EAAwD;AACtDI,WAAKhD,IAAL,CAAU8C,WAAWF,GAAX,CAAV;AACD;AACF,GAJD;AAKA,SAAOK,KAAKC,GAAL,CAASC,KAAT,CAAeF,IAAf,EAAqBD,IAArB,CAAP;AACD;;AAED,SAASI,OAAT,CAAiBd,GAAjB,EAAsBC,KAAtB,EAA6BC,GAA7B,EAAiC;AAC/B,MAAIC,MAAMH,IAAIhC,KAAJ,CAAUiC,SAAO,CAAjB,EAAqBC,MAAMA,MAAI,CAAV,GAAcF,IAAI/D,MAAvC,CAAV;AAAA,MACIyE,OAAO,EADX;;AAGA;AACA/E,EAAA,4BAAAA,CAAKwE,GAAL,EAAU,UAASG,GAAT,EAAchE,CAAd,EAAgB;AACxB,QAAI,OAAOgE,GAAP,KAAe,QAAf,IAA2B,CAACC,MAAMC,WAAWF,GAAX,CAAN,CAAhC,EAAwD;AACtDI,WAAKhD,IAAL,CAAU8C,WAAWF,GAAX,CAAV;AACD;AACF,GAJD;AAKA,SAAOK,KAAKI,GAAL,CAASF,KAAT,CAAeF,IAAf,EAAqBD,IAArB,CAAP;AACD;;AAED,SAAS,YAAT,CAAaV,GAAb,EAAkBC,KAAlB,EAAyBC,GAAzB,EAA6B;AAC3B;AACA,MAAIC,MAAMH,IAAIhC,KAAJ,CAAUiC,SAAO,CAAjB,EAAqBC,MAAMA,MAAI,CAAV,GAAcF,IAAI/D,MAAvC,CAAV;AAAA,MACImE,MAAM,CADV;;AAGA;AACAzE,EAAA,4BAAAA,CAAKwE,GAAL,EAAU,UAASG,GAAT,EAAchE,CAAd,EAAgB;AACxB,QAAI,OAAOgE,GAAP,KAAe,QAAf,IAA2B,CAACC,MAAMC,WAAWF,GAAX,CAAN,CAAhC,EAAwD;AACtDF,aAAOI,WAAWF,GAAX,CAAP;AACD;AACF,GAJD;AAKA,SAAOF,GAAP;AACD;;AAGD;;AAEA,4BAAAzE,CAAKqF,OAAL,EAAc,UAASC,MAAT,EAAiBC,IAAjB,EAAsB;AAClC,MAAIC,cAAcD,KAAKE,MAAL,CAAY,CAAZ,EAAeC,WAAf,KAA+BH,KAAKlD,KAAL,CAAW,CAAX,CAAjD;AACA8B,UAAQ,cAAcqB,WAAtB,IAAqCrB,QAAQ,WAAWqB,WAAnB,IAAkC,UAASnB,GAAT,EAAa;AAClF,WAAO,KAAKkB,IAAL,EAAWlB,GAAX,EAAgB,CAAhB,CAAP;AACD,GAFD;AAGD,CALD;;AAOAF,QAAQ,gBAAR,IAA4BA,QAAQ,aAAR,IAAyB,UAASE,GAAT,EAAa;AAChE,SAAOA,IAAI,CAAJ,CAAP;AACD,CAFD;;AAIO,IAAMgB,UAAU;AACrBjB,kBADqB;AAErBU,kBAFqB;AAGrBK,kBAHqB;AAIrBV,OAAA,YAAAA;AAJqB,CAAhB;;AAOP,gCAAAhE,CAAO4E,OAAP,EAAgBlB,OAAhB;;AAEA,6CAAe,EAAEkB,gBAAF,EAAf,E;;AClFA;AACA;;AAEO,SAASM,WAAT,CAAqB1E,GAArB,EAA0B2E,IAA1B,EAAgC;AACrC,MAAI1D,OAAO,IAAX;AAAA,MACI2D,OAAO,KAAKrD,MAAL,CAAY,CAAZ,EAAeH,KAAf,CAAqB,CAArB,CADX;AAAA,MACoC;AAChCyD,SAAO,EAFX;AAAA,MAGIpC,QAAQ,EAHZ;AAAA,MAIID,KAAKmC,QAAQ,OAAAG,CAAoBC,cAJrC;;AAMA;AACAhG,EAAA,4BAAAA,CAAK6F,IAAL,EAAW,UAASnD,IAAT,EAAe/B,CAAf,EAAkB;AAC3BmF,SAAK/D,IAAL,CAAUG,KAAKgB,YAAL,CAAkBvC,IAAE,CAApB,EAAuB0B,KAAvB,CAA6B,CAA7B,CAAV;AACD,GAFD;AAGAyD,OAAKG,IAAL,CAAU,UAASC,CAAT,EAAWC,CAAX,EAAa;AACrB;AACA,QAAIC,KAAK3C,GAAGlD,IAAH,CAAQ2B,IAAR,EAAcgE,CAAd,IAAmBzC,GAAGlD,IAAH,CAAQ2B,IAAR,EAAciE,CAAd,CAA5B;AACA,QAAIC,EAAJ,EAAQ;AACN,aAAQnF,QAAQ,KAAR,GAAgB,CAAhB,GAAoB,CAAC,CAA7B;AACD,KAFD,MAEO,IAAI,CAACmF,EAAL,EAAS;AACd,aAAQnF,QAAQ,KAAR,GAAgB,CAAC,CAAjB,GAAqB,CAA7B;AACD,KAFM,MAEA;AACL,aAAO,CAAP;AACD;AACF,GAVD;AAWAjB,EAAA,4BAAAA,CAAK8F,IAAL,EAAW,UAAS7C,GAAT,EAActC,CAAd,EAAiB;AAC1BuB,SACGiB,YADH,CACgBxC,IAAE,CADlB,EAEGoD,YAFH,CAEgBpD,IAAE,CAFlB,EAEqBsC,IAAI,CAAJ,CAFrB,EAE6BA,IAAIZ,KAAJ,CAAU,CAAV,CAF7B;AAGD,GAJD;AAKA,SAAOH,IAAP;AACD;;AAEM,SAASmE,QAAT,CAAkBpF,GAAlB,EAAuB2E,IAAvB,EAA6B;AAClC,MAAI1D,OAAO,IAAX;AAAA,MACI2D,OAAO,KAAKrD,MAAL,CAAYH,KAAZ,CAAkB,CAAlB,EAAoB,CAApB,CADX;AAAA,MAEIiE,OAAO,KAAK9D,MAAL,CAAYH,KAAZ,CAAkB,CAAlB,CAFX;AAAA,MAGIoB,KAAKmC,QAAQ,OAAAG,CAAoBQ,WAHrC;AAIAD,OAAKL,IAAL,CAAU,UAASC,CAAT,EAAYC,CAAZ,EAAc;AACtB;AACA,QAAIC,KAAK3C,GAAGlD,IAAH,CAAQ2B,IAAR,EAAcgE,CAAd,IAAmBzC,GAAGlD,IAAH,CAAQ2B,IAAR,EAAciE,CAAd,CAA5B;AACA,QAAIC,EAAJ,EAAQ;AACN,aAAQnF,QAAQ,KAAR,GAAgB,CAAhB,GAAoB,CAAC,CAA7B;AACD,KAFD,MAEO,IAAI,CAACmF,EAAL,EAAS;AACd,aAAQnF,QAAQ,KAAR,GAAgB,CAAC,CAAjB,GAAqB,CAA7B;AACD,KAFM,MAEA;AACL,aAAO,CAAP;AACD;AACF,GAVD;AAWAiB,OAAK2B,IAAL,CAAUgC,KAAKlD,MAAL,CAAY2D,IAAZ,CAAV;AACA,SAAOpE,IAAP;AACD,C;;ACnDD;AACA;AACA;;AAEO,SAASsE,YAAT,CAAsBpD,CAAtB,EAAyBnB,KAAzB,EAAgC;AACrC,MAAIC,OAAO,IAAX;AAAA,MACIZ,QAAS,OAAO8B,CAAP,KAAa,QAAd,GAA0BA,CAA1B,GAA8B,KAAKZ,MAAL,CAAY,CAAZ,EAAea,OAAf,CAAuBD,CAAvB,CAD1C;;AAGA,MAAI9B,QAAQ,CAAC,CAAb,EAAgB;;AAEd,QAAI,OAAOW,KAAP,KAAiB,UAArB,EAAiC;;AAE/BjC,MAAA,4BAAAA,CAAKkC,KAAK2B,IAAL,EAAL,EAAkB,UAASpB,GAAT,EAAc9B,CAAd,EAAgB;AAChC,YAAI+B,IAAJ;AACA,YAAI/B,IAAI,CAAR,EAAW;AACT+B,iBAAOT,MAAM1B,IAAN,CAAW2B,IAAX,EAAiBO,IAAInB,KAAJ,CAAjB,EAA6BX,CAA7B,EAAgC8B,GAAhC,CAAP;AACA,cAAI,OAAOC,IAAP,KAAgB,WAApB,EAAiC;AAC/BR,iBAAKM,MAAL,CAAY7B,CAAZ,EAAeW,KAAf,IAAwBoB,IAAxB;AACD;AACF;AACF,OARD;AAUD,KAZD,MAYO,IAAI,CAACT,KAAD,IAAUA,iBAAiB5B,KAA/B,EAAsC;AAC3C4B,cAAQA,SAAS,EAAjB;;AAEA,UAAIA,MAAM3B,MAAN,IAAgB4B,KAAK2B,IAAL,GAAYvD,MAAZ,GAAqB,CAAzC,EAA4C;AAC1C2B,gBAAQA,MAAMU,MAAN,CAAc,gBAAAC,CAAeV,KAAK2B,IAAL,GAAYvD,MAAZ,GAAqB,CAArB,GAAyB2B,MAAM3B,MAA9C,CAAd,CAAR;AACD,OAFD,MAGK;AACH;AACA;AACAN,QAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5B,cAAIuB,KAAKM,MAAL,CAAYlC,MAAZ,GAAoB,CAApB,GAAwB2B,MAAM3B,MAAlC,EAA0C;AACxCwC,YAAA,SAAAA,CAAUvC,IAAV,CAAe2B,IAAf,EAAqBa,OAAQb,KAAKM,MAAL,CAAYlC,MAApB,CAArB;AACD;AACF,SAJD;AAKD;;AAEDN,MAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5BuB,aAAKM,MAAL,CAAY7B,IAAE,CAAd,EAAiBW,KAAjB,IAA0BuB,KAA1B;AACD,OAFD;AAID;AAEF;AACD,SAAOX,IAAP;AACD;;AAEM,SAASuE,SAAT,CAAmBrD,CAAnB,EAAsBnB,KAAtB,EAA4B;AACjC,MAAIC,OAAO,IAAX;AAAA,MACIZ,QAAS,OAAO8B,CAAP,KAAa,QAAd,GAA0BA,CAA1B,GAA8B,KAAKF,YAAL,CAAkB,CAAlB,EAAqBG,OAArB,CAA6BD,CAA7B,CAD1C;;AAGA,MAAI9B,QAAQ,CAAC,CAAb,EAAgB;;AAEd,QAAI,OAAOW,KAAP,KAAiB,UAArB,EAAiC;;AAE/BjC,MAAA,4BAAAA,CAAKkC,KAAK2B,IAAL,GAAYvC,KAAZ,CAAL,EAAyB,UAASuB,KAAT,EAAgBlC,CAAhB,EAAkB;AACzC,YAAIsC,MAAMf,KAAKgB,YAAL,CAAkBvC,CAAlB,CAAV;AAAA,YACA+B,OAAOT,MAAM1B,IAAN,CAAW2B,IAAX,EAAiBW,KAAjB,EAAwBlC,CAAxB,EAA2BsC,GAA3B,CADP;AAEA,YAAI,OAAOP,IAAP,KAAgB,WAApB,EAAiC;AAC/BR,eAAKM,MAAL,CAAYlB,KAAZ,EAAmBX,CAAnB,IAAwB+B,IAAxB;AACD;AACF,OAND;AAQD,KAVD,MAUO,IAAI,CAACT,KAAD,IAAUA,iBAAiB5B,KAA/B,EAAsC;AAC3C4B,cAAQA,SAAS,EAAjB;;AAEA,UAAIA,MAAM3B,MAAN,IAAgB4B,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAwB,CAA5C,EAA+C;AAC7C2B,gBAAQA,MAAMU,MAAN,CAAc,gBAAAC,CAAgBV,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAwB,CAAxB,GAA4B2B,MAAM3B,MAAlD,CAAd,CAAR;AACD,OAFD,MAGK;AACHN,QAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5B,cAAIuB,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAuB,CAAvB,GAA2B2B,MAAM3B,MAArC,EAA6C;AAC3C0B,YAAA,YAAAA,CAAazB,IAAb,CAAkB2B,IAAlB,EAAwBa,OAAQb,KAAKM,MAAL,CAAY,CAAZ,EAAelC,MAAvB,CAAxB;AACD;AACF,SAJD;AAKD;;AAEDN,MAAA,4BAAAA,CAAKiC,KAAL,EAAY,UAASY,KAAT,EAAgBlC,CAAhB,EAAkB;AAC5BuB,aAAKM,MAAL,CAAYlB,KAAZ,EAAmBX,IAAE,CAArB,IAA0BkC,KAA1B;AACD,OAFD;AAGD;AAEF;AACD,SAAOX,IAAP;AACD,C;;;;ACrFD;AACA;;AAEO,SAASwE,OAAT,CAAiBC,EAAjB,EAAoB;AACzB,MAAIC,WAAW,EAAf;AACA,OAAK,IAAIjG,CAAT,IAAcgG,EAAd,EAAkB;AAChB,QAAI,CAACA,GAAGnG,cAAH,CAAkBG,CAAlB,CAAL,EAA2B;AAC3B,QAAI,QAAQgG,GAAGhG,CAAH,CAAR,KAAkB,QAAlB,IAA8BgG,GAAGhG,CAAH,MAAU,IAA5C,EAAkD;AAChD,UAAIkG,aAAaH,QAAQC,GAAGhG,CAAH,CAAR,CAAjB;AACA,WAAK,IAAImG,CAAT,IAAcD,UAAd,EAA0B;AACxB,YAAI,CAACA,WAAWrG,cAAX,CAA0BsG,CAA1B,CAAL,EAAmC;AACnCF,iBAASjG,IAAI,GAAJ,GAAUmG,CAAnB,IAAwBD,WAAWC,CAAX,CAAxB;AACD;AACF,KAND,MAMO;AACLF,eAASjG,CAAT,IAAcgG,GAAGhG,CAAH,CAAd;AACD;AACF;AACD,SAAOiG,QAAP;AACD,E;;AClBD,IAAIG,gBAAJ,C,CAAa;;AAEb;AACA;;AAEe,SAASC,UAAT,CAAoBC,GAApB,EAAwB;AACrCF,YAAUE,GAAV;AACA,SAAO,UAAS1B,IAAT,EAAc;AACnB,QAAI2B,UAAU7G,MAAM+B,SAAN,CAAgBC,KAAhB,CAAsB9B,IAAtB,CAA2BK,SAA3B,EAAsC,CAAtC,CAAd;;AAEA,QAAI,CAACuG,QAAQ5B,IAAR,CAAL,EAAoB;AAClB,YAAM,iCAAN;AACD,KAFD,MAGK;AACH,aAAO4B,QAAQ5B,IAAR,EAAcL,KAAd,CAAoB,IAApB,EAA0BgC,OAA1B,CAAP;AACD;AACF,GATD;AAUD;;AAED,SAASE,WAAT,GAAsB;AACpB,SAAO,UAASC,GAAT,EAAa;AAClB,WAAO,IAAIN,OAAJ,GACJvC,GADI,CACA,CAAC,OAAD,EAAU,QAAV,CADA,EACqB6C,IAAIpD,MADzB,EAEJqD,IAFI,CAEC,QAFD,CAAP;AAGD,GAJD;AAKD;;AAED;AACA,SAASC,aAAT,GAAwB;AACtB,MAAIL,UAAU7G,MAAM+B,SAAN,CAAgBC,KAAhB,CAAsB9B,IAAtB,CAA2BK,SAA3B,CAAd;AACA,SAAO,UAASyG,GAAT,EAAa;AAClB,QAAIG,UAAU,IAAIT,OAAJ,GACXO,IADW,CACN,UADM,CAAd;AAEAtH,IAAA,4BAAAA,CAAKqH,IAAIpD,MAAT,EAAiB,UAASwD,MAAT,EAAiB9G,CAAjB,EAAmB;AAClC,UAAIW,QAAQ4F,QAAQ,CAAR,KAAcA,QAAQ,CAAR,MAAe,eAA7B,GAA+CO,OAAOC,SAAP,CAAiBnD,GAAhE,GAAsEkD,OAAOC,SAAP,CAAiBpD,KAAnG;AACAkD,cAAQhD,GAAR,CAAY,CAAC,QAAD,EAAWlD,KAAX,CAAZ,EAA+BmG,OAAO5E,KAAtC;AACD,KAHD;AAIA,WAAO2E,OAAP;AACD,GARD;AASD;;AAED,SAASG,kBAAT,GAA6B;AAC3B,SAAO,UAASN,GAAT,EAAa;AAClB,QAAIG,UAAU,IAAIT,OAAJ,GACXO,IADW,CACN,gBADM,CAAd;AAEAtH,IAAA,4BAAAA,CAAKqH,IAAIpD,MAAT,EAAiB,UAASwD,MAAT,EAAiB9G,CAAjB,EAAmB;AAClC,UAAI2B,KAAJ;AACAtC,MAAA,4BAAAA,CAAKyH,MAAL,EAAa,UAAS5E,KAAT,EAAgB+E,GAAhB,EAAoB;AAC/B,YAAIA,QAAQ,QAAZ,EAAsB;AACpBtF,kBAAQsF,GAAR;AACD;AACF,OAJD;AAKAJ,cAAQhD,GAAR,CAAY,CAAC,QAAD,EAAWzB,OAAO0E,OAAOnF,KAAP,CAAP,CAAX,CAAZ,EAA+CmF,OAAOxD,MAAtD;AACD,KARD;AASA,WAAOuD,OAAP;AACD,GAbD;AAcD;;AAED;AACA,SAASK,oBAAT,GAA+B;AAC7B,MAAIX,UAAU7G,MAAM+B,SAAN,CAAgBC,KAAhB,CAAsB9B,IAAtB,CAA2BK,SAA3B,CAAd;AACA,SAAO,UAASyG,GAAT,EAAa;AAClB,QAAIG,UAAU,IAAIT,OAAJ,GACXO,IADW,CACN,kBADM,CAAd;AAEAtH,IAAA,4BAAAA,CAAKqH,IAAIpD,MAAT,EAAiB,UAASwD,MAAT,EAAiB9G,CAAjB,EAAmB;AAClC,UAAIW,QAAQ4F,QAAQ,CAAR,KAAcA,QAAQ,CAAR,MAAe,eAA7B,GAA+CO,OAAOC,SAAP,CAAiBnD,GAAhE,GAAsEkD,OAAOC,SAAP,CAAiBpD,KAAnG;AACA,UAAImD,OAAO5E,KAAP,CAAavC,MAAjB,EAAyB;AACvBN,QAAA,4BAAAA,CAAKyH,OAAO5E,KAAZ,EAAmB,UAASiF,KAAT,EAAgBC,CAAhB,EAAkB;AACnC,cAAIzF,KAAJ;AACAtC,UAAA,4BAAAA,CAAK8H,KAAL,EAAY,UAASjF,KAAT,EAAgB+E,GAAhB,EAAoB;AAC9B,gBAAIA,QAAQ,QAAZ,EAAsB;AACpBtF,sBAAQsF,GAAR;AACD;AACF,WAJD;AAKAJ,kBAAQhD,GAAR,CAAY,CAAEzB,OAAO+E,MAAMxF,KAAN,CAAP,CAAF,EAAwBhB,KAAxB,CAAZ,EAA6CwG,MAAM7D,MAAnD;AACD,SARD;AASD,OAVD,MAWK;AACHuD,gBAAQ1E,SAAR,CAAkBxB,KAAlB;AACD;AACF,KAhBD;AAiBA,WAAOkG,OAAP;AACD,GArBD;AAsBD;;AAED;AACA,SAASQ,wBAAT,GAAmC;AACjC,MAAId,UAAU7G,MAAM+B,SAAN,CAAgBC,KAAhB,CAAsB9B,IAAtB,CAA2BK,SAA3B,CAAd;AACA,MAAI,CAACsG,QAAQ,CAAR,CAAL,EAAiB,MAAM,kGAAN;AACjB,SAAO,UAASG,GAAT,EAAa;AAClB,QAAIG,UAAU,IAAIT,OAAJ,GACXO,IADW,CACN,uBADM,CAAd;AAEAtH,IAAA,4BAAAA,CAAKqH,IAAIpD,MAAT,EAAiB,UAASwD,MAAT,EAAiB9G,CAAjB,EAAmB;AAClC,UAAIsH,WAAWR,OAAOP,QAAQ,CAAR,EAAW,CAAX,CAAP,IAAwB,GAAxB,GAA8BO,OAAOP,QAAQ,CAAR,EAAW,CAAX,CAAP,CAA7C;AACAM,cAAQhD,GAAR,CAAY,CAAE,QAAF,EAAYyD,QAAZ,CAAZ,EAAoCR,OAAOxD,MAA3C;AACD,KAHD;AAIA,WAAOuD,OAAP;AACD,GARD;AASD;;AAED;AACA,SAASU,0BAAT,GAAqC;AACnC,MAAIhB,UAAU7G,MAAM+B,SAAN,CAAgBC,KAAhB,CAAsB9B,IAAtB,CAA2BK,SAA3B,CAAd;AACA,MAAI,CAACsG,QAAQ,CAAR,CAAL,EAAiB,MAAM,kGAAN;AACjB,SAAO,UAASG,GAAT,EAAa;AAClB,QAAIG,UAAU,IAAIT,OAAJ,GACXO,IADW,CACN,yBADM,CAAd;AAEAtH,IAAA,4BAAAA,CAAKqH,IAAIpD,MAAT,EAAiB,UAASwD,MAAT,EAAiB9G,CAAjB,EAAmB;AAClC,UAAIW,QAAQ4F,QAAQ,CAAR,KAAcA,QAAQ,CAAR,MAAe,eAA7B,GAA+CO,OAAOC,SAAP,CAAiBnD,GAAhE,GAAsEkD,OAAOC,SAAP,CAAiBpD,KAAnG;AACAtE,MAAA,4BAAAA,CAAKyH,OAAO,OAAP,CAAL,EAAsB,UAAS5E,KAAT,EAAgBkF,CAAhB,EAAkB;AACtC,YAAIzF,QAAQO,MAAMqE,QAAQ,CAAR,EAAW,CAAX,CAAN,IAAuB,GAAvB,GAA6BrE,MAAMqE,QAAQ,CAAR,EAAW,CAAX,CAAN,CAAzC;AACAM,gBAAQhD,GAAR,CAAY,CAAElC,KAAF,EAAShB,KAAT,CAAZ,EAA8BuB,MAAMoB,MAApC;AACD,OAHD;AAID,KAND;AAOA,WAAOuD,OAAP;AACD,GAXD;AAYD;;AAED,SAASW,WAAT,GAAsB;AACpB,SAAO,UAASd,GAAT,EAAa;AAClB,QAAIpD,MAAJ,EAAYmE,KAAZ,EAAmBZ,OAAnB;AACA,QAAI,OAAOH,IAAIe,KAAX,KAAqB,WAArB,IACG,OAAOf,IAAIpD,MAAX,KAAsB,WADzB,IAEKoD,IAAIpD,MAAJ,YAAsB5D,KAF/B,EAEsC;AAC9B;AACA4D,eAASoD,IAAIpD,MAAb;AACAmE,cAAQf,IAAIe,KAAZ;AACP,KAND,MAOK,IAAI,OAAOf,IAAIpD,MAAJ,CAAWmE,KAAlB,KAA4B,WAA5B,IACF,OAAOf,IAAIpD,MAAJ,CAAWA,MAAlB,KAA6B,WAD3B,IAEAoD,IAAIpD,MAAJ,CAAWA,MAAX,YAA6B5D,KAFjC,EAEwC;AACrC;AACA4D,eAASoD,IAAIpD,MAAJ,CAAWA,MAApB;AACAmE,cAAQf,IAAIpD,MAAJ,CAAWmE,KAAnB;AACP;AACDZ,cAAU,IAAIT,OAAJ,GAAcO,IAAd,CAAmB,QAAnB,CAAV;AACAE,YAAQxF,YAAR,CAAqB,YAArB;AACAhC,IAAA,4BAAAA,CAAKiE,MAAL,EAAa,UAASpB,KAAT,EAAgBlC,CAAhB,EAAkB;AAC7B,UAAI,OAAOyH,KAAP,KAAiB,WAAjB,IAAgCA,MAAMzH,CAAN,CAApC,EAA8C;AAC5C6G,gBAAQ1E,SAAR,CAAkBC,OAAOqF,MAAMzH,CAAN,EAAS0H,gBAAhB,CAAlB,EAAqD,CAACxF,KAAD,CAArD;AACD;AACF,KAJD;AAKA,WAAO2E,OAAP;AACD,GAxBD;AAyBD;;AAED,SAASc,SAAT,GAAoB;AAClB,SAAO,UAASjB,GAAT,EAAa;AAClB,QAAIG,UAAU,IAAIT,OAAJ,GACXO,IADW,CACN,MADM,CAAd;AAEAtH,IAAA,4BAAAA,CAAKqH,IAAIpD,MAAT,EAAiB,UAASpB,KAAT,EAAgBlC,CAAhB,EAAkB;AACjC6G,cAAQhD,GAAR,CAAa,CAAE,QAAF,EAAYzB,OAAOpC,IAAE,CAAT,CAAZ,CAAb,EAAwCkC,KAAxC;AACD,KAFD;AAGA,WAAO2E,OAAP;AACD,GAPD;AAQD;;AAED,SAASe,eAAT,GAA0B;AACxB,SAAO,UAASlB,GAAT,EAAa;AAClB,QAAIG,UAAU,IAAIT,OAAJ,GACXO,IADW,CACN,YADM,CAAd;AAEAtH,IAAA,4BAAAA,CAAKqH,IAAIpD,MAAT,EAAiB,UAASwD,MAAT,EAAiB9G,CAAjB,EAAmB;AAClCX,MAAA,4BAAAA,CAAK,OAAA0G,CAAQe,MAAR,CAAL,EAAsB,UAAS5E,KAAT,EAAgB+E,GAAhB,EAAoB;AACxCJ,gBAAQhD,GAAR,CAAY,CAAEoD,GAAF,EAAO7E,OAAOpC,IAAE,CAAT,CAAP,CAAZ,EAAkCkC,KAAlC;AACD,OAFD;AAGD,KAJD;AAKA2E,YAAQrE,YAAR,CAAqB,CAArB;AACA,WAAOqE,OAAP;AACD,GAVD;AAWD;;AAED;AACA,IAAML,UAAU;AACdqB,UAAQpB,WADM;AAEdqB,YAAUlB,aAFI;AAGd,oBAAkBI,kBAHJ;AAId,sBAAoBE,oBAJN;AAKd,2BAAyBG,wBALX;AAMd,6BAA2BE,0BANb;AAOdQ,UAAQP,WAPM;AAQdrG,QAAMwG,SARQ;AASdK,cAAYJ;AATE,CAAhB,C;;AC5KA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO,IAAM,eAAAxB,GAAU,SAAVA,OAAU,GAAY;AACjC,MAAI,gBAAgBA,OAAhB,KAA4B,KAAhC,EAAuC;AACrC,WAAO,IAAIA,OAAJ,EAAP;AACD;;AAED,OAAKvE,MAAL,GAAc,CACZ,CAAC,OAAD,CADY,CAAd;AAGA,OAAKoG,IAAL,GAAY;AACVtB,UAAM/E;AADI,GAAZ;AAGD,CAXM;;AAaP,eAAAwE,CAAQ3E,SAAR,CAAkByB,IAAlB,GAAyB,UAAUQ,GAAV,EAAe;AACtC,MAAI,CAACzD,UAAUN,MAAf,EAAuB,OAAO,KAAKkC,MAAZ;AACvB,OAAKA,MAAL,GAAe6B,eAAehE,KAAf,GAAuBgE,GAAvB,GAA6B,IAA5C;AACA,SAAO,IAAP;AACD,CAJD;;AAMA,eAAA0C,CAAQ3E,SAAR,CAAkBoC,GAAlB,GAAwB,UAAUqE,MAAV,EAAkBhG,KAAlB,EAAyB;AAC/C,MAAIjC,UAAUN,MAAV,GAAmB,CAAnB,IAAwBuI,OAAOvI,MAAP,GAAgB,CAA5C,EAA+C;AAC7C,UAAMwI,MAAM,8CAAN,CAAN;AACD;;AAED,MAAIC,WAAW,aAAa,OAAOF,OAAO,CAAP,CAApB,GAAgCA,OAAO,CAAP,CAAhC,GAA4C,KAAKrG,MAAL,CAAY,CAAZ,EAAea,OAAf,CAAuBwF,OAAO,CAAP,CAAvB,CAA3D;AAAA,MACIG,WAAW,aAAa,OAAOH,OAAO,CAAP,CAApB,GAAgCA,OAAO,CAAP,CAAhC,GAA4C,aAAoBtI,IAApB,CAAyB,IAAzB,EAA+B,CAA/B,EAAkC8C,OAAlC,CAA0CwF,OAAO,CAAP,CAA1C,CAD3D;;AAGA,MAAII,YAAY,aAAoB1I,IAApB,CAAyB,IAAzB,EAA+BsI,OAAO,CAAP,CAA/B,CAAhB;AAAA,MACIK,YAAY,UAAiB3I,IAAjB,CAAsB,IAAtB,EAA4BsI,OAAO,CAAP,CAA5B,CADhB;;AAGA;AACA,MAAII,UAAU3I,MAAV,GAAmB,CAAvB,EAA0B;AACxB6I,IAAA,aAAoB5I,IAApB,CAAyB,IAAzB,EAA+BwC,OAAO8F,OAAO,CAAP,CAAP,CAA/B;AACAE,eAAW,KAAKvG,MAAL,CAAY,CAAZ,EAAelC,MAAf,GAAwB,CAAnC;AACD;;AAED;AACA,MAAI4I,UAAU5I,MAAV,GAAmB,CAAvB,EAA0B;AACxB6I,IAAA,UAAiB5I,IAAjB,CAAsB,IAAtB,EAA4BwC,OAAO8F,OAAO,CAAP,CAAP,CAA5B;AACAG,eAAW,KAAKxG,MAAL,CAAYlC,MAAZ,GAAqB,CAAhC;AACD;;AAED;AACA,OAAKkC,MAAL,CAAawG,QAAb,EAAyBD,QAAzB,IAAsClG,KAAtC;AACA,SAAO,IAAP;AACD,CA1BD;;AA4BA,eAAAkE,CAAQ3E,SAAR,CAAkBkF,IAAlB,GAAyB,UAASrG,GAAT,EAAa;AACpC,MAAI,CAACL,UAAUN,MAAf,EAAuB,OAAO,KAAKsI,IAAL,CAAU,MAAV,CAAP;AACvB,OAAKA,IAAL,CAAU,MAAV,IAAqB3H,MAAM8B,OAAO9B,GAAP,CAAN,GAAoBsB,SAAzC;AACA,SAAO,IAAP;AACD,CAJD;;AAMA,gCAAA9B,CAAO,eAAAsG,CAAQ3E,SAAf,EAA0B,sBAA1B;AACA,gCAAA3B,CAAO,eAAAsG,CAAQ3E,SAAf,EAA0B,sBAA1B;AACA,gCAAA3B,CAAO,eAAAsG,CAAQ3E,SAAf,EAA0B,sBAA1B;AACA,gCAAA3B,CAAO,eAAAsG,CAAQ3E,SAAf,EAA0B,sBAA1B;AACA,gCAAA3B,CAAO,eAAAsG,CAAQ3E,SAAf,EAA0B,sBAA1B;AACA,gCAAA3B,CAAO,eAAAsG,CAAQ3E,SAAf,EAA0B,oBAA1B;AACA,gCAAA3B,CAAO,eAAAsG,CAAQ3E,SAAf,EAA0B,sBAA1B;;AAEA,gCAAA3B,CAAO,eAAAsG,CAAQ3E,SAAf,EAA0B,wBAA1B;AACA,eAAA2E,CAAQqC,MAAR,GAAiB,UAAAjC,CAAQ,eAAR,CAAjB;;AAEA,2EAAe,eAAf,E;;;;;;;;;;;AC9EO,SAASkC,UAAT,CAAoBpH,KAApB,EAA2B;AAChC,MAAIA,UAAU,IAAV,IAAkB,OAAOA,MAAMqH,OAAb,KAAyB,UAA3C,IAAyD,CAAC1E,MAAM3C,MAAMqH,OAAN,EAAN,CAA9D,EAAsF;AACpF,WAAO,IAAP;AACD;AACD,SAAO,KAAP;AACD;;AAEM,SAASC,UAAT,CAAoBtH,KAApB,EAA2B;AAChC,MAAMuH,WAAW,+DAAjB;AACA,SAAOA,SAASC,IAAT,CAAcxH,KAAd,CAAP;AACD;;AAED,yDAAe,UAAUA,KAAV,EAAiB;AAC9B,MAAI,QAAOA,KAAP,yCAAOA,KAAP,OAAiB,QAArB,EAA+B;AAC7B,WAAOoH,WAAWpH,KAAX,CAAP;AACD,GAFD,MAEO,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AACpC,WAAOsH,WAAWtH,KAAX,CAAP;AACD;AACD,SAAO,KAAP;AACD,C;;;;;;ACnBD,gD;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;AAEO,SAASyH,UAAT,CAAoBhJ,MAApB,EAA4B;AACjC,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIC,UAAUN,MAA9B,EAAsCK,GAAtC,EAA2C;AACzCX,IAAA,4BAAAA,CAAKY,UAAUD,CAAV,CAAL,EAAmB,UAASE,IAAT,EAAe+G,GAAf,EAAmB;AACpC,UAAM,OAAOlH,OAAOkH,GAAP,CAAP,KAAuB,WAAvB,IAAsC,OAAO/G,IAAP,KAAgB,WAAxD,IACE,QAAOH,OAAOkH,GAAP,CAAP,MAAuB,QAAvB,IAAsC,QAAO/G,IAAP,yCAAOA,IAAP,OAAgB,QADxD,IAEEH,OAAOkH,GAAP,MAAgB,IAAhB,IAAsC/G,SAAS,IAFrD,EAE6D;AACvD6I,mBAAWhJ,OAAOkH,GAAP,CAAX,EAAwB/G,IAAxB;AACL,OAJD,MAKK;AACHH,eAAOkH,GAAP,IAAc/G,IAAd;AACD;AACF,KATD;AAUD;AACD,SAAOH,MAAP;AACD,C;;;;;AChBD,wDAAe,UAAUiJ,SAAV,EAAqBC,OAArB,EAA8B;AAC3C,MAAIC,WAAW7E,KAAK8E,GAAL,CAAS,IAAIC,IAAJ,CAASJ,SAAT,EAAoBL,OAApB,KAAgC,IAAIS,IAAJ,CAASH,OAAT,EAAkBN,OAAlB,EAAzC,CAAf;AACA,MAAIU,SAAS,CACX,KADW,EAEX,KAFW,EAGX,KAHW,EAIX,KAJW,EAKX,KALW,EAMX,MANW,EAOX,MAPW,EAQX,KARW,EASX,MATW,EAUX,KAVW,EAWX,KAXW,EAYX,KAZW,CAAb;;AAeA;AACA,MAAIH,YAAY,UAAhB,EAA4B;AAC1B,WAAO,UAASI,EAAT,EAAY;AACjB,UAAIC,OAAO,IAAIH,IAAJ,CAASE,EAAT,CAAX;AACA,aAAOD,OAAOE,KAAKC,QAAL,EAAP,IAA0B,GAA1B,GAAgCD,KAAKE,WAAL,EAAvC;AACD,KAHD;AAID;AACD;AANA,OAOK,IAAIP,YAAY,QAAhB,EAA0B;AAC7B,aAAO,UAASI,EAAT,EAAY;AACjB,YAAIC,OAAO,IAAIH,IAAJ,CAASE,EAAT,CAAX;AACA,eAAOD,OAAOE,KAAKC,QAAL,EAAP,IAA0B,GAA1B,GAAgCD,KAAKG,OAAL,EAAvC;AACD,OAHD;AAID;AACD;AANK,SAOA,IAAIR,YAAY,OAAhB,EAAyB;AAC5B,eAAO,UAAP;AACD;AACD;AAHK,WAIA;AACH,iBAAO,aAAP;AACD;AACF,C;;ACvCD;;AAEA;;AAEA,sDAAe,UAAU/D,IAAV,EAAgB;AAC7B,MAAI5D,OAAO,IAAX;AAAA,MACIoI,QAAQ,KAAKC,IAAL,CAAUC,UAAV,CAAqBC,EADjC;AAAA,MAEIC,UAAU,EAFd;AAAA,MAGIC,UAAU,KAAKC,EAAL,GAAUC,aAAV,CAAwB,MAAM,KAAKC,KAAL,EAAN,GAAqB,YAA7C,CAHd;AAAA,MAIIC,cAAc,GAJlB;;AAMA,MAAIC,aAAa,KAAKT,IAAL,CAAUC,UAAV,CAAqBQ,UAArB,GAAkC;AACjDC,YAAQ,EADyC;AAEjDC,YAAQ,EAFyC;AAGjDC,cAAU,CAHuC;AAIjDC,WAAOpG,KAAKqG,KAAL,CAAW,CAACV,QAAQW,YAAR,GAAuB,EAAxB,IAA8B,EAAzC,CAJ0C;AAKjDC,WAAO;AAL0C,GAAnD;;AAQA;AACA,MAAI,KAAKjE,IAAL,OAAgB,OAAhB,IAA2B,KAAKA,IAAL,OAAgB,KAA/C,EAAsD;AACpD0D,eAAWI,KAAX,GAAmBJ,WAAWI,KAAX,IAAoB,CAApB,GAAwB,CAAxB,GAA4BJ,WAAWI,KAA1D;AACD;;AAED,OAAK,IAAIzK,IAAI,CAAb,EAAgBA,IAAImF,KAAKxF,MAAzB,EAAiCK,GAAjC,EAAsC;AACpC,QAAImF,KAAKnF,CAAL,EAAQ,CAAR,MAAe,GAAf,IAAsB,CAAC,6CAAA6K,CAAa1F,KAAKnF,CAAL,EAAQ,CAAR,CAAb,CAA3B,EAAqD;AACnD+J,cAAQ3I,IAAR,CAAa+D,KAAKnF,CAAL,EAAQ,CAAR,CAAb;AACD;AACF;;AAED,MAAI8K,WAAW,qBAAAC,CAAGC,MAAH,CAAUhB,OAAV,EACZxB,MADY,CACL,KADK,EAEZyC,IAFY,CAEP;AACJ,aAAS,gBADL;AAEJ,cAAUjB,QAAQW,YAAR,GAAuB,EAF7B;AAGJ,aAASP;AAHL,GAFO,EAOZc,KAPY,CAON;AACL,aAAS,CAACd,WAAD,GAAe,IADnB;AAEL,WAAO;AAFF,GAPM,CAAf;;AAYA,MAAIe,cAAcL,SACftC,MADe,CACR,GADQ,EAEfyC,IAFe,CAEV,OAFU,EAED,sBAFC,CAAlB;;AAIA,MAAIG,mBAAmB,KAAKf,WAAWI,KAAvC;AACA,MAAIY,aAAaP,SACdtC,MADc,CACP,GADO,EAEdyC,IAFc,CAET;AACJ,aAAS,2BADL;AAEJ,iBAAa,qBAAU;AACrB,aAAO,kBAAkBG,gBAAlB,GAAqC,GAA5C;AACD;AAJG,GAFS,CAAjB;;AASAE;;AAEA,WAASA,YAAT,GAAuB;AACrBjB,eAAWE,MAAX,GAAoBR,QAAQrI,KAAR,CAAc2I,WAAWG,QAAzB,EAAmCH,WAAWG,QAAX,GAAsBH,WAAWI,KAApE,CAApB;AACAJ,eAAWO,KAAX,GAAmBb,QAAQpK,MAA3B;AACA4L,0BAAsB3L,IAAtB,CAA2B2B,IAA3B,EAAiC8I,WAAWE,MAA5C;AACA,QAAIF,WAAWO,KAAX,GAAmBP,WAAWI,KAAlC,EAAyC;AACvCe,gCAA0B5L,IAA1B,CAA+B2B,IAA/B;AACD;AACDoI,UAAM8B,MAAN;AACD;;AAED,WAASF,qBAAT,GAAgC;AAC9BJ,gBACGO,SADH,CACa,GADb,EAEGC,MAFH;;AAIA,QAAIC,iBAAiBT,YAClBO,SADkB,CACR,GADQ,EAElBxI,IAFkB,CAEbmH,WAAWE,MAFE,CAArB;;AAIAqB,mBAAeC,KAAf,GACKrD,MADL,CACY,GADZ,EAEKyC,IAFL,CAEU,WAFV,EAEuB,UAASa,EAAT,EAAa9L,CAAb,EAAe;AAChC,aAAO,kBAAmB,KAAKA,CAAxB,GAA6B,GAApC;AACD,KAJL,EAKGiL,IALH,CAKQ,SALR,EAKmB,UAAUa,EAAV,EAAc;AAAE,aAAOA,EAAP;AAAY,KAL/C,EAMGZ,KANH,CAMS,SANT,EAMoB,UAASY,EAAT,EAAY;AAC5B,UAAIC,WAAW1B,WAAWC,MAAX,CAAkB5H,OAAlB,CAA0BoJ,EAA1B,CAAf;AACA,aAAOC,WAAW,CAAX,GAAe,CAAf,GAAmB,GAA1B;AACD,KATH,EAUG1M,IAVH,CAUQ,UAAUyM,EAAV,EAAc;AAClBf,MAAA,qBAAAA,CAAGC,MAAH,CAAU,IAAV,EACGxC,MADH,CACU,MADV,EAEGyC,IAFH,CAEQ;AACJ,qBAAa,EADT;AAEJ,0BAAkB,MAFd;AAGJ,aAAK,EAHD;AAIJ,aAAK;AAJD,OAFR,EAQGe,IARH,CAQQF,EARR,EASGE,IATH,CASQ,UAASF,EAAT,EAAY;AAChB,YAAI,qBAAAf,CAAGC,MAAH,CAAU,IAAV,EAAgBiB,IAAhB,GAAuBC,OAAvB,GAAiCC,KAAjC,GAAyC,GAA7C,EAAkD;AAChD,iBAAOL,GAAGnM,MAAH,IAAa,EAAb,GAAkBmM,EAAlB,GAAuBA,GAAGhL,SAAH,CAAa,CAAb,EAAgB,EAAhB,IAAsB,KAApD;AACD,SAFD,MAGK;AACH,iBAAOgL,EAAP;AACD;AACF,OAhBH;AAiBAf,MAAA,qBAAAA,CAAGC,MAAH,CAAU,IAAV,EACGxC,MADH,CACU,MADV,EAEGyC,IAFH,CAEQ;AACJ,kBAAU,EADN;AAEJ,iBAAS,GAFL;AAGJ,aAAK,CAHD;AAIJ,aAAK;AAJD,OAFR,EAQGC,KARH,CAQS;AACL,kBAAU,SADL;AAEL,wBAAgB;AAFX,OART;AAYAH,MAAA,qBAAAA,CAAGC,MAAH,CAAU,IAAV,EACGxC,MADH,CACU,MADV,EAEGyC,IAFH,CAEQ;AACJ,gBAAQtB,MAAMyC,KAAN,CAAYN,EAAZ,CADJ;AAEJ,kBAAU,EAFN;AAGJ,0BAAkB,MAHd;AAIJ,cAAM,CAJF;AAKJ,cAAM,CALF;AAMJ,iBAAS,EANL;AAOJ,aAAK,CAPD;AAQJ,aAAK;AARD,OAFR;AAYD,KApDH,EAqDGO,EArDH,CAqDM,WArDN,EAqDmB,UAAUP,EAAV,EAAc9L,CAAd,EAAiB;AAC9B2J,YAAM2C,KAAN,CAAYR,EAAZ;AACA;AACA,UAAIA,GAAGnM,MAAH,GAAY,EAAhB,EAAoB;AAClBoL,QAAA,qBAAAA,CAAGC,MAAH,CAAUhB,OAAV,EACGxB,MADH,CACU,KADV,EAEGyC,IAFH,CAEQ,OAFR,EAEiB,8BAFjB,EAGGC,KAHH,CAGS;AACL,uBAAa,KADR;AAEL,mBAAS,CAACd,WAAD,GAAe,IAFnB;AAGL,iBAAQ,IAAI,CAACpK,IAAE,CAAH,IAAQ,EAAb,GAAmB;AAHrB,SAHT,EAQGU,IARH,CAQQoL,EARR,EASGtD,MATH,CASU,KATV,EAUKyC,IAVL,CAUU,OAVV,EAUmB,sCAVnB;AAWD;AACJ,KArEH,EAsEGoB,EAtEH,CAsEM,UAtEN,EAsEkB,UAAUP,EAAV,EAAc;AAC5BnC,YAAM4C,MAAN;AACA;AACAxB,MAAA,qBAAAA,CAAGC,MAAH,CAAUzJ,KAAK0I,EAAL,GAAUC,aAAV,CAAwB,MAAM3I,KAAK4I,KAAL,EAAN,GAAqB,0CAA7C,CAAV,EACGwB,MADH;AAED,KA3EH,EA4EGU,EA5EH,CA4EM,OA5EN,EA4Ee,UAAUP,EAAV,EAAc;AACzBf,MAAA,qBAAAA,CAAGC,MAAH,CAAU,IAAV,EAAgBE,KAAhB,CAAsB,SAAtB,EAAiC,YAAU;AACzC,YAAIa,WAAW1B,WAAWC,MAAX,CAAkB5H,OAAlB,CAA0BoJ,EAA1B,CAAf;AACA,YAAIC,WAAW,CAAf,EAAkB;AAChB1B,qBAAWC,MAAX,CAAkBlJ,IAAlB,CAAuB0K,EAAvB;AACA,iBAAO,GAAP;AACD,SAHD,MAIK;AACHzB,qBAAWC,MAAX,CAAkB3H,MAAlB,CAAyBoJ,QAAzB,EAAmC,CAAnC;AACA,iBAAO,CAAP;AACD;AACF,OAVD;AAWApC,YAAM6C,MAAN,CAAaV,EAAb;AACD,KAzFH;;AA2FAF,mBAAea,IAAf,GAAsBd,MAAtB;AACD;;AAED,WAASH,yBAAT,GAAoC;AAClCH,eACGK,SADH,CACa,GADb,EAEGC,MAFH;;AAIAN,eACKK,SADL,CACe,GADf,EAEKxI,IAFL,CAEU,CACJ,EAAEwJ,WAAW,SAAb,EAAwBC,QAAQ,sBAAhC,EADI,EAEJ,EAAED,WAAW,SAAb,EAAwBC,QAAQ,qBAAhC,EAFI,CAFV,EAMKd,KANL,GAOKrD,MAPL,CAOY,GAPZ,EAQKyC,IARL,CAQU,WARV,EAQuB,UAASa,EAAT,EAAa9L,CAAb,EAAe;AAChC,aAAO,eAAgBA,IAAI,EAApB,GAA0B,MAAjC;AACD,KAVL,EAWKX,IAXL,CAWU,UAASyM,EAAT,EAAY;AAChBf,MAAA,qBAAAA,CAAGC,MAAH,CAAU,IAAV,EACGxC,MADH,CACU,MADV,EAEGyC,IAFH,CAEQ,GAFR,EAEa,UAAS2B,CAAT,EAAW;AACpB,eAAOA,EAAED,MAAT;AACD,OAJH,EAKGzB,KALH,CAKS;AACL,kBAAU,SADL;AAEL,gBAAQ,SAFH;AAGL,kBAAU;AAHL,OALT,EAUGmB,EAVH,CAUM,WAVN,EAUmB,UAAUP,EAAV,EAAc;AAC7Bf,QAAA,qBAAAA,CAAGC,MAAH,CAAU,IAAV,EAAgBE,KAAhB,CAAsB,MAAtB,EAA8B,SAA9B;AACD,OAZH,EAaGmB,EAbH,CAaM,UAbN,EAakB,UAAUP,EAAV,EAAc;AAC5Bf,QAAA,qBAAAA,CAAGC,MAAH,CAAU,IAAV,EAAgBE,KAAhB,CAAsB,MAAtB,EAA8B,SAA9B;AACD,OAfH,EAgBGmB,EAhBH,CAgBM,OAhBN,EAgBe,UAAUO,CAAV,EAAa;AACxB,YAAIA,EAAEF,SAAF,KAAgB,SAApB,EAA+B;AAC7B,cAAIrC,WAAWG,QAAX,GAAsBH,WAAWI,KAAjC,GAAyCJ,WAAWO,KAAxD,EAA+D;AAC7DP,uBAAWG,QAAX,GAAsBH,WAAWG,QAAX,GAAsBH,WAAWI,KAAvD;AACD;AACF,SAJD,MAKK;AACH,cAAIJ,WAAWG,QAAX,GAAsBH,WAAWI,KAAjC,IAA0C,CAA9C,EAAiD;AAC/CJ,uBAAWG,QAAX,GAAsBH,WAAWG,QAAX,GAAsBH,WAAWI,KAAvD;AACD;AACF;AACDa;AACAuB;AACD,OA7BH;AA8BD,KA1CL;AA2CD;;AAED,WAASA,iBAAT,GAA6B;AAC3B,QAAIC,SAAJ;AACA,QAAIC,SAASD,SAAT,IAAsBC,SAASD,SAAT,CAAmBE,KAA7C,EAAoD;AAClDF,kBAAYC,SAASD,SAArB;AACAA,gBAAUE,KAAV;AACD,KAHD,MAIK,IAAIC,OAAOC,YAAX,EAAyB;AAC5BJ,kBAAYG,OAAOC,YAAP,EAAZ;AACAJ,gBAAUK,eAAV;AACD;AACF;AACF,C;;;;;ACxOD;;AAEA,qDAAe,UAAUP,CAAV,EAAaQ,kBAAb,EAAiCC,kBAAjC,EAAqDjB,KAArD,EAA4D;AACzE,MAAIkB,OAAJ,EACI1I,IADJ,EAEI2I,UAFJ,EAGIvB,IAHJ,EAIIwB,KAJJ,EAKIC,WALJ,EAMIvL,KANJ,EAOIwL,WAPJ;;AASA;AACAH,eAAa,KAAKI,MAAL,CAAYC,mBAAZ,IAAmC,UAAUhJ,IAAV,EAAgB;AAAE,WAAOA,IAAP;AAAc,GAAhF;AACA6I,gBAAc,KAAKE,MAAL,CAAYE,oBAAZ,IAAoCT,kBAAlD;AACAM,gBAAc,KAAKC,MAAL,CAAYG,oBAAZ,IAAoCT,kBAAlD;;AAEA;AACA,OAAK,IAAIrN,IAAI,CAAb,EAAgBA,IAAI4M,EAAEjN,MAAtB,EAA8BK,GAA9B,EAAmC;AACjC,QAAI,EAAG4M,EAAE5M,CAAF,MAAS4M,EAAE5M,CAAF,EAAKkC,KAAL,IAAc0K,EAAE5M,CAAF,EAAKkC,KAAL,KAAe,CAAtC,CAAH,CAAJ,EAAkD;AAAE;AAAW;AAC/D,QAAI,CAAE8J,IAAN,EAAY;AACVwB,cAAQC,cAAcA,YAAYb,EAAE5M,CAAF,EAAKmG,CAAjB,CAAd,GAAoCyG,EAAE5M,CAAF,EAAKmG,CAAjD;AACA6F,aAAO,mBAAmB,KAAK+B,KAAL,CAAWC,OAA9B,GAAwC,IAAxC,IAAgDR,SAASA,UAAU,CAAnB,GAAuB,yBAAyB,yCAAApN,CAAWoN,KAAX,CAAzB,GAA6C,YAApE,GAAmF,EAAnI,CAAP;AACD;AACD5I,WAAO2I,WAAWX,EAAE5M,CAAF,EAAK4E,IAAhB,CAAP;AACA1C,YAAQwL,YAAYd,EAAE5M,CAAF,EAAKkC,KAAjB,EAAwB0K,EAAE5M,CAAF,EAAKiO,KAA7B,EAAoCrB,EAAE5M,CAAF,EAAK8L,EAAzC,EAA6Cc,EAAE5M,CAAF,EAAKW,KAAlD,CAAR;AACA2M,cAAU,KAAKY,UAAL,GAAkB,KAAKA,UAAL,CAAgBtB,EAAE5M,CAAF,EAAKkC,KAArB,CAAlB,GAAgDkK,MAAMQ,EAAE5M,CAAF,EAAK8L,EAAX,CAA1D;AACA,QAAI5J,KAAJ,EAAW;AACT8J,cAAQ,gBAAgB,KAAK+B,KAAL,CAAWI,WAA3B,GAAyC,GAAzC,GAA+CvB,EAAE5M,CAAF,EAAK8L,EAApD,GAAyD,IAAjE;AACAE,cAAU,oDAAoDsB,OAApD,GAA8D,WAA9D,GAA4E,yCAAAlN,CAAWwE,IAAX,CAA5E,GAA+F,OAAzG;AACAoH,cAAU,uBAAuB,yCAAA5L,CAAW8B,KAAX,CAAvB,GAA2C,OAArD;AACA8J,cAAQ,OAAR;AACD;AACF;AACD,SAAOA,OAAO,UAAd;AACD,C;;ACnCD;;AAEA,4CAAe;AACboC,UAAQ,gBAASpC,IAAT,EAAc;AACpB,QAAIqC,QAAQtB,SAASuB,aAAT,CAAuB,KAAvB,CAAZ;AACA,QAAIC,QAAQxB,SAASuB,aAAT,CAAuB,KAAvB,CAAZ;AACA,QAAIE,MAAMzB,SAASuB,aAAT,CAAuB,MAAvB,CAAV;AACA,QAAIG,SAAS,KAAKA,MAAL,MAAiB,GAA9B;;AAEA,QAAIC,iBAAiB3B,SAASuB,aAAT,CAAuB,KAAvB,CAArB;AACA,QAAIK,iBAAiB5B,SAASuB,aAAT,CAAuB,KAAvB,CAArB;;AAEAD,UAAMO,SAAN,GAAkB,KAAKzE,KAAL,EAAlB;AACAoE,UAAMK,SAAN,GAAkB,KAAKzE,KAAL,KAAe,UAAjC;AACAoE,UAAMrD,KAAN,CAAYiB,KAAZ,GAAoB,KAAKA,KAAL,KAAe,IAAnC;;AAEA;AACAuC,mBAAeE,SAAf,GAA2B,KAAKzE,KAAL,KAAe,QAA1C;AACAuE,mBAAeG,SAAf,GAA2B,yCAAAzO,CAAW,KAAKoN,KAAL,MAAgB,EAA3B,CAA3B;AACAmB,mBAAeC,SAAf,GAA2B,KAAKzE,KAAL,KAAe,QAA1C;AACAwE,mBAAeE,SAAf,GAA2B,yCAAAzO,CAAW,KAAK0O,KAAL,MAAgB,EAA3B,CAA3B;;AAEAN,QAAIK,SAAJ,GAAgB,yCAAAzO,CAAW4L,IAAX,KAAoB,EAApC;AACAuC,UAAMQ,WAAN,CAAkBP,GAAlB;AACAH,UAAMU,WAAN,CAAkBL,cAAlB;AACAL,UAAMU,WAAN,CAAkBR,KAAlB;AACAF,UAAMU,WAAN,CAAkBJ,cAAlB;;AAEA,SAAK1E,EAAL,GAAU4E,SAAV,GAAsB,EAAtB;AACA,SAAK5E,EAAL,GAAU8E,WAAV,CAAsBV,KAAtB;;AAEA,QAAIW,oBAAoBP,SAASC,eAAe/D,YAAxB,GAAuCgE,eAAehE,YAA9E;AACA4D,UAAMrD,KAAN,CAAYuD,MAAZ,GAAqBO,oBAAoB,IAAzC;AACAT,UAAMrD,KAAN,CAAY+D,UAAZ,GAA0BD,oBAAoB,CAApB,GAAwB,EAAzB,GAA+B,IAAxD;AACD,GAhCY;AAiCbE,UAAQ,kBAAU;AAChB;AACA,SAAKd,MAAL;AACD,GApCY;AAqCbe,WAAS,mBAAU;AACjB;AACD;AAvCY,CAAf,E;;ACFO,SAASC,YAAT,CAAsB9N,KAAtB,EAA6B;AAClC;AACA,MAAIA,QAAQ+N,OAAO/N,KAAP,CAAZ;AAAA,MACIgO,QAAQhO,MAAMiO,WAAN,CAAkB,CAAlB,CADZ;AAAA,MAEIC,SAAS,EAFb;AAAA,MAGIC,WAAW,CAAC,EAAD,EAAK,GAAL,EAAU,GAAV,EAAe,GAAf,EAAoB,GAApB,CAHf;;AAKA,MAAIJ,OAAOC,KAAP,KAAiBhO,KAAjB,IAA0Bc,OAAOd,KAAP,EAAc3B,MAAd,IAAwB,CAAtD,EAAyD;AACvD,WAAOyC,OAAOd,KAAP,CAAP;AACD;;AAED,MAAI+C,KAAK8E,GAAL,CAAS7H,KAAT,KAAmB,gBAAvB,EAAyC;AACvC,WAAOgO,KAAP;AACD;;AAED,MAAIhO,SAAS,CAAT,IAAcA,SAAS,CAAC,CAA5B,EAA+B;AAC7B,QAAIA,QAAQ,CAAZ,EAAc;AACZ;AACAA,cAAQ,CAACA,KAAT;AACAkO,eAAS,GAAT;AACD;AACD,WAAOA,SAASE,QAAQpO,KAAR,EAAe,CAAf,CAAhB;AACD,GAPD,MAQK;AACH,WAAOA,MAAMiO,WAAN,CAAkB,CAAlB,CAAP;AACD;;AAED,WAASG,OAAT,CAAiBpO,KAAjB,EAAwBqO,SAAxB,EAAmC;AACjC,QAAIrO,QAAQc,OAAOd,KAAP,CAAZ;AACA,QAAIsO,QAAQtO,MAAMsO,KAAN,CAAY,GAAZ,CAAZ;AACA;AACA,QAAIA,MAAMjQ,MAAN,GAAe,CAAnB,EAAsB;AACpB;AACA2B,cAAQsO,MAAM,CAAN,CAAR;AACA,UAAIC,MAAMD,MAAM,CAAN,CAAV;AACA;AACA,UAAItO,MAAM3B,MAAN,IAAgB,CAAhB,IAAqBkQ,IAAIlQ,MAAJ,GAAa,CAAtC,EAAyC;AACvC;AACA,YAAIkQ,IAAIlQ,MAAJ,GAAa,CAAjB,EAAoB;AAClB2B,kBAAQA,QAAQ,GAAR,GAAcuO,IAAI/K,MAAJ,CAAW,CAAX,CAAtB;AACD;AACD;AAHA,aAIK;AACHxD,qBAAS,GAAT;AACD;AACF,OATD,MAUK,IAAIA,MAAM3B,MAAN,IAAgB,CAAhB,IAAqBkQ,IAAIlQ,MAAJ,GAAa,CAAtC,EAAyC;AAC5C2B,gBAAQA,QAAQ,GAAR,GAAcuO,IAAI/K,MAAJ,CAAW,CAAX,CAAtB;AACA;AACA,YAAI+K,IAAIlQ,MAAJ,GAAa,CAAjB,EAAoB;AAClB2B,mBAASuO,IAAI/K,MAAJ,CAAW,CAAX,CAAT;AACD;AACD;AAHA,aAIK;AACHxD,qBAAS,GAAT;AACD;AACF;AACF;AACD,QAAIwO,cAAcxO,MAAM3B,MAAxB;AACA;AACA,QAAI2B,MAAMsO,KAAN,CAAY,GAAZ,EAAiBjQ,MAAjB,GAA0B,CAA9B,EAAiC;AAC/BmQ;AACD;AACD,QAAIA,eAAe,CAAnB,EAAsB;AACpB,aAAO1N,OAAOd,KAAP,IAAgBmO,SAASE,SAAT,CAAvB;AACD,KAFD,MAGK;AACH,aAAOD,QAAQL,OAAO/N,KAAP,IAAgB,IAAxB,EAA8BqO,YAAY,CAA1C,CAAP;AACD;AACF;AACF,C;;ACtED;AACA;;2CAEe;AACbvB,UAAQ,kBAAU;AAChB,QAAIhC,QAAQ,KAAK2D,MAAL,GAAc,CAAd,CAAZ;AAAA,QACI5F,QAAQ,KAAKA,KAAL,EADZ;AAAA,QAEIqD,QAAQ,KAAKA,KAAL,EAFZ;AAAA,QAGItL,QAAQ,GAHZ;AAAA,QAIIuM,SAAS,KAAKA,MAAL,MAAiB,GAJ9B;AAAA,QAKItC,QAAQ,KAAKA,KAAL,EALZ;AAAA,QAMI6D,OAAO,KAAKC,YAAL,EANX;AAAA,QAOIvP,OAAO,EAPX;AAAA,QAQI8O,SAAS,EARb;AAAA,QASIU,SAAS,EATb;AAAA,QAUIC,YAVJ;AAAA,QAWIC,OAXJ;;AAaA,QAAI,OAAO,KAAKlN,IAAL,GAAY,CAAZ,EAAe,CAAf,CAAP,KAA6B,QAAjC,EAA2C;AACzChB,cAAQ,KAAKgB,IAAL,GAAY,CAAZ,EAAe,CAAf,CAAR;AACD;;AAEDiN,mBAAejO,KAAf;AACA,QAAK,CAAC,OAAO8N,KAAK,cAAL,CAAP,KAAgC,WAAhC,IAA+CA,KAAK,cAAL,MAAyB,IAAzE,KACA,CAAC/L,MAAMoM,SAASnO,KAAT,CAAN,CADN,EAC+B;AAC3BiO,qBAAe,YAAAf,CAAalN,KAAb,CAAf;AACH;;AAED,QAAI8N,KAAK,QAAL,CAAJ,EAAoB;AAClBR,eAAS,kBAAkBrF,KAAlB,GAA0B,kBAA1B,GAA+C6F,KAAK,QAAL,CAA/C,GAAgE,SAAzE;AACD;AACD,QAAIA,KAAK,QAAL,CAAJ,EAAoB;AAClBE,eAAS,kBAAkB/F,KAAlB,GAA0B,kBAA1B,GAA+C6F,KAAK,QAAL,CAA/C,GAAgE,SAAzE;AACD;;AAEDtP,YAAQ,iBAAiByJ,KAAjB,GAAyB,IAAjC;AACAzJ,YAAU,iBAAiByJ,KAAjB,GAAyB,oCAAzB,GAAgEiC,KAAhE,GAAwE,WAAxE,IAAuFD,QAAQA,QAAQ,IAAhB,GAAuB,MAA9G,IAAwH,YAAxH,GAAuI,yCAAA/L,CAAW8B,KAAX,CAAvI,GAA2J,IAArK;AACAxB,YAAY,kBAAkByJ,KAAlB,GAA0B,iBAA1B,GAA8CqF,MAA9C,GAAuD,yCAAApP,CAAW+P,YAAX,CAAvD,GAAkFD,MAAlF,GAA2F,SAAvG;AACA,QAAI1C,KAAJ,EAAW;AACT9M,cAAU,kBAAkByJ,KAAlB,GAA0B,iBAA1B,GAA8C,yCAAA/J,CAAWoN,KAAX,CAA9C,GAAkE,SAA5E;AACD;AACD9M,YAAU,QAAV;AACAA,YAAQ,QAAR;;AAEA,SAAKuJ,EAAL,GAAU4E,SAAV,GAAsBnO,IAAtB;AACA0P,cAAU,KAAKnG,EAAL,GAAUC,aAAV,CAAwB,MAAMC,KAAN,GAAc,eAAtC,CAAV;AACAiG,YAAQlF,KAAR,CAAc+D,UAAd,GAA4B,CAACR,SAAS,KAAKxE,EAAL,GAAUU,YAApB,IAAoC,CAArC,GAA0C,IAArE;AACA,SAAKV,EAAL,GAAUC,aAAV,CAAwB,MAAMC,KAAN,GAAc,SAAtC,EAAiDe,KAAjD,CAAuDuD,MAAvD,GAAgEA,SAAS,IAAzE;AACD,GA7CY;AA8CbS,UAAQ,kBAAU;AAChB;AACA,SAAKd,MAAL;AACD,GAjDY;AAkDbe,WAAS,mBAAU;AACjB;AACD;AApDY,CAAf,E;;ACHA;;AAEA,IAAMmB,WAAW;AACf7B,UAAQ7M,SADO;AAEfuK,SAAOvK,SAFQ;AAGf2O,gBAAc,IAHC;AAIfC,gBAAc;AAJC,CAAjB;;AAOA,SAASC,kBAAT,CAA4B5J,OAA5B,EAAqC6J,SAArC,EAAgDC,SAAhD,EAA2D;AACzD,MAAIjQ,OAAO,EAAX;AACA,OAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI6G,QAAQlH,MAA5B,EAAoCK,GAApC,EAAyC;AACvC,QAAIA,IAAI,CAAR,EAAW;AACTU,cAAU,MAAV;AACA,WAAK,IAAI0G,IAAI,CAAb,EAAgBA,IAAIP,QAAQ7G,CAAR,EAAWL,MAA/B,EAAuCyH,GAAvC,EAA4C;AAC1C1G,gBAAU,2BAA2B,KAAKgQ,UAAUtJ,CAAV,CAAhC,GAA+C,kBAA/C,GAAoEuJ,UAAUvJ,CAAV,CAApE,GAAmF,KAAnF,GAA2FP,QAAQ7G,CAAR,EAAWoH,CAAX,CAA3F,GAA2G,OAArH;AACD;AACD1G,cAAU,OAAV;AACD;AACF;AACD,SAAOA,IAAP;AACD;;AAED,0CAAe;AACb0N,UAAQ,kBAAU;AAChB,QAAIvH,UAAU,KAAK3D,IAAL,EAAd;AAAA,QACI+G,KAAK,KAAKA,EAAL,EADT;AAAA,QAEIwE,SAAS,CAAC,KAAKA,MAAL,MAAiB6B,SAAS7B,MAA3B,IAAqC,KAAKxE,EAAL,GAAUU,YAF5D;AAAA,QAGIR,QAAQ,KAAKA,KAAL,EAHZ;AAAA,QAIIgC,QAAQ,KAAKA,KAAL,MAAgBmE,SAASnE,KAJrC;;AAMA,QAAIzL,OAAO,EAAX;AAAA,QACIiQ,YAAY,IAAIjR,KAAJ,CAAUmH,QAAQ,CAAR,EAAWlH,MAArB,CADhB;AAAA,QAEI+Q,YAAY,IAAIhR,KAAJ,CAAUmH,QAAQ,CAAR,EAAWlH,MAArB,CAFhB;AAAA,QAGIiR,WAHJ;;AAKA,QAAIC,UAAUhK,QAAQlH,MAAR,KAAmB,CAAnB,IAAwBkH,QAAQ,CAAR,EAAWlH,MAAX,KAAsB,CAA5D;AACA,QAAIkR,OAAJ,EAAa;AACX,WAAKC,OAAL,CAAa,oBAAb;AACA;AACD;;AAED;AACAzR,IAAA,4BAAAA,CAAKwH,OAAL,EAAc,UAAS/E,GAAT,EAAa;AACzBzC,MAAA,4BAAAA,CAAKyC,GAAL,EAAU,UAASC,IAAT,EAAe/B,CAAf,EAAiB;AACzB,YAAI,CAAC0Q,UAAU1Q,CAAV,CAAL,EAAmB;AACjB0Q,oBAAU1Q,CAAV,IAAe,CAAf;AACD;AACD2Q,kBAAU3Q,CAAV,IAAgB,OAAO+B,IAAP,KAAgB,QAAjB,GAA6B,OAA7B,GAAuC,MAAtD;AACA2O,kBAAU1Q,CAAV,IAAgBoC,OAAOL,IAAP,EAAapC,MAAb,GAAsB+Q,UAAU1Q,CAAV,CAAvB,GAAuCoC,OAAOL,IAAP,EAAapC,MAApD,GAA6D+Q,UAAU1Q,CAAV,CAA5E;AACD,OAND;AAOD,KARD;;AAUA;AACAU,YAAQ,iBAAiByJ,KAAjB,GAAyB,yBAAzB,IAAoDsE,SAASA,SAAO,IAAhB,GAAuB,MAA3E,IAAmF,WAAnF,IAAgGtC,QAAQA,QAAM,IAAd,GAAqB,MAArH,IAA6H,KAArI;;AAEA;AACAzL,YAAU,mBAAmByJ,KAAnB,GAA2B,kBAArC;AACAzJ,YAAY,SAAZ;AACAA,YAAc,MAAd;AACA,SAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI6G,QAAQ,CAAR,EAAWlH,MAA/B,EAAuCK,GAAvC,EAA4C;AAC1CU,cAAc,uBAAuB,KAAKgQ,UAAU1Q,CAAV,CAA5B,GAA2C,kBAA3C,GAAgE2Q,UAAU3Q,CAAV,CAAhE,GAA+E,KAA/E,GAAuF6G,QAAQ,CAAR,EAAW7G,CAAX,CAAvF,GAAuG,OAArH;AACD;AACDU,YAAc,OAAd;AACAA,YAAY,UAAZ;AACA;AACAA,YAAY,SAAZ;AACAA,YAAY+P,mBAAmBM,IAAnB,CAAwB,IAAxB,EAA8BlK,OAA9B,EAAuC6J,SAAvC,EAAkDC,SAAlD,GAAZ;AACAjQ,YAAY,UAAZ;AACAA,YAAU,UAAV;;AAEA;AACAA,YAAU,mBAAmByJ,KAAnB,GAA2B,uBAArC;AACAzJ,YAAY,SAAZ;AACAA,YAAc,MAAd;AACA,SAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI6G,QAAQ,CAAR,EAAWlH,MAA/B,EAAuCK,GAAvC,EAA4C;AAC1CU,cAAc,2BAA2B,KAAKgQ,UAAU1Q,CAAV,CAAhC,GAA+C,kBAA/C,GAAoE2Q,UAAU3Q,CAAV,CAApE,GAAmF,KAAnF,GAA2F6G,QAAQ,CAAR,EAAW7G,CAAX,CAA3F,GAA2G,OAAzH;AACD;AACDU,YAAc,OAAd;AACAA,YAAY,UAAZ;AACAA,YAAU,UAAV;;AAEA;AACAA,YAAQ,QAAR;;AAEA;AACAuJ,OAAGC,aAAH,CAAiB,MAAMC,KAAN,GAAc,YAA/B,EAA6C0E,SAA7C,GAAyDnO,IAAzD;;AAEAkQ,kBAAc3G,GAAGC,aAAH,CAAiB,MAAMC,KAAN,GAAc,qBAA/B,CAAd;AACAF,OAAGC,aAAH,CAAiB,MAAMC,KAAN,GAAc,QAA/B,EAAyC6G,QAAzC,GAAoD,UAASC,CAAT,EAAW;AAC7DL,kBAAY1F,KAAZ,CAAkBgG,GAAlB,GAAwBD,EAAElR,MAAF,CAASoR,SAAT,GAAqB,IAA7C;AACD,KAFD;AAGD,GArEY;AAsEbjC,UAAQ,kBAAU;AAChB;AACA,SAAKd,MAAL;AACD,GAzEY;AA0Ebe,WAAS,mBAAU;AACjB,QAAIlF,KAAK,KAAKA,EAAL,GAAUC,aAAV,CAAwB,MAAM,KAAKC,KAAL,EAAN,GAAqB,QAA7C,CAAT;AACA,QAAIF,MAAMA,GAAG+G,QAAb,EAAuB;AACrB/G,SAAG+G,QAAH,GAAcpP,SAAd;AACD;AACF;AA/EY,CAAf,E;;ACvBA,4CAAe;AACbwM,UAAQ,kBAAU;AAChB,QAAI1N,OAAO,EAAX;AAAA,QACI0Q,YAAY,KAAKxH,IAAL,CAAUC,UAAV,CAAqBwH,OAArB,GAA+B,EAD/C;AAAA,QAEI5C,SAAS,KAAKA,MAAL,MAAiB,EAF9B;AAAA,QAGI6C,gBAAgB,CAAC7C,SAAS,EAAV,IAAgB,CAHpC;AAAA,QAII8C,WAAW,CAAC,QAAD,EAAW,KAAX,EAAkB,IAAlB,EAAwB,GAAxB,CAJf;AAAA,QAKIC,SAAS,KAAK5H,IAAL,CAAUC,UAAV,CAAqB2H,MAArB,GAA8B,CAL3C;AAAA,QAMIH,OANJ;;AAQA;AACA3Q,YAAQ,iBAAiB,KAAKyJ,KAAL,EAAjB,GAAgC,IAAxC;AACAzJ,YAAU,wDAAwD+N,MAAxD,GAAiE,mBAAjE,GAAuF6C,aAAvF,GAAuG,OAAjH;AACA5Q,YAAY,4CAAZ;AACAA,YAAU,QAAV;AACAA,YAAQ,QAAR;AACA,SAAKuJ,EAAL,GAAU4E,SAAV,GAAsBnO,IAAtB;;AAEA2Q,cAAU,KAAKpH,EAAL,GAAUC,aAAV,CAAwB,yBAAxB,CAAV;AACA,QAAImH,QAAQnG,KAAR,CAAcuG,aAAd,KAAgC7P,SAApC,EAA+C;AAC7C4P,eAAS,CAAT;AACAJ,gBAAUtJ,QAAV,GAAqB4J,YAAY,YAAU;AACzCF,iBAAUA,WAAW,GAAZ,GAAmB,CAAnB,GAAuBA,SAAS,EAAzC;AACA,aAAK,IAAIxR,IAAI,CAAb,EAAgBA,IAAIuR,SAAS5R,MAA7B,EAAqCK,GAArC,EAA0C;AACxCqR,kBAAQnG,KAAR,CAAcqG,SAASvR,CAAT,CAAd,IAA6B,YAAYoR,UAAUI,MAAtB,GAA+B,MAA5D;AACD;AACF,OALoB,EAKlB,EALkB,CAArB;AAMD;AACF,GA5BY;AA6BbtC,UAAQ,kBAAU;AAChB;AACA,SAAKd,MAAL;AACD,GAhCY;AAiCbe,WAAS,mBAAU;AACjB,QAAI,KAAKvF,IAAL,CAAUC,UAAV,CAAqBwH,OAAzB,EAAkC;AAChC,UAAI,KAAKzH,IAAL,CAAUC,UAAV,CAAqBwH,OAArB,CAA6BvJ,QAAjC,EAA2C;AACzC6J,sBAAc,KAAK/H,IAAL,CAAUC,UAAV,CAAqBwH,OAArB,CAA6BvJ,QAA3C;AACD;AACD,WAAK8B,IAAL,CAAUC,UAAV,CAAqBwH,OAArB,CAA6BG,MAA7B,GAAsC,CAAtC;AACA,UAAI;AACF,eAAO,KAAK5H,IAAL,CAAUC,UAAV,CAAqBwH,OAA5B;AACD,OAFD,CAGA,OAAOJ,CAAP,EAAU;AACR,aAAKrH,IAAL,CAAUC,UAAV,CAAqBwH,OAArB,GAA+BzP,SAA/B;AACD;AACF;AACD,SAAKqI,EAAL,GAAU4E,SAAV,GAAsB,EAAtB;AACD;AA/CY,CAAf,E;;ACAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,IAAM+C,QAAQ;AACZd,WAAA,OADY;AAEZjJ,UAAA,MAFY;AAGZgK,SAAA,KAHY;AAIZR,WAAA,OAAAA;AAJY,CAAd;;AAOA,yEAAe,UAAS/K,GAAT,EAAc;AAC3B,MAAIwL,KAAJ,EAAWC,KAAX;AACAC,qBAAmB,YAAU;AAC3B,QAAIF,KAAJ,EAAW;AACTG,mBAAaH,KAAb;AACD;AACDC,YAASzL,IAAI4L,OAAJ,CAAYvS,MAAZ,GAAqB,EAAtB,GAA4B,IAA5B,GAAmC,GAA3C;AACAmS,YAAQK,WAAW,YAAU;AAC3B9S,MAAA,4BAAAA,CAAKiH,IAAI4L,OAAT,EAAkB,UAASvI,KAAT,EAAe;AAC/B,YAAIA,MAAMC,IAAN,CAAWC,UAAX,CAAsBC,EAA1B,EAA8B;AAC5BH,gBAAMC,IAAN,CAAWC,UAAX,CAAsBC,EAAtB,CAAyB2B,MAAzB;AACD;AACF,OAJD;AAKD,KANO,EAMLsG,KANK,CAAR;AAOD,GAZD;;AAcAK;AACA,SAAOR,KAAP;AACD;;AAED,SAASQ,QAAT,GAAmB;AACjB,MAAIC,UAAU;AACZ;AACA,QAFY,EAGZ,aAHY,EAIZ,WAJY,EAKZ,KALY,EAMZ,OANY,EAOZ,OAPY,EAQZ,MARY,EASZ,KATY,EAUZ,MAVY,EAWZ,QAXY;;AAaZ;AACA,mBAdY,EAeZ,wBAfY,EAgBZ,sBAhBY,EAiBZ,gBAjBY,EAkBZ,iBAlBY,EAmBZ,iBAnBY,EAoBZ,mBApBY,CAAd;;AAuBA,WAASC,iBAAT,GAA4B;AAC1B,QAAIC,eAAJ,EACIC,gBADJ,EAEIjM,OAFJ;;AAIAgM,sBAAkB;AAChBE,YAAM,EADU;AAEhBrG,aAAO,EAFS;AAGhBlJ,YAAM;AACJwP,eAAO;AADH,OAHU;AAMhBC,cAAQ;AACNnI,kBAAU,OADJ;AAENoI,cAAM;AAFA,OANQ;AAUhBC,eAAS,EAVO;AAWhBC,aAAO;AACLxG,eAAO;AACLyG,kBAAQ;AACNC,qBAAS;AADH;AADH,SADF;AAMLC,WAAG,CANE;AAOLL,cAAM;AAPD,OAXS;AAoBhB5E,eAAS,EApBO;AAqBhBkF,kBAAY;AACVC,kBAAU;AADA;AArBI,KAAlB;;AA0BAX,uBAAmB;AACjBY,cAAQ,KAAKnJ,EAAL,GAAUC,aAAV,CAAwB,MAAM,KAAKC,KAAL,EAAN,GAAqB,YAA7C,CADS;AAEjBiC,aAAO;AACLiH,iBAAS,KAAKtD,MAAL;AADJ,OAFU;AAKjB7M,YAAM;AACJ6M,gBAAQ,gCAAAjQ,CAAO,EAAP,EAAW,KAAKwT,YAAL,EAAX,CADJ;AAEJvJ,iBAAS,EAFL;AAGJpD,cAAM,KAAKA,IAAL,GAAY1F,OAAZ,CAAoB,aAApB,EAAmC,EAAnC;AAHF,OALW;AAUjBsS,YAAM;AACJ9E,gBAAQ,KAAKA,MAAL,KAAgB,KAAKA,MAAL,KAAgB,KAAKxE,EAAL,GAAUU,YAA1C,GAAyD,GAD7D;AAEJwB,eAAO,KAAKA,KAAL;AAFH,OAVW;AAcjB6B,eAAS;AAdQ,KAAnB;;AAiBA;AACAzH,cAAU,UAAAwC,CAAW,EAAX,EAAewJ,eAAf,EAAgC,KAAKtC,YAAL,EAAhC,CAAV;;AAEA;AACA1J,cAAU,UAAAwC,CAAWxC,OAAX,EAAoBiM,gBAApB,CAAV;AACAjM,YAAQ6F,KAAR,CAAciH,OAAd,GAAwBb,iBAAiBpG,KAAjB,CAAuBiH,OAA/C;AACA9M,YAAQrD,IAAR,CAAa6M,MAAb,GAAsByC,iBAAiBtP,IAAjB,CAAsB6M,MAA5C;AACAxJ,YAAQrD,IAAR,CAAa6G,OAAb,GAAuByI,iBAAiBtP,IAAjB,CAAsB6G,OAA7C;;AAEA,WAAOxD,OAAP;AACD;;AAEDlH,EAAA,4BAAAA,CAAKgT,OAAL,EAAc,UAAS1L,IAAT,EAAehG,KAAf,EAAsB;AAClCiR,UAAMjL,IAAN,IAAc;AACZyH,cAAQ,kBAAU;AAChB,YAAI7H,UAAU+L,kBAAkB1S,IAAlB,CAAuB,IAAvB,CAAd;;AAEA,YAAI,KAAKsD,IAAL,GAAY,CAAZ,EAAevD,MAAf,KAA0B,CAA1B,IAA+B,KAAKuD,IAAL,GAAYvD,MAAZ,KAAuB,CAA1D,EAA6D;AAC3D,eAAKmR,OAAL,CAAa,oBAAb;AACA;AACD;;AAED,YAAInK,SAAS,OAAb,EAAsB;AACpB;AACAJ,kBAAQoM,MAAR,CAAenI,QAAf,GAA0B,QAA1B;AACAjE,kBAAQrD,IAAR,CAAa6G,OAAb,GAAuB,CAAC,CACtB,KAAKyD,KAAL,MAAgB,KAAKtK,IAAL,GAAY,CAAZ,EAAe,CAAf,CADM,EAEtB,KAAKA,IAAL,GAAY,CAAZ,EAAe,CAAf,CAFsB,CAAD,CAAvB;AAID,SAPD,MAQK,IAAIyD,SAAS,KAAT,IAAkBA,SAAS,OAA/B,EAAwC;AAC3CJ,kBAAQrD,IAAR,CAAa6G,OAAb,GAAuB,KAAK7G,IAAL,GAAYxB,KAAZ,CAAkB,CAAlB,CAAvB;AACD,SAFI,MAGA;;AAEH;AACA,cAAIiF,KAAKjE,OAAL,CAAa,aAAb,IAA8B,CAAC,CAAnC,EAAsC;AACpC6D,oBAAQkM,IAAR,CAAae,OAAb,GAAuB7M,KAAKjE,OAAL,CAAa,aAAb,IAA8B,CAAC,CAAtD;AACD;;AAED,cAAI,6CAAAmI,CAAa,KAAK3H,IAAL,GAAY,CAAZ,EAAe,CAAf,CAAb,CAAJ,EAAqC;AACnC;AACAqD,oBAAQkM,IAAR,CAAatM,CAAb,GAAiBI,QAAQkM,IAAR,CAAatM,CAAb,IAAkB,EAAnC;AACAI,oBAAQkM,IAAR,CAAatM,CAAb,CAAeQ,IAAf,GAAsB,YAAtB;AACAJ,oBAAQkM,IAAR,CAAatM,CAAb,CAAesN,IAAf,GAAsBlN,QAAQkM,IAAR,CAAatM,CAAb,CAAesN,IAAf,IAAuB;AAC3CC,sBAAQ,KAAKC,UAAL,MAAqB,mBAAAC,CAAoB,KAAK1Q,IAAL,GAAY,CAAZ,EAAe,CAAf,CAApB,EAAuC,KAAKA,IAAL,GAAY,CAAZ,IAAiB,KAAKA,IAAL,GAAY,CAAZ,EAAe,CAAf,CAAjB,GAAqC,KAAKA,IAAL,GAAY,CAAZ,EAAe,CAAf,CAA5E,CADc;AAE3C2Q,uBAAS,EAAEvP,KAAK,CAAP;AAFkC,aAA7C;;AAKAiC,oBAAQrD,IAAR,CAAa6G,OAAb,CAAqB,CAArB,IAA0B,EAA1B;AACA1K,YAAA,4BAAAA,CAAK,KAAKwH,OAAL,CAAatE,YAAb,CAA0B,CAA1B,CAAL,EAAmC,UAASR,IAAT,EAAe/B,CAAf,EAAiB;AAClD,kBAAIA,IAAI,CAAR,EAAW;AACT+B,uBAAO,IAAIqH,IAAJ,CAASrH,IAAT,CAAP;AACD;AACDwE,sBAAQrD,IAAR,CAAa6G,OAAb,CAAqB,CAArB,EAAwB/J,CAAxB,IAA6B+B,IAA7B;AACD,aALD;AAMAwE,oBAAQrD,IAAR,CAAa6G,OAAb,CAAqB,CAArB,EAAwB,CAAxB,IAA6B,GAA7B;AACAxD,oBAAQrD,IAAR,CAAaiD,CAAb,GAAiB,GAAjB;AACA,gBAAI,KAAK2N,OAAL,MAAkB,KAAK5Q,IAAL,GAAY,CAAZ,EAAevD,MAAf,GAAwB,CAA9C,EAAiD;AAC/C4G,sBAAQrD,IAAR,CAAa6Q,MAAb,GAAsB,CAAE,KAAKlN,OAAL,CAAatD,SAAb,CAAuB,CAAvB,EAA0B7B,KAA1B,CAAgC,CAAhC,CAAF,CAAtB;AACD;AACF,WArBD,MAsBK;AACH;AACA6E,oBAAQkM,IAAR,CAAatM,CAAb,GAAiBI,QAAQkM,IAAR,CAAatM,CAAb,IAAkB,EAAnC;AACAI,oBAAQkM,IAAR,CAAatM,CAAb,CAAeQ,IAAf,GAAsB,UAAtB;AACAJ,oBAAQkM,IAAR,CAAatM,CAAb,CAAe6N,UAAf,GAA4B,KAAKnN,OAAL,CAAatE,YAAb,CAA0B,CAA1B,EAA6Bb,KAA7B,CAAmC,CAAnC,CAA5B;AACA,gBAAI,KAAKoS,OAAL,MAAkB,KAAK5Q,IAAL,GAAY,CAAZ,EAAevD,MAAf,GAAwB,CAA9C,EAAiD;AAC/C4G,sBAAQrD,IAAR,CAAa6Q,MAAb,GAAsB,CAAE,KAAKlN,OAAL,CAAatD,SAAb,CAAuB,CAAvB,EAA0B7B,KAA1B,CAAgC,CAAhC,CAAF,CAAtB;AACD;AACF;;AAED,cAAI,KAAKwB,IAAL,GAAY,CAAZ,EAAevD,MAAf,KAA0B,CAA9B,EAAiC;AAC/B4G,oBAAQoM,MAAR,CAAeC,IAAf,GAAsB,KAAtB;AACD;;AAEDvT,UAAA,4BAAAA,CAAK,KAAK6D,IAAL,GAAY,CAAZ,CAAL,EAAqB,UAASnB,IAAT,EAAe/B,CAAf,EAAiB;AACpC,gBAAIA,IAAI,CAAR,EAAW;AACTuG,sBAAQrD,IAAR,CAAa6G,OAAb,CAAqB3I,IAArB,CAA0B,KAAKyF,OAAL,CAAatE,YAAb,CAA0BvC,CAA1B,CAA1B;AACD;AACF,WAJoB,CAInB+Q,IAJmB,CAId,IAJc,CAArB;AAMD;;AAED,YAAIxK,QAAQoM,MAAR,CAAeC,IAAf,KAAwB,IAAxB,IACCrM,QAAQoM,MAAR,CAAenI,QAAf,KAA4B,OAD7B,IAEG,CAAC,OAAD,EAAU9H,OAAV,CAAkBiE,KAAK1F,OAAL,CAAa,aAAb,EAA4B,EAA5B,CAAlB,CAFP,EAE2D;;AAEnD;AACAsF,kBAAQrD,IAAR,CAAakJ,KAAb,GAAqB6H,oBAAoBlD,IAApB,CAAyB,IAAzB,CAArB;;AAEA;AACAxK,kBAAQyH,OAAR,GAAkB;AAChBkG,sBAAU,gBADM;AAEhBR,oBAAQ;AACNxR,qBAAOiS,yBAAyBpD,IAAzB,CAA8B,IAA9B;AADD;AAFQ,WAAlB;;AAOAxK,kBAAQoM,MAAR,CAAeC,IAAf,GAAsB,KAAtB;AACA,cAAIwB,cAAc,KAAKnK,EAAL,GAAUC,aAAV,CAAwB,MAAM,KAAKC,KAAL,EAAN,GAAqB,YAA7C,EAA2DkK,WAA3D,GAAyE,GAA3F;AACA9N,kBAAQgN,IAAR,CAAapH,KAAb,GAAqB5F,QAAQgN,IAAR,CAAapH,KAAb,IAAsBiI,WAA3C;AACA,eAAKnK,EAAL,GAAUC,aAAV,CAAwB,MAAM,KAAKC,KAAL,EAAN,GAAqB,YAA7C,EAA2DmK,YAA3D,CAAwE,OAAxE,EAAiF,sBAAjF;;AAEA;AACA,eAAK1K,IAAL,CAAUC,UAAV,CAAqB,IAArB,IAA6B,qBAAAC,CAAGyK,QAAH,CAAYhO,OAAZ,CAA7B;AACAiO,UAAA,iBAAAA,CAAmB5U,IAAnB,CAAwB,IAAxB,EAA8B2G,QAAQrD,IAAR,CAAa6G,OAA3C;AACP,SAvBD,MAwBK;AACHxD,kBAAQoM,MAAR,CAAeC,IAAf,GAAsB,KAAtB;AACA,eAAKhJ,IAAL,CAAUC,UAAV,CAAqB,IAArB,IAA6B,qBAAAC,CAAGyK,QAAH,CAAYhO,OAAZ,CAA7B;AACD;AAEF,OApGW;AAqGZ2I,cAAQ,kBAAU;AAChB;AACA,aAAKd,MAAL;AACD,OAxGW;AAyGZe,eAAS,mBAAU;AACjB,YAAI,KAAKvF,IAAL,CAAUC,UAAV,CAAqB,IAArB,CAAJ,EAAgC;AAC9B,eAAKD,IAAL,CAAUC,UAAV,CAAqB,IAArB,EAA2BsF,OAA3B;AACA,eAAKvF,IAAL,CAAUC,UAAV,CAAqB,IAArB,IAA6B,IAA7B;AACD;AACF;AA9GW,KAAd;AAgHD,GAjHD;AAkHD;;AAED,SAASoK,mBAAT,CAA6B7H,KAA7B,EAAoCQ,CAApC,EAAuC;AACrC,MAAI6H,KAAJ;AACA,MAAI,KAAK7K,IAAL,CAAUC,UAAV,CAAqBQ,UAArB,IACC,KAAK1D,IAAL,OAAgB;AACjB;gCAFJ,EAGoC;AAC5B8N,cAAQ,KAAK7K,IAAL,CAAUC,UAAV,CAAqBQ,UAArB,CAAgCE,MAAxC;AACA,UAAKqC,EAAEd,EAAF,IAAQ2I,MAAM/R,OAAN,CAAckK,EAAEd,EAAhB,IAAsB,CAAC,CAAhC,IACEc,KAAK,CAACA,EAAEd,EAAR,IAAc2I,MAAM/R,OAAN,CAAckK,CAAd,IAAmB,CAAC,CADxC,EAC4C;AACxC,eAAOR,KAAP;AACH,OAHD,MAIK;AACH,YAAI,KAAKzF,IAAL,OAAgB,OAAhB,IAA2B,KAAKA,IAAL,OAAgB,KAA/C,EAAsD;AACpD,iBAAO,gBAAP;AACD,SAFD,MAGK;AACH,iBAAO,iBAAP;AACD;AACF;AACR,KAjBD,MAkBK;AACH,WAAOyF,KAAP;AACD;AACF;;AAED,SAAS+H,wBAAT,CAAkCjS,KAAlC,EAAyC+L,KAAzC,EAAgDnC,EAAhD,EAAoDnL,KAApD,EAA2D;AACzD,MAAI8T,KAAJ;AACA,MAAI,KAAK7K,IAAL,CAAUC,UAAV,CAAqBQ,UAArB,IACC,KAAK1D,IAAL,OAAgB;AACjB;gCAFJ,EAGoC;AAC5B8N,cAAQ,KAAK7K,IAAL,CAAUC,UAAV,CAAqBQ,UAArB,CAAgCE,MAAxC;AACA,UAAIkK,MAAM/R,OAAN,CAAcoJ,EAAd,IAAoB,CAAC,CAAzB,EAA4B;AAC1B,eAAO5J,KAAP;AACD;AACR,KARD,MASK;AACH,WAAOA,KAAP;AACD;AACF;;AAED,SAAS8P,kBAAT,CAA4BlP,EAA5B,EAA+B;AAC7B,MAAI,gBAAgB,OAAOmK,MAA3B,EAAmC;AACnCA,SAAOyH,QAAP,GAAkBzH,OAAOxB,MAAP,GAAgB,YAAU,CAAE,CAA9C;AACA,MAAIwB,OAAO0H,gBAAX,EAA6B;AAC3B1H,WAAO0H,gBAAP,CAAwB,QAAxB,EAAkC7R,EAAlC,EAAsC,IAAtC;AACD,GAFD,MAGK,IAAImK,OAAO2H,WAAX,EAAwB;AAC3B3H,WAAO2H,WAAP,CAAmB,UAAnB,EAA+B9R,EAA/B;AACD;AACF,C;;;;;;;;;;ACrSD;AACA;AACA;;AAEA,yDAAe,UAAUI,IAAV,EAAgB;AAC7B,MAAI,CAACjD,UAAUN,MAAf,EAAuB,OAAO,KAAKkH,OAAL,CAAa3D,IAAb,EAAP;AACvB,MAAIA,gBAAgB,wDAApB,EAA6B;AAC3B,SAAK2D,OAAL,GAAe3D,IAAf;AACA,WAAO,IAAP;AACD,GAHD,MAIK;AACH,WAAO2R,cAAcjV,IAAd,CAAmB,IAAnB,EAAyBsD,IAAzB,CAAP;AACD;AACF;;AAED,SAAS2R,aAAT,CAAuBC,QAAvB,EAAiC;AAC/B,MAAIjO,OAAJ;AAAA,MACIkO,OADJ;AAAA,MAEI9M,IAFJ;AAAA,MAGIQ,MAHJ;AAAA,MAIIuM,aAAa,EAJjB;AAAA,MAKIC,KALJ;AAAA,MAMIC,cANJ;AAAA,MAOI1H,KAPJ;AAAA,MAQI7G,IARJ;;AAUAoO,YAAU,KAAKA,OAAL,KAAiB,KAAKA,OAAL,EAAjB,GAAkC,iBAA5C;AACA9M,SAAO6M,SAASK,QAAT,IAAqB,EAA5B;AACAF,UAAS,OAAOH,SAASG,KAAhB,KAA0B,WAA3B,GAA0CH,SAASG,KAAnD,GAA2D,EAAnE;;AAEA;AACAA,UAAQ,oEAAAnV,CAAO;AACbsV,mBAAe,IADF;AAEb1N,sBAAkB,IAFL;AAGb2N,aAAS,EAHI;AAIbC,cAAU,IAJG;AAKbxN,cAAU,IALG;AAMbf,eAAW,IANE;AAObwO,cAAU;AAPG,GAAP,EAQLN,KARK,CAAR;;AAUA,MAAIA,MAAMG,aAAN,KAAwB,QAA5B,EAAsC;AACpC3M,aAAS,QAAT;AACD,GAFD,MAGK,IAAIwM,MAAMG,aAAN,KAAwB,YAA5B,EAAyC;AAC5C3M,aAAS,YAAT;AACD,GAFI,MAGA,IAAIwM,MAAMG,aAAN,KAAwB,eAA5B,EAA6C;AAChD,QAAI,CAACH,MAAMK,QAAP,IAAmB,CAACL,MAAMnN,QAA9B,EAAwC;AACtCW,eAAS,MAAT;AACD;AACD;AACD,GALI,MAMA,IAAIwM,MAAMG,aAAV,EAAyB;AAC5B,QAAI,CAACH,MAAMK,QAAP,IAAmB,CAACL,MAAMnN,QAA9B,EAAwC;AACtCW,eAAS,QAAT;AACD,KAFD,MAGK,IAAIwM,MAAMK,QAAN,IAAkB,CAACL,MAAMnN,QAA7B,EAAuC;AAC1C,UAAImN,MAAMK,QAAN,YAA0B5V,KAA1B,IAAmCuV,MAAMK,QAAN,CAAe3V,MAAf,GAAwB,CAA/D,EAAkE;AAChE8I,iBAAS,uBAAT;AACAuM,mBAAW5T,IAAX,CAAgB6T,MAAMK,QAAtB;AACD,OAHD,MAIK;AACH7M,iBAAS,gBAAT;AACD;AACF,KARI,MASA,IAAIwM,MAAMnN,QAAN,IAAkB,CAACmN,MAAMK,QAA7B,EAAuC;AAC1C7M,eAAS,UAAT;AACAuM,iBAAW5T,IAAX,CAAgB2T,OAAhB;AACD,KAHI,MAIA,IAAIE,MAAMK,QAAN,IAAkBL,MAAMnN,QAA5B,EAAsC;AACzC,UAAImN,MAAMK,QAAN,YAA0B5V,KAA1B,IAAmCuV,MAAMK,QAAN,CAAe3V,MAAf,GAAwB,CAA/D,EAAkE;AAChE8I,iBAAS,yBAAT;AACAuM,mBAAW5T,IAAX,CAAgB6T,MAAMK,QAAtB;AACAN,mBAAW5T,IAAX,CAAgB2T,OAAhB;AACD,OAJD,MAKK;AACHtM,iBAAS,kBAAT;AACAuM,mBAAW5T,IAAX,CAAgB2T,OAAhB;AACD;AACF;AACF;;AAED,MAAI,CAACtM,MAAL,EAAa;;AAEX;AACA;AACA,QAAI,OAAOqM,SAASxR,MAAhB,KAA2B,QAA/B,EAAwC;AACtCmF,eAAS,QAAT;AACD;;AAED;AACA;AACA,QAAIqM,SAASxR,MAAT,YAA2B5D,KAA3B,IAAoCoV,SAASxR,MAAT,CAAgB3D,MAAhB,GAAyB,CAAjE,EAAmE;;AAEjE;AACA;AACA,UAAImV,SAASxR,MAAT,CAAgB,CAAhB,EAAmByD,SAAnB,KAAiC,OAAO+N,SAASxR,MAAT,CAAgB,CAAhB,EAAmBpB,KAA1B,IAAmC,QAAnC,IAA+C4S,SAASxR,MAAT,CAAgB,CAAhB,EAAmBpB,KAAnB,IAA4B,IAA5G,CAAJ,EAAuH;AACrHuG,iBAAS,UAAT;AACAuM,mBAAW5T,IAAX,CAAgB2T,OAAhB;AACD;;AAED;AACA;AACA,UAAI,OAAOD,SAASxR,MAAT,CAAgB,CAAhB,EAAmBA,MAA1B,IAAoC,QAAxC,EAAiD;AAC/CmF,iBAAS,gBAAT;AACD;;AAED;AACA;AACA,UAAIqM,SAASxR,MAAT,CAAgB,CAAhB,EAAmBpB,KAAnB,YAAoCxC,KAAxC,EAA8C;AAC5C+I,iBAAS,kBAAT;AACAuM,mBAAW5T,IAAX,CAAgB2T,OAAhB;AACD;;AAED;AACA;AACA,UAAI,OAAOD,SAASxR,MAAT,CAAgB,CAAhB,CAAP,KAA8B,QAA9B,IACC,OAAOwR,SAASrN,KAAhB,KAA0B,WAD/B,EAC2C;AACvCgB,iBAAS,QAAT;AACA;AACAwM,cAAMxN,KAAN,GAAcqN,SAASrN,KAAvB;AACH;;AAED;AACA;AACA,UAAI,CAAC,OAAOqN,SAASxR,MAAT,CAAgB,CAAhB,CAAP,KAA8B,QAA9B,IAA0C,OAAOwR,SAASxR,MAAT,CAAgB,CAAhB,CAAP,IAA6B,QAAxE,KAAqF,OAAOwR,SAASrN,KAAhB,KAA0B,WAAnH,EAA+H;AAC7HgB,iBAAS,MAAT;AACD;;AAED;AACA;AACA,UAAI,CAACA,MAAL,EAAa;AACXA,iBAAS,YAAT;AACD;AACF;AACF;;AAED;AACA,MAAI,CAAC,KAAK+E,KAAL,EAAL,EAAmB;AACjB,QAAIvF,KAAKuN,YAAT,EAAuB;AACrBhI,cAAQvF,KAAKuN,YAAb;AACD,KAFD,MAGK;AACHhI,cAAQiI,gBAAgBR,KAAhB,CAAR;AACD;AACD,SAAKzH,KAAL,CAAWA,KAAX;AACD;;AAED;AACA,MAAI,CAAC,KAAK7G,IAAL,EAAL,EAAkB;AAChB,QAAIsB,KAAKyN,aAAL,IAAsBzN,KAAKyN,aAAL,CAAmBC,UAA7C,EAAyD;AACvDhP,aAAOsB,KAAKyN,aAAL,CAAmBC,UAA1B;AACD,KAFD,MAGK;AACHhP,aAAOiP,eAAenN,MAAf,CAAP;AACD;AACD,SAAK9B,IAAL,CAAUA,IAAV;AACD;;AAED;AACAuO,mBAAiB,wDAAA9O,CAAQqC,MAAR,CAAelE,KAAf,CAAqB,IAArB,EAA2B,CAACkE,MAAD,EAASzG,MAAT,CAAgBgT,UAAhB,CAA3B,CAAjB;;AAEA;AACAnO,YAAUqO,eAAe,oEAAApV,CAAOgV,QAAP,EAAiB,EAAE,SAASG,KAAX,EAAjB,CAAf,CAAV;;AAEA;AACA,MAAIxM,OAAO/F,OAAP,CAAe,UAAf,IAA6B,CAAC,CAAlC,EAAqC;AACnCmE,YAAQhB,YAAR,CAAqB,CAArB,EAAwB,UAAS3D,KAAT,EAAgBlC,CAAhB,EAAkB;AACxC,aAAO,IAAIoJ,IAAJ,CAASlH,KAAT,CAAP;AACD,KAFD;AAGD;;AAED2E,UAAQf,SAAR,CAAkB,CAAlB,EAAqB,UAAS5D,KAAT,EAAgBlC,CAAhB,EAAkB;AACrC,WAAO,oFAAAe,CAAcmB,KAAd,CAAP;AACD,GAFD;;AAIA,OAAK2E,OAAL,GAAeA,OAAf;;AAEA,SAAO,IAAP;AACD;;AAED,SAAS4O,eAAT,CAAyBR,KAAzB,EAAgC;AAC9B,MAAIY,WAAWZ,MAAMG,aAAN,GAAsBH,MAAMG,aAAN,CAAoBnU,OAApB,CAA4B,GAA5B,EAAiC,GAAjC,CAAtB,GAA8D,EAA7E;AAAA,MACIuM,KADJ;;AAGAA,UAAQqI,SAAS5U,OAAT,CAAkB,MAAlB,EAA0B,UAASsE,CAAT,EAAW;AAC3C,WAAOA,EAAER,WAAF,EAAP;AACD,GAFO,CAAR;;AAIA,MAAIkQ,MAAMvN,gBAAV,EAA4B;AAC1B8F,aAAS,QAAQyH,MAAMvN,gBAAvB;AACD;AACD,SAAO8F,KAAP;AACD;;AAED,SAASoI,cAAT,CAAwBnN,MAAxB,EAAgC;AAC9B,MAAI9B,aAAJ;AACA,UAAQ8B,MAAR;AACE,SAAK,QAAL;AACE9B,aAAO,QAAP;AACA;AACF,SAAK,UAAL;AACEA,aAAO,MAAP;AACA;AACF,SAAK,gBAAL;AACA,SAAK,uBAAL;AACEA,aAAO,KAAP;AACA;AACF,SAAK,kBAAL;AACA,SAAK,yBAAL;AACEA,aAAO,MAAP;AACA;AACF,SAAK,QAAL;AACEA,aAAO,gBAAP;AACA;AACF,SAAK,MAAL;AACA,SAAK,YAAL;AACA;AACEA,aAAO,OAAP;AArBJ;AAuBA,SAAOA,IAAP;AACD,C;;;;;;;AC7ND;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;ACxFA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;ACvXA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;A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","file":"keen-dataviz.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"), require(\"c3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\", \"c3\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\"), require(\"c3\")) : factory(root[\"d3\"], root[\"c3\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__7__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","export function each(o, cb, s) {\n  var n;\n  if (!o) {\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array) {\n    // Indexed arrays, needed for Safari\n    for (n = 0; n < o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false) {\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o) {\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","export function extend(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n}\n","const matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nexport function escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","/**\n * Strip html tags from string\n *\n * @param  {string} string The string to strip\n * @return {string}\n * @public\n */\n\nexport function stripHtmlTags(inputString) {\n  return inputString.replace(/(<([^>]+)>)/ig, '');\n}\n","export default function (len) {\n  const list = [];\n  for (let i = 0; i < len; i++) {\n    list.push(null);\n  }\n  return list;\n}\n","import createNullList from '../utils/create-null-list';\nimport { each } from '../../utils/each';\n\nexport function appendColumn(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n    self.matrix[0].push(label);\n    each(self.matrix, function(row, i) {\n      let cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].push(cell);\n      }\n    });\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat(createNullList(self.matrix.length - 1 - input.length));\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String(self.matrix.length));\n        }\n      });\n    }\n\n    self.matrix[0].push(label);\n    each(input, function(value, i){\n      self.matrix[i+1][self.matrix[0].length-1] = value;\n    });\n\n  }\n\n  return self;\n}\n\nexport function appendRow(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n  const newRow = [];\n\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i){\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.push(newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length));\n        }\n      });\n    }\n\n    self.matrix.push(newRow.concat(input));\n  }\n\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function deleteColumn(q) {\n  const self = this;\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n    each(self.matrix, function(row, i){\n      self.matrix[i].splice(index, 1);\n    });\n  }\n  return self;\n}\n\nexport function deleteRow(q) {\n  var index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n    this.matrix.splice(index, 1);\n  }\n  return this;\n}\n","import { each } from '../../utils/each';\n\nexport function filterColumns(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i) {\n    clone.push([]);\n  });\n\n  each(self.matrix[0], function(col, i){\n    var selectedColumn = self.selectColumn(i);\n    if (i == 0 || fn.call(self, selectedColumn, i)) {\n      each(selectedColumn, function(cell, ri){\n        clone[ri].push(cell);\n      });\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n\nexport function filterRows(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i){\n    if (i == 0 || fn.call(self, row, i)) {\n      clone.push(row);\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function insertColumn(index, str, input) {\n  const self = this;\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n\n    self.matrix[0].splice(index, 0, label);\n    each(self.matrix, function(row, i) {\n      var cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].splice(index, 0, cell);\n      }\n    });\n\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat( createNullList(self.matrix.length - 1 - input.length) );\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String( self.matrix.length ));\n        }\n      });\n    }\n\n    self.matrix[0].splice(index, 0, label);\n    each(input, function(value, i){\n      self.matrix[i+1].splice(index, 0, value);\n    });\n\n  }\n  return self;\n}\n\nexport function insertRow(index, str, input) {\n  const self = this;\n  const newRow = [];\n  const label = (str !== undefined) ? str : null;\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i) {\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.splice(index, 0, newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length ));\n        }\n      });\n    }\n\n    self.matrix.splice(index, 0, newRow.concat(input) );\n  }\n\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function selectColumn(q) {\n  const result = [];\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1 && typeof this.matrix[0][index] !== 'undefined') {\n    each(this.matrix, function(row, i) {\n      result.push(row[index]);\n    });\n  }\n  return result;\n}\n\nexport function selectRow(q) {\n  let result = [];\n  const index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1 && typeof this.matrix[index] !== 'undefined') {\n    result = this.matrix[index];\n  }\n  return result;\n}\n","import { each } from '../../utils/each';\nimport { extend } from '../../utils/extend';\n\nconst helpers = {};\n\nfunction average(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0,\n      avg = null;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum / set.length;\n}\n\nfunction maximum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.max.apply(Math, nums);\n}\n\nfunction minimum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.min.apply(Math, nums);\n}\n\nfunction sum(arr, start, end){\n  // Copy set with given range\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum;\n}\n\n\n// Convenience methods\n\neach(methods, function(method, name){\n  var capitalized = name.charAt(0).toUpperCase() + name.slice(1);\n  helpers['getColumn' + capitalized] = helpers['getRow' + capitalized] = function(arr){\n    return this[name](arr, 1);\n  };\n});\n\nhelpers['getColumnLabel'] = helpers['getRowIndex'] = function(arr){\n  return arr[0];\n};\n\nexport const methods = {\n  average,\n  maximum,\n  minimum,\n  sum,\n};\n\nextend(methods, helpers);\n\nexport default { methods };\n","import { each } from '../../utils/each';\nimport { methods as analysesUtilMethods } from '../utils/analyses';\n\nexport function sortColumns(str, comp) {\n  var self = this,\n      head = this.matrix[0].slice(1), // minus index\n      cols = [],\n      clone = [],\n      fn = comp || analysesUtilMethods.getColumnLabel;\n\n  // Isolate each column (except the index)\n  each(head, function(cell, i) {\n    cols.push(self.selectColumn(i+1).slice(0));\n  });\n  cols.sort(function(a,b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  each(cols, function(col, i) {\n    self\n      .deleteColumn(i+1)\n      .insertColumn(i+1, col[0], col.slice(1));\n  });\n  return self;\n}\n\nexport function sortRows(str, comp) {\n  var self = this,\n      head = this.matrix.slice(0,1),\n      body = this.matrix.slice(1),\n      fn = comp || analysesUtilMethods.getRowIndex;\n  body.sort(function(a, b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  self.data(head.concat(body));\n  return self;\n}\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function updateColumn(q, input) {\n  var self = this,\n      index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data(), function(row, i){\n        var cell;\n        if (i > 0) {\n          cell = input.call(self, row[index], i, row);\n          if (typeof cell !== 'undefined') {\n            self.matrix[i][index] = cell;\n          }\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.data().length - 1) {\n        input = input.concat( createNullList(self.data().length - 1 - input.length) );\n      }\n      else {\n        // If this new column is longer than existing columns,\n        // we need to update the rest to match ...\n        each(input, function(value, i){\n          if (self.matrix.length -1 < input.length) {\n            appendRow.call(self, String( self.matrix.length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[i+1][index] = value;\n      });\n\n    }\n\n  }\n  return self;\n}\n\nexport function updateRow(q, input){\n  var self = this,\n      index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data()[index], function(value, i){\n        var col = self.selectColumn(i),\n        cell = input.call(self, value, i, col);\n        if (typeof cell !== 'undefined') {\n          self.matrix[index][i] = cell;\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.matrix[0].length - 1) {\n        input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n      }\n      else {\n        each(input, function(value, i){\n          if (self.matrix[0].length -1 < input.length) {\n            appendColumn.call(self, String( self.matrix[0].length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[index][i+1] = value;\n      });\n    }\n\n  }\n  return self;\n}\n","// Pure awesomeness by Will Rayner (penguinboy)\n// https://gist.github.com/penguinboy/762197\n\nexport function flatten(ob){\n  var toReturn = {};\n  for (var i in ob) {\n    if (!ob.hasOwnProperty(i)) continue;\n    if ((typeof ob[i]) == 'object' && ob[i] !== null) {\n      var flatObject = flatten(ob[i]);\n      for (var x in flatObject) {\n        if (!flatObject.hasOwnProperty(x)) continue;\n        toReturn[i + '.' + x] = flatObject[x];\n      }\n    } else {\n      toReturn[i] = ob[i];\n    }\n  }\n  return toReturn;\n};\n","let Dataset; /* injected */\n\nimport { each } from '../../utils/each';\nimport { flatten } from '../utils/flatten';\n\nexport default function initialize(lib){\n  Dataset = lib;\n  return function(name){\n    var options = Array.prototype.slice.call(arguments, 1);\n\n    if (!parsers[name]) {\n      throw 'Requested parser does not exist';\n    }\n    else {\n      return parsers[name].apply(this, options);\n    }\n  };\n}\n\nfunction parseMetric(){\n  return function(res){\n    return new Dataset()\n      .set(['Value', 'Result'], res.result)\n      .type('metric');\n  }\n}\n\n//var myParser = Dataset.parser('interval', 'timeframe.end');\nfunction parseInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      dataset.set(['Result', index], record.value);\n    });\n    return dataset;\n  }\n}\n\nfunction parseGroupedMetric(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-metric');\n    each(res.result, function(record, i){\n      var label;\n      each(record, function(value, key){\n        if (key !== 'result') {\n          label = key;\n        }\n      });\n      dataset.set(['Result', String(record[label])], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('grouped-interval', 'timeframe.end');\nfunction parseGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      if (record.value.length) {\n        each(record.value, function(group, j){\n          var label;\n          each(group, function(value, key){\n            if (key !== 'result') {\n              label = key;\n            }\n          });\n          dataset.set([ String(group[label]), index ], group.result);\n        });\n      }\n      else {\n        dataset.appendRow(index);\n      }\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-metric', ['first', 'second']);\nfunction parseDoubleGroupedMetric(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-metric');\n    each(res.result, function(record, i){\n      var rowLabel = record[options[0][0]] + ' ' + record[options[0][1]];\n      dataset.set([ 'Result', rowLabel ], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-interval', ['first', 'second'], 'timeframe.end');\nfunction parseDoubleGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[1] && options[1] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      each(record['value'], function(value, j){\n        var label = value[options[0][0]] + ' ' + value[options[0][1]];\n        dataset.set([ label, index ], value.result);\n      });\n    });\n    return dataset;\n  }\n}\n\nfunction parseFunnel(){\n  return function(res){\n    var result, steps, dataset;\n    if (typeof res.steps !== 'undefined'\n        && typeof res.result !== 'undefined'\n          && res.result instanceof Array) {\n            // Ad-hoc funnel response\n            result = res.result;\n            steps = res.steps;\n    }\n    else if (typeof res.result.steps !== 'undefined'\n        && typeof res.result.result !== 'undefined'\n          && res.result.result instanceof Array) {\n            // Saved funnel response\n            result = res.result.result;\n            steps = res.result.steps;\n    }\n    dataset = new Dataset().type('funnel');\n    dataset.appendColumn('Step Value');\n    each(result, function(value, i){\n      if (typeof steps !== 'undefined' && steps[i]) {\n        dataset.appendRow(String(steps[i].event_collection), [value]);\n      }\n    });\n    return dataset;\n  }\n}\n\nfunction parseList(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('list');\n    each(res.result, function(value, i){\n      dataset.set( [ 'Result', String(i+1) ], value );\n    });\n    return dataset;\n  }\n}\n\nfunction parseExtraction(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('extraction');\n    each(res.result, function(record, i){\n      each(flatten(record), function(value, key){\n        dataset.set([ key, String(i+1) ], value);\n      });\n    });\n    dataset.deleteColumn(0);\n    return dataset;\n  }\n}\n\n// Parser definitions\nconst parsers = {\n  metric: parseMetric,\n  interval: parseInterval,\n  'grouped-metric': parseGroupedMetric,\n  'grouped-interval': parseGroupedInterval,\n  'double-grouped-metric': parseDoubleGroupedMetric,\n  'double-grouped-interval': parseDoubleGroupedInterval,\n  funnel: parseFunnel,\n  list: parseList,\n  extraction: parseExtraction,\n};\n","// Modifiers\nimport * as append from './modifiers/append';\nimport * as del from './modifiers/delete';\nimport * as filter from './modifiers/filter';\nimport * as insert from './modifiers/insert';\nimport * as select from './modifiers/select';\nimport * as sort from './modifiers/sort';\nimport * as update from './modifiers/update';\n\n// Utils\nimport * as analyses from './utils/analyses';\nimport { extend } from '../utils/extend';\nimport parsers from './utils/parsers';\n\nexport const Dataset = function () {\n  if (this instanceof Dataset === false) {\n    return new Dataset();\n  }\n\n  this.matrix = [\n    ['Index']\n  ];\n  this.meta = {\n    type: undefined\n  };\n}\n\nDataset.prototype.data = function (arr) {\n  if (!arguments.length) return this.matrix;\n  this.matrix = (arr instanceof Array ? arr : null);\n  return this;\n};\n\nDataset.prototype.set = function (coords, value) {\n  if (arguments.length < 2 || coords.length < 2) {\n    throw Error('Incorrect arguments provided for #set method');\n  }\n\n  var colIndex = 'number' === typeof coords[0] ? coords[0] : this.matrix[0].indexOf(coords[0]),\n      rowIndex = 'number' === typeof coords[1] ? coords[1] : select.selectColumn.call(this, 0).indexOf(coords[1]);\n\n  var colResult = select.selectColumn.call(this, coords[0]),\n      rowResult = select.selectRow.call(this, coords[1]);\n\n  // Column doesn't exist, create and reset colIndex\n  if (colResult.length < 1) {\n    append.appendColumn.call(this, String(coords[0]));\n    colIndex = this.matrix[0].length - 1;\n  }\n\n  // Row doesn't exist, create and reset rowIndex\n  if (rowResult.length < 1) {\n    append.appendRow.call(this, String(coords[1]));\n    rowIndex = this.matrix.length - 1;\n  }\n\n  // Set provided value\n  this.matrix[ rowIndex ][ colIndex ] = value;\n  return this;\n};\n\nDataset.prototype.type = function(str){\n  if (!arguments.length) return this.meta['type'];\n  this.meta['type'] = (str ? String(str) : undefined);\n  return this;\n};\n\nextend(Dataset.prototype, append);\nextend(Dataset.prototype, del);\nextend(Dataset.prototype, filter);\nextend(Dataset.prototype, insert);\nextend(Dataset.prototype, select);\nextend(Dataset.prototype, sort);\nextend(Dataset.prototype, update);\n\nextend(Dataset.prototype, analyses);\nDataset.parser = parsers(Dataset);\n\nexport default Dataset;\n","export function testObject(input) {\n  if (input !== null && typeof input.getTime === 'function' && !isNaN(input.getTime())) {\n    return true;\n  }\n  return false;\n}\n\nexport function testString(input) {\n  const ISO_8601 = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n  return ISO_8601.test(input);\n}\n\nexport default function (input) {\n  if (typeof input === 'object') {\n    return testObject(input);\n  } else if (typeof input === 'string') {\n    return testString(input);\n  }\n  return false;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","import { each } from './each';\n\nexport function extendDeep(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    each(arguments[i], function(prop, key){\n      if (( typeof target[key] !== 'undefined' && typeof prop !== 'undefined' ) &&\n          ( typeof target[key] === 'object'    && typeof prop === 'object' ) &&\n          ( target[key] !== null               && prop !== null )) {\n            extendDeep(target[key], prop);\n      }\n      else {\n        target[key] = prop;\n      }\n    });\n  }\n  return target;\n}\n","export default function (startDate, endDate) {\n  var timeDiff = Math.abs(new Date(startDate).getTime() - new Date(endDate).getTime());\n  var months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'June',\n    'July',\n    'Aug',\n    'Sept',\n    'Oct',\n    'Nov',\n    'Dec'\n  ];\n\n  // Yearly (31536000000) + Monthly\n  if (timeDiff >= 2419200000) {\n    return function(ms){\n      var date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getFullYear();\n    };\n  }\n  // Daily\n  else if (timeDiff >= 86400000) {\n    return function(ms){\n      var date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getDate();\n    };\n  }\n  // Hourly\n  else if (timeDiff >= 3600000) {\n    return '%I:%M %p';\n  }\n  // Minutely\n  else {\n    return '%I:%M:%S %p';\n  }\n}\n","import d3 from 'd3';\n\nimport isDateString from '../../../utils/assert-date-string';\n\nexport default function (cols) {\n  var self = this,\n      chart = this.view._artifacts.c3,\n      columns = [],\n      domNode = this.el().querySelector('.' + this.theme() + '-rendering'),\n      legendWidth = 120;\n\n  var pagination = this.view._artifacts.pagination = {\n    hidden: [],\n    labels: [],\n    position: 0,\n    range: Math.round((domNode.offsetHeight - 78) / 20),\n    total: 0\n  };\n\n  // Reduce threshold for donut/pie charts\n  if (this.type() === 'donut' || this.type() === 'pie') {\n    pagination.range = pagination.range >= 5 ? 5 : pagination.range;\n  }\n\n  for (var i = 0; i < cols.length; i++) {\n    if (cols[i][0] !== 'x' && !isDateString(cols[i][1])) {\n      columns.push(cols[i][0]);\n    }\n  }\n\n  var legendEl = d3.select(domNode)\n    .append('svg')\n    .attr({\n      'class': 'keen-c3-legend',\n      'height': domNode.offsetHeight - 10,\n      'width': legendWidth\n    })\n    .style({\n      'right': -legendWidth + 'px',\n      'top': '10px'\n    });\n\n  var legendItems = legendEl\n    .append('g')\n    .attr('class', 'keen-c3-legend-items');\n\n  var paginateElOffset = 20 * pagination.range;\n  var paginateEl = legendEl\n    .append('g')\n    .attr({\n      'class': 'keen-c3-legend-pagination',\n      'transform': function(){\n        return 'translate(2, ' + paginateElOffset + ')'\n      }\n    });\n\n  paginateData();\n\n  function paginateData(){\n    pagination.labels = columns.slice(pagination.position, pagination.position + pagination.range);\n    pagination.total = columns.length;\n    renderLegendComponent.call(self, pagination.labels);\n    if (pagination.total > pagination.range) {\n      renderPaginationComponent.call(self);\n    }\n    chart.resize();\n  }\n\n  function renderLegendComponent(){\n    legendItems\n      .selectAll('g')\n      .remove();\n\n    var legendItemList = legendItems\n      .selectAll('g')\n      .data(pagination.labels);\n\n    legendItemList.enter()\n        .append('g')\n        .attr('transform', function(id, i){\n          return 'translate(0, ' + (20 * i) + ')'\n        })\n      .attr('data-id', function (id) { return id; })\n      .style('opacity', function(id){\n        var isHidden = pagination.hidden.indexOf(id);\n        return isHidden < 0 ? 1 : .35;\n      })\n      .each(function (id) {\n        d3.select(this)\n          .append('text')\n          .attr({\n            'font-size': 12,\n            'pointer-events': 'none',\n            'x': 15,\n            'y': 9\n          })\n          .text(id)\n          .text(function(id){\n            if (d3.select(this).node().getBBox().width > 105) {\n              return id.length <= 15 ? id : id.substring(0, 12) + '...';\n            }\n            else {\n              return id;\n            }\n          });\n        d3.select(this)\n          .append('rect')\n          .attr({\n            'height': 14,\n            'width': 110,\n            'x': 0,\n            'y': 0\n          })\n          .style({\n            'cursor': 'pointer',\n            'fill-opacity': 0\n          });\n        d3.select(this)\n          .append('rect')\n          .attr({\n            'fill': chart.color(id),\n            'height': 10,\n            'pointer-events': 'none',\n            'rx': 5,\n            'ry': 5,\n            'width': 10,\n            'x': 0,\n            'y': 0\n          });\n      })\n      .on('mouseover', function (id, i) {\n          chart.focus(id);\n          // show a tooltip overlay w/ full value\n          if (id.length > 15) {\n            d3.select(domNode)\n              .append('div')\n              .attr('class', 'keen-c3-legend-label-overlay')\n              .style({\n                'max-width': '75%',\n                'right': -legendWidth + 'px',\n                'top': (5 + (i+1) * 20) + 'px'\n              })\n              .html(id)\n              .append('div')\n                .attr('class', 'keen-c3-legend-label-overlay-pointer');\n          }\n      })\n      .on('mouseout', function (id) {\n        chart.revert();\n        // clear out the tooltip overlay\n        d3.select(self.el().querySelector('.' + self.theme() + '-rendering .keen-c3-legend-label-overlay'))\n          .remove();\n      })\n      .on('click', function (id) {\n        d3.select(this).style('opacity', function(){\n          var isHidden = pagination.hidden.indexOf(id);\n          if (isHidden < 0) {\n            pagination.hidden.push(id);\n            return .35;\n          }\n          else {\n            pagination.hidden.splice(isHidden, 1);\n            return 1;\n          }\n        });\n        chart.toggle(id);\n      });\n\n    legendItemList.exit().remove();\n  }\n\n  function renderPaginationComponent(){\n    paginateEl\n      .selectAll('g')\n      .remove();\n\n    paginateEl\n        .selectAll('g')\n        .data([\n          { direction: 'reverse', path_d: 'M0 10 L10 0 L20 10 Z' },\n          { direction: 'forward', path_d: 'M0 0 L10 10 L20 0 Z' }\n        ])\n        .enter()\n        .append('g')\n        .attr('transform', function(id, i){\n          return 'translate(' + (i * 20) + ', 0)'\n        })\n        .each(function(id){\n          d3.select(this)\n            .append('path')\n            .attr('d', function(d){\n              return d.path_d;\n            })\n            .style({\n              'cursor': 'pointer',\n              'fill': '#D7D7D7',\n              'stroke': 'none'\n            })\n            .on('mouseover', function (id) {\n              d3.select(this).style('fill', '#4D4D4D');\n            })\n            .on('mouseout', function (id) {\n              d3.select(this).style('fill', '#D7D7D7');\n            })\n            .on('click', function (d) {\n              if (d.direction === 'forward') {\n                if (pagination.position + pagination.range < pagination.total) {\n                  pagination.position = pagination.position + pagination.range;\n                }\n              }\n              else {\n                if (pagination.position - pagination.range >= 0) {\n                  pagination.position = pagination.position - pagination.range;\n                }\n              }\n              paginateData();\n              clearSelectedText();\n            });\n        });\n  }\n\n  function clearSelectedText() {\n    var selection;\n    if (document.selection && document.selection.empty) {\n      selection = document.selection;\n      selection.empty();\n    }\n    else if (window.getSelection) {\n      selection = window.getSelection();\n      selection.removeAllRanges();\n    }\n  }\n}\n","import { escapeHtml } from '../../../utils/escape-html';\n\nexport default function (d, defaultTitleFormat, defaultValueFormat, color) {\n  var bgcolor,\n      name,\n      nameFormat,\n      text,\n      title,\n      titleFormat,\n      value,\n      valueFormat;\n\n  // Set config options or defaults\n  nameFormat = this.config.tooltip_format_name || function (name) { return name; };\n  titleFormat = this.config.tooltip_format_title || defaultTitleFormat;\n  valueFormat = this.config.tooltip_format_value || defaultValueFormat;\n\n  // Reverse list to match legend\n  for (var i = 0; i < d.length; i++) {\n    if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }\n    if (! text) {\n      title = titleFormat ? titleFormat(d[i].x) : d[i].x;\n      text = \"<table class='\" + this.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + escapeHtml(title) + \"</th></tr>\" : \"\");\n    }\n    name = nameFormat(d[i].name);\n    value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);\n    bgcolor = this.levelColor ? this.levelColor(d[i].value) : color(d[i].id);\n    if (value) {\n      text += \"<tr class='\" + this.CLASS.tooltipName + \"-\" + d[i].id + \"'>\";\n      text +=   \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + escapeHtml(name) + \"</td>\";\n      text +=   \"<td class='value'>\" + escapeHtml(value) + \"</td>\";\n      text += \"</tr>\";\n    }\n  }\n  return text + \"</table>\";\n}\n","import { escapeHtml } from '../../utils/escape-html';\n\nexport default {\n  render: function(text){\n    var outer = document.createElement('div');\n    var inner = document.createElement('div');\n    var msg = document.createElement('span');\n    var height = this.height() || 140;\n\n    var titleContainer = document.createElement('div');\n    var notesContainer = document.createElement('div');\n\n    outer.className = this.theme();\n    inner.className = this.theme() + '-message';\n    inner.style.width = this.width() + 'px';\n\n    // Create title and notes for message\n    titleContainer.className = this.theme() + '-title';\n    titleContainer.innerHTML = escapeHtml(this.title() || '');\n    notesContainer.className = this.theme() + '-notes';\n    notesContainer.innerHTML = escapeHtml(this.notes() || '');\n\n    msg.innerHTML = escapeHtml(text) || '';\n    inner.appendChild(msg);\n    outer.appendChild(titleContainer);\n    outer.appendChild(inner);\n    outer.appendChild(notesContainer);\n\n    this.el().innerHTML = '';\n    this.el().appendChild(outer);\n\n    var actualInnerHeight = height - titleContainer.offsetHeight - notesContainer.offsetHeight;\n    inner.style.height = actualInnerHeight + 'px';\n    inner.style.paddingTop = (actualInnerHeight / 2 - 12) + 'px';\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","export function prettyNumber(input) {\n  // If it has 3 or fewer sig figs already, just return the number.\n  var input = Number(input),\n      sciNo = input.toPrecision(3),\n      prefix = '',\n      suffixes = ['', 'k', 'M', 'B', 'T'];\n\n  if (Number(sciNo) == input && String(input).length <= 4) {\n    return String(input);\n  }\n\n  if (Math.abs(input) >= 1000000000000000) {\n    return sciNo;\n  }\n\n  if (input >= 1 || input <= -1) {\n    if (input < 0){\n      //Pull off the negative side and stash that.\n      input = -input;\n      prefix = '-';\n    }\n    return prefix + recurse(input, 0);\n  }\n  else {\n    return input.toPrecision(3);\n  }\n\n  function recurse(input, iteration) {\n    var input = String(input);\n    var split = input.split('.');\n    // If there's a dot\n    if (split.length > 1) {\n      // Keep the left hand side only\n      input = split[0];\n      var rhs = split[1];\n      // If the left-hand side is too short, pad until it has 3 digits\n      if (input.length == 2 && rhs.length > 0) {\n        // Pad with right-hand side if possible\n        if (rhs.length > 0) {\n          input = input + '.' + rhs.charAt(0);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n      else if (input.length == 1 && rhs.length > 0) {\n        input = input + '.' + rhs.charAt(0);\n        // Pad with right-hand side if possible\n        if (rhs.length > 1) {\n          input += rhs.charAt(1);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n    }\n    var numNumerals = input.length;\n    // if it has a period, then numNumerals is 1 smaller than the string length:\n    if (input.split('.').length > 1) {\n      numNumerals--;\n    }\n    if (numNumerals <= 3) {\n      return String(input) + suffixes[iteration];\n    }\n    else {\n      return recurse(Number(input) / 1000, iteration + 1);\n    }\n  }\n}\n","import { prettyNumber } from '../../utils/pretty-number';\nimport { escapeHtml } from '../../utils/escape-html';\n\nexport default {\n  render: function(){\n    var color = this.colors()[0],\n        theme = this.theme(),\n        title = this.title(),\n        value = '-',\n        height = this.height() || 140,\n        width = this.width(),\n        opts = this.chartOptions(),\n        html = '',\n        prefix = '',\n        suffix = '',\n        formattedNum,\n        valueEl;\n\n    if (typeof this.data()[1][1] === 'number') {\n      value = this.data()[1][1];\n    }\n\n    formattedNum = value;\n    if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n      && !isNaN(parseInt(value)) ) {\n        formattedNum = prettyNumber(value);\n    }\n\n    if (opts['prefix']) {\n      prefix = '<span class=\"' + theme + '-metric-prefix\">' + opts['prefix'] + '</span>';\n    }\n    if (opts['suffix']) {\n      suffix = '<span class=\"' + theme + '-metric-suffix\">' + opts['suffix'] + '</span>';\n    }\n\n    html += '<div class=\"' + theme + '\">';\n    html +=   '<div class=\"' + theme + '-metric\" style=\"background-color: ' + color + '; width: ' + (width ? width + 'px' : 'auto') + ';\" title=\"' + escapeHtml(value) + '\">';\n    html +=     '<span class=\"' + theme + '-metric-value\">' + prefix + escapeHtml(formattedNum) + suffix + '</span>';\n    if (title) {\n      html +=   '<span class=\"' + theme + '-metric-title\">' + escapeHtml(title) + '</span>';\n    }\n    html +=   '</div>';\n    html += '</div>';\n\n    this.el().innerHTML = html;\n    valueEl = this.el().querySelector('.' + theme + '-metric-value');\n    valueEl.style.paddingTop = ((height - this.el().offsetHeight) / 2) + 'px';\n    this.el().querySelector('.' + theme + '-metric').style.height = height + 'px';\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","import { each } from '../../utils/each';\n\nconst defaults = {\n  height: undefined,\n  width: undefined,\n  stickyHeader: true,\n  stickyFooter: false\n};\n\nfunction _generateTableRows(dataset, colWidths, colAligns) {\n  var html = '';\n  for (var i = 0; i < dataset.length; i++) {\n    if (i > 0) {\n      html +=   '<tr>';\n      for (var j = 0; j < dataset[i].length; j++) {\n        html +=   '<td style=\"min-width: '+ (10 * colWidths[j]) +'px; text-align: ' + colAligns[j] + ';\">' + dataset[i][j] + '</td>';\n      }\n      html +=   '</tr>';\n    }\n  }\n  return html;\n}\n\nexport default {\n  render: function(){\n    var dataset = this.data(),\n        el = this.el(),\n        height = (this.height() || defaults.height) - this.el().offsetHeight,\n        theme = this.theme(),\n        width = this.width() || defaults.width;\n\n    var html = '',\n        colAligns = new Array(dataset[0].length),\n        colWidths = new Array(dataset[0].length),\n        fixedHeader;\n\n    var isEmpty = dataset.length === 1 && dataset[0].length === 0;\n    if (isEmpty) {\n      this.message('No data to display');\n      return;\n    }\n\n    // Calculate max column widths\n    each(dataset, function(row){\n      each(row, function(cell, i){\n        if (!colWidths[i]) {\n          colWidths[i] = 0;\n        }\n        colAligns[i] = (typeof cell === 'number') ? 'right' : 'left';\n        colWidths[i] = (String(cell).length > colWidths[i]) ? String(cell).length : colWidths[i];\n      });\n    });\n\n    // Open wrapper\n    html += '<div class=\"' + theme + '-table\" style=\"height: '+(height ? height+'px' : 'auto')+'; width: '+(width ? width+'px' : 'auto')+';\">';\n\n    // Static, scrollable table\n    html +=   '<table class=\"' + theme + '-table-dataset\">';\n    html +=     '<thead>';\n    html +=       '<tr>';\n    for (var i = 0; i < dataset[0].length; i++) {\n      html +=       '<th style=\"width: '+ (10 * colWidths[i]) +'px; text-align: ' + colAligns[i] + ';\">' + dataset[0][i] + '</th>';\n    }\n    html +=       '</tr>';\n    html +=     '</thead>';\n    // Table data\n    html +=     '<tbody>';\n    html +=     _generateTableRows.bind(this, dataset, colWidths, colAligns)();\n    html +=     '</tbody>';\n    html +=   '</table>';\n\n    // Fixed table (header)\n    html +=   '<table class=\"' + theme + '-table-fixed-header\">';\n    html +=     '<thead>';\n    html +=       '<tr>';\n    for (var i = 0; i < dataset[0].length; i++) {\n      html +=       '<th style=\"min-width: '+ (10 * colWidths[i]) +'px; text-align: ' + colAligns[i] + ';\">' + dataset[0][i] + '</th>';\n    }\n    html +=       '</tr>';\n    html +=     '</thead>';\n    html +=   '</table>';\n\n    // Close wrapper\n    html += '</div>';\n\n    // Inject HTML string\n    el.querySelector('.' + theme + '-rendering').innerHTML = html;\n\n    fixedHeader = el.querySelector('.' + theme + '-table-fixed-header');\n    el.querySelector('.' + theme + '-table').onscroll = function(e){\n      fixedHeader.style.top = e.target.scrollTop + 'px';\n    };\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    var el = this.el().querySelector('.' + this.theme() + '-table')\n    if (el && el.onscroll) {\n      el.onscroll = undefined;\n    }\n  }\n};\n","export default {\n  render: function(){\n    var html = '',\n        artifacts = this.view._artifacts.spinner = {},\n        height = this.height() || 35,\n        offsetPadding = (height - 35) / 2,\n        prefixes = ['webkit', 'Moz', 'ms', 'O'],\n        radius = this.view._artifacts.radius = 0,\n        spinner;\n\n    // Build DOM element\n    html += '<div class=\"' + this.theme() + '\">';\n    html +=   '<div class=\"keen-spinner-container\" style=\"height: ' + height + 'px; padding-top: ' + offsetPadding + 'px;\">';\n    html +=     '<div class=\"keen-spinner-indicator\"></div>';\n    html +=   '</div>';\n    html += '</div>';\n    this.el().innerHTML = html;\n\n    spinner = this.el().querySelector('.keen-spinner-indicator');\n    if (spinner.style.animationName === undefined) {\n      radius = 0;\n      artifacts.interval = setInterval(function(){\n        radius = (radius === 350) ? 0 : radius + 10;\n        for (var i = 0; i < prefixes.length; i++) {\n          spinner.style[prefixes[i]] = 'rotate(' + artifacts.radius + 'deg)';\n        }\n      }, 15);\n    }\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    if (this.view._artifacts.spinner) {\n      if (this.view._artifacts.spinner.interval) {\n        clearInterval(this.view._artifacts.spinner.interval);\n      }\n      this.view._artifacts.spinner.radius = 0;\n      try {\n        delete this.view._artifacts.spinner;\n      }\n      catch (e) {\n        this.view._artifacts.spinner = undefined;\n      }\n    }\n    this.el().innerHTML = '';\n  }\n};\n","import c3 from 'c3';\nimport d3 from 'd3';\n\nimport { each } from '../utils/each';\nimport { extend } from '../utils/extend';\nimport { extendDeep } from '../utils/extend-deep';\nimport isDateString from '../utils/assert-date-string';\nimport c3DefaultDateFormat from './c3/extensions/default-date-format';\nimport c3PaginatingLegend from './c3/extensions/paginating-legend';\nimport c3TooltipContents from './c3/extensions/tooltip-contents';\n\nimport message from './default/message';\nimport metric from './default/metric';\nimport table from './default/table';\nimport spinner from './default/spinner';\n\nconst types = {\n  message,\n  metric,\n  table,\n  spinner,\n};\n\nexport default function(lib) {\n  var timer, delay;\n  bindResizeListener(function(){\n    if (timer) {\n      clearTimeout(timer);\n    }\n    delay = (lib.visuals.length > 12) ? 1000 : 250;\n    timer = setTimeout(function(){\n      each(lib.visuals, function(chart){\n        if (chart.view._artifacts.c3) {\n          chart.view._artifacts.c3.resize();\n        }\n      });\n    }, delay);\n  });\n\n  defineC3();\n  return types;\n};\n\nfunction defineC3(){\n  var c3Types = [\n    // Standard types\n    'area',\n    'area-spline',\n    'area-step',\n    'bar',\n    'donut',\n    'gauge',\n    'line',\n    'pie',\n    'step',\n    'spline',\n\n    // Horizontal variant types\n    'horizontal-area',\n    'horizontal-area-spline',\n    'horizontal-area-step',\n    'horizontal-bar',\n    'horizontal-line',\n    'horizontal-step',\n    'horizontal-spline'\n  ];\n\n  function getDefaultOptions(){\n    var DEFAULT_OPTIONS,\n        ENFORCED_OPTIONS,\n        options;\n\n    DEFAULT_OPTIONS = {\n      axis: {},\n      color: {},\n      data: {\n        order: null\n      },\n      legend: {\n        position: 'right',\n        show: true\n      },\n      padding: {},\n      point: {\n        focus: {\n          expand: {\n            enabled: false\n          }\n        },\n        r: 2,\n        show: true\n      },\n      tooltip: {},\n      transition: {\n        duration: 0\n      }\n    };\n\n    ENFORCED_OPTIONS = {\n      bindto: this.el().querySelector('.' + this.theme() + '-rendering'),\n      color: {\n        pattern: this.colors()\n      },\n      data: {\n        colors: extend({}, this.colorMapping()),\n        columns: [],\n        type: this.type().replace('horizontal-', '')\n      },\n      size: {\n        height: this.height() ? this.height() - this.el().offsetHeight : 400,\n        width: this.width()\n      },\n      tooltip: {}\n    };\n\n    // Apply chartOptions\n    options = extendDeep({}, DEFAULT_OPTIONS, this.chartOptions());\n\n    // Apply enforced options\n    options = extendDeep(options, ENFORCED_OPTIONS);\n    options.color.pattern = ENFORCED_OPTIONS.color.pattern;\n    options.data.colors = ENFORCED_OPTIONS.data.colors;\n    options.data.columns = ENFORCED_OPTIONS.data.columns;\n\n    return options;\n  }\n\n  each(c3Types, function(type, index) {\n    types[type] = {\n      render: function(){\n        var options = getDefaultOptions.call(this);\n\n        if (this.data()[0].length === 1 || this.data().length === 1) {\n          this.message('No data to display');\n          return;\n        }\n\n        if (type === 'gauge') {\n          // Accommodate a neat bug:\n          options.legend.position = 'bottom';\n          options.data.columns = [[\n            this.title() || this.data()[1][0],\n            this.data()[1][1]\n          ]];\n        }\n        else if (type === 'pie' || type === 'donut') {\n          options.data.columns = this.data().slice(1);\n        }\n        else {\n\n          // Apply formatting for horizontal variant types\n          if (type.indexOf('horizontal-') > -1) {\n            options.axis.rotated = type.indexOf('horizontal-') > -1;\n          }\n\n          if (isDateString(this.data()[1][0])) {\n            // TIMESERIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'timeseries';\n            options.axis.x.tick = options.axis.x.tick || {\n              format: this.dateFormat() || c3DefaultDateFormat(this.data()[1][0], this.data()[2] ? this.data()[2][0] : this.data()[1][0]),\n              culling: { max: 5 }\n            };\n\n            options.data.columns[0] = [];\n            each(this.dataset.selectColumn(0), function(cell, i){\n              if (i > 0) {\n                cell = new Date(cell);\n              }\n              options.data.columns[0][i] = cell;\n            });\n            options.data.columns[0][0] = 'x';\n            options.data.x = 'x';\n            if (this.stacked() && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n          else {\n            // CATEGORIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'category';\n            options.axis.x.categories = this.dataset.selectColumn(0).slice(1);\n            if (this.stacked() && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n\n          if (this.data()[0].length === 2) {\n            options.legend.show = false;\n          }\n\n          each(this.data()[0], function(cell, i){\n            if (i > 0) {\n              options.data.columns.push(this.dataset.selectColumn(i));\n            }\n          }.bind(this));\n\n        }\n\n        if (options.legend.show === true\n          && options.legend.position === 'right'\n            && ['gauge'].indexOf(type.replace('horizontal-', ''))) {\n\n                // Apply custom color handling\n                options.data.color = c3CustomDataMapping.bind(this);\n\n                // Apply custom tooltip\n                options.tooltip = {\n                  contents: c3TooltipContents,\n                  format: {\n                    value: c3CustomTooltipFiltering.bind(this)\n                  }\n                };\n\n                options.legend.show = false;\n                var paddedWidth = this.el().querySelector('.' + this.theme() + '-rendering').offsetWidth - 100;\n                options.size.width = options.size.width || paddedWidth;\n                this.el().querySelector('.' + this.theme() + '-rendering').setAttribute('style', 'margin-right: 120px;');\n\n                // Render artifacts\n                this.view._artifacts['c3'] = c3.generate(options);\n                c3PaginatingLegend.call(this, options.data.columns);\n        }\n        else {\n          options.legend.show = false;\n          this.view._artifacts['c3'] = c3.generate(options);\n        }\n\n      },\n      update: function(){\n        // no special update handling\n        this.render();\n      },\n      destroy: function(){\n        if (this.view._artifacts['c3']) {\n          this.view._artifacts['c3'].destroy();\n          this.view._artifacts['c3'] = null;\n        }\n      }\n    };\n  });\n}\n\nfunction c3CustomDataMapping(color, d) {\n  var scope;\n  if (this.view._artifacts.pagination\n    && this.type() !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          scope = this.view._artifacts.pagination.labels;\n          if ((d.id && scope.indexOf(d.id) > -1)\n            || (d && !d.id && scope.indexOf(d) > -1)) {\n              return color;\n          }\n          else {\n            if (this.type() === 'donut' || this.type() === 'pie') {\n              return 'rgba(0,0,0,.1)';\n            }\n            else {\n              return 'rgba(0,0,0,.07)';\n            }\n          }\n  }\n  else {\n    return color;\n  }\n}\n\nfunction c3CustomTooltipFiltering(value, ratio, id, index) {\n  var scope;\n  if (this.view._artifacts.pagination\n    && this.type() !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          scope = this.view._artifacts.pagination.labels;\n          if (scope.indexOf(id) > -1) {\n            return value;\n          }\n  }\n  else {\n    return value;\n  }\n}\n\nfunction bindResizeListener(fn){\n  if ('undefined' === typeof window) return;\n  window.onresize = window.resize = function(){};\n  if (window.addEventListener) {\n    window.addEventListener('resize', fn, true);\n  }\n  else if (window.attachEvent) {\n    window.attachEvent('onresize', fn);\n  }\n}\n","import Dataset from './dataset';\nimport { extend } from './utils/extend';\nimport { stripHtmlTags } from './utils/strip-html-tags';\n\nexport default function (data) {\n  if (!arguments.length) return this.dataset.data();\n  if (data instanceof Dataset) {\n    this.dataset = data;\n    return this;\n  }\n  else {\n    return parseResponse.call(this, data);\n  }\n};\n\nfunction parseResponse(response) {\n  var dataset,\n      indexBy,\n      meta,\n      parser,\n      parserArgs = [],\n      query,\n      selectedParser,\n      title,\n      type;\n\n  indexBy = this.indexBy() ? this.indexBy() : 'timestamp.start';\n  meta = response.metadata || {};\n  query = (typeof response.query !== 'undefined') ? response.query : {};\n\n  // Ensure all required params are present\n  query = extend({\n    analysis_type: null,\n    event_collection: null,\n    filters: [],\n    group_by: null,\n    interval: null,\n    timeframe: null,\n    timezone: null\n  }, query);\n\n  if (query.analysis_type === 'funnel') {\n    parser = 'funnel';\n  }\n  else if (query.analysis_type === 'extraction'){\n    parser = 'extraction';\n  }\n  else if (query.analysis_type === 'select_unique') {\n    if (!query.group_by && !query.interval) {\n      parser = 'list';\n    }\n    // else { Not supported }\n  }\n  else if (query.analysis_type) {\n    if (!query.group_by && !query.interval) {\n      parser = 'metric';\n    }\n    else if (query.group_by && !query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-metric';\n        parserArgs.push(query.group_by);\n      }\n      else {\n        parser = 'grouped-metric';\n      }\n    }\n    else if (query.interval && !query.group_by) {\n      parser = 'interval';\n      parserArgs.push(indexBy);\n    }\n    else if (query.group_by && query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-interval';\n        parserArgs.push(query.group_by);\n        parserArgs.push(indexBy);\n      }\n      else {\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy);\n      }\n    }\n  }\n\n  if (!parser) {\n\n    // Metric\n    // -------------------------------\n    if (typeof response.result === 'number'){\n      parser = 'metric';\n    }\n\n    // Everything else\n    // -------------------------------\n    if (response.result instanceof Array && response.result.length > 0){\n\n      // Interval w/ single value\n      // -------------------------------\n      if (response.result[0].timeframe && (typeof response.result[0].value == 'number' || response.result[0].value == null)) {\n        parser = 'interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Static GroupBy\n      // -------------------------------\n      if (typeof response.result[0].result == 'number'){\n        parser = 'grouped-metric';\n      }\n\n      // Grouped Interval\n      // -------------------------------\n      if (response.result[0].value instanceof Array){\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Funnel\n      // -------------------------------\n      if (typeof response.result[0] === 'number'\n        && typeof response.steps !== 'undefined'){\n          parser = 'funnel';\n          // Move steps into query object\n          query.steps = response.steps;\n      }\n\n      // Select Unique\n      // -------------------------------\n      if ((typeof response.result[0] === 'string' || typeof response.result[0] == 'number') && typeof response.steps === 'undefined'){\n        parser = 'list';\n      }\n\n      // Extraction\n      // -------------------------------\n      if (!parser) {\n        parser = 'extraction';\n      }\n    }\n  }\n\n  // Set title from saved query body, or create a default title\n  if (!this.title()) {\n    if (meta.display_name) {\n      title = meta.display_name;\n    }\n    else {\n      title = getDefaultTitle(query);\n    }\n    this.title(title);\n  }\n\n  // Set type from saved query body, or use a default type\n  if (!this.type()) {\n    if (meta.visualization && meta.visualization.chart_type) {\n      type = meta.visualization.chart_type;\n    }\n    else {\n      type = getDefaultType(parser);\n    }\n    this.type(type);\n  }\n\n  // Define the appropriate parser\n  selectedParser = Dataset.parser.apply(this, [parser].concat(parserArgs));\n\n  // Parse the response with augmented query body\n  dataset = selectedParser(extend(response, { 'query': query }));\n\n  // Set true dates for 'interval' data\n  if (parser.indexOf('interval') > -1) {\n    dataset.updateColumn(0, function(value, i){\n      return new Date(value);\n    });\n  }\n\n  dataset.updateRow(0, function(value, i){\n    return stripHtmlTags(value);\n  });\n\n  this.dataset = dataset;\n\n  return this;\n}\n\nfunction getDefaultTitle(query) {\n  var analysis = query.analysis_type ? query.analysis_type.replace('_', ' ') : '',\n      title;\n\n  title = analysis.replace( /\\b./g, function(a){\n    return a.toUpperCase();\n  });\n\n  if (query.event_collection) {\n    title += ' - ' + query.event_collection;\n  }\n  return title;\n}\n\nfunction getDefaultType(parser) {\n  let type;\n  switch (parser) {\n    case 'metric':\n      type = 'metric';\n      break;\n    case 'interval':\n      type = 'area';\n      break;\n    case 'grouped-metric':\n    case 'double-grouped-metric':\n      type = 'bar';\n      break;\n    case 'grouped-interval':\n    case 'double-grouped-interval':\n      type = 'line';\n      break;\n    case 'funnel':\n      type = 'horizontal-bar';\n      break;\n    case 'list':\n    case 'extraction':\n    default:\n      type = 'table';\n  }\n  return type;\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--6-1!../../node_modules/postcss-loader/lib/index.js!./blank.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--6-1!../../node_modules/postcss-loader/lib/index.js!./blank.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--6-1!../../node_modules/postcss-loader/lib/index.js!./blank.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","import data from './data';\nimport { Dataset } from './dataset';\n// Utils\nimport { each } from './utils/each';\nimport isDateString from './utils/assert-date-string';\nimport { stripHtmlTags } from './utils/strip-html-tags';\nimport { escapeHtml } from './utils/escape-html';\nimport libraries from './libraries';\n\nimport './style/keen-dataviz.css';\n\n// Constructor\nexport const Dataviz = function () {\n  if (this instanceof Dataviz === false) {\n    return new Dataviz();\n  }\n\n  this.dataset = new Dataset();\n  this.view = {\n    _prepared: false,\n    _rendered: false,\n    _artifacts: { /* state bin */ },\n\n    chartOptions: {},\n    colors: [\n      '#00bbde', '#fe6672', '#eeb058', '#8a8ad6', '#ff855c', '#00cfbb',\n      '#5a9eed', '#73d483', '#c879bb', '#0099b6', '#d74d58', '#cb9141',\n      '#6b6bb6', '#d86945', '#00aa99', '#4281c9', '#57b566', '#ac5c9e',\n      '#27cceb', '#ff818b', '#f6bf71', '#9b9be1', '#ff9b79', '#26dfcd',\n      '#73aff4', '#87e096', '#d88bcb',\n    ],\n    colorMapping: {},\n    dateFormat: undefined,\n    el: undefined,\n    height: undefined,\n    indexBy: 'timeframe.start',\n    labels: [],\n    labelMapping: {},\n    library: 'default',\n    notes: undefined,\n    sortGroups: undefined,\n    sortIntervals: undefined,\n    stacked: false,\n    theme: 'keen-dataviz',\n    title: undefined,\n    type: undefined,\n    width: undefined,\n  };\n\n  Dataviz.visuals.push(this);\n};\n\nDataviz.libraries = { default: {} };\nif (typeof window !== 'undefined') {\n  Dataviz.libraries.default = libraries(Dataviz);\n}\nDataviz.visuals = [];\n\nDataviz.register = function (name, actions) {\n  Dataviz.libraries[name] = Dataviz.libraries[name] || {};\n  each(actions, function(method, key){\n    Dataviz.libraries[name][key] = method;\n  });\n};\n\nDataviz.find = function(target){\n    if (!arguments.length) return Dataviz.visuals;\n    var el = target.nodeName ? target : document.querySelector(target),\n        match = null;\n    each(Dataviz.visuals, function(visual){\n      if (el == visual.el()){\n        match = visual;\n        return false;\n      }\n    });\n    return match;\n};\n\n\n  // Prototype\n  // ------------\n\nDataviz.prototype.attributes = function(obj){\n    if (!arguments.length) return this.view;\n    var view = this.view;\n    each(obj, function(prop, key){\n      // Handle deprecated property names\n      if (key === 'chartType') {\n        key = 'type';\n      }\n      view[key] = prop;\n    });\n    return this;\n};\n\nDataviz.prototype.call = function(fn){\n    fn.call(this);\n    return this;\n};\n\nDataviz.prototype.chartOptions = function(obj){\n    var self = this;\n    if (!arguments.length) return this.view.chartOptions;\n    if (obj === null) {\n      this.view.chartOptions = {};\n    }\n    else if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        self.view.chartOptions[key] = (value ? value : null);\n      });\n    }\n    return this;\n};\n\nDataviz.prototype.colors = function(arr){\n    if (!arguments.length) return this.view.colors;\n    this.view.colors = (arr instanceof Array ? arr : []);\n    return this;\n};\n\nDataviz.prototype.colorMapping = function(obj){\n    var self = this;\n    if (!arguments.length) return this.view.colorMapping;\n    if (obj === null) {\n      this.view.colorMapping = {};\n    }\n    else if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        self.view.colorMapping[key] = (value ? value : null);\n      });\n    }\n    return this;\n};\n\nDataviz.prototype.data = data;\n\nDataviz.prototype.dateFormat = function(val){\n    if (!arguments.length) return this.view.dateFormat;\n    if (typeof val === 'string' || typeof val === 'function') {\n      this.view.dateFormat = val;\n    }\n    else {\n      this.view.dateFormat = undefined;\n    }\n    return this;\n};\n\nDataviz.prototype.destroy = function(){\n    var library = this.library(),\n        type = this.type(),\n        element = this.el();\n\n    // Call destroy method if present\n  if (Dataviz.libraries[library]\n      && Dataviz.libraries[library][type]){\n        Dataviz.libraries[library][type].destroy.call(this);\n  }\n\n    // Clear rendered artifacts, state bin\n    if (element) {\n      element.innerHTML = '';\n    }\n    this.view._prepared = false;\n    this.view._rendered = false;\n    this.view._artifacts = {};\n    return this;\n};\n\nDataviz.prototype.el = function(target){\n    var self = this;\n    if (!arguments.length) return this.view.el;\n    domReady(function(){\n      if (target && target !== null) {\n        if (target.nodeName) {\n          self.view.el = target;\n        }\n        else if (document.querySelector) {\n          self.view.el = document.querySelector(target);\n        }\n      }\n      else {\n        self.view.el = undefined;\n      }\n    });\n    return this;\n};\n\nDataviz.prototype.height = function(num){\n    if (!arguments.length) return this.view['height'];\n    this.view['height'] = (!isNaN(parseInt(num)) ? parseInt(num) : null);\n    return this;\n};\n\n// IMPORTANT: Must be run before data parsing\nDataviz.prototype.indexBy = function(str){\n    if (!arguments.length) return this.view.indexBy;\n    this.view.indexBy = (str ? String(str) : 'timeframe.start');\n    return this;\n};\n\nDataviz.prototype.labels = function(arr){\n    if (!arguments.length) return this.view.labels;\n    this.view.labels = (arr instanceof Array ? arr : []);\n\n    // Write labels\n    if (this.data()[0].length === 2 && !isDateString(this.data()[1][0])) {\n      this.dataset.updateColumn(0, function(value, index){\n        if (this.view.labels[index-1]) {\n          return stripHtmlTags(String(this.view.labels[index-1]));\n        }\n        return stripHtmlTags(value);\n      }.bind(this));\n    }\n    else {\n      this.dataset.updateRow(0, function(value, index){\n        if (index > 0 && this.view.labels[index-1]) {\n          return stripHtmlTags(String(this.view.labels[index-1]));\n        }\n        return stripHtmlTags(value);\n      }.bind(this));\n    }\n    return this;\n};\n\nDataviz.prototype.labelMapping = function(obj){\n    if (!arguments.length) return this.view.labelMapping;\n    if (obj === null) {\n      this.view.labelMapping = {};\n    }\n    else if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        this.view.labelMapping[key] = (value ? value : null);\n      }.bind(this));\n}\n\n    // Write labels\n    if (this.data()[0].length === 2 && !isDateString(this.data()[1][0])) {\n      this.dataset.updateColumn(0, function(value){\n        if (this.view.labelMapping[value]) {\n          return stripHtmlTags(String(this.view.labelMapping[value]));\n        }\n        return stripHtmlTags(value);\n      }.bind(this));\n    }\n    else {\n      this.dataset.updateRow(0, function(value){\n        if (this.view.labelMapping[value]) {\n          return stripHtmlTags(String(this.view.labelMapping[value]));\n        }\n        return stripHtmlTags(value);\n      }.bind(this));\n    }\n    return this;\n  };\n\nDataviz.prototype.library = function(str){\n    if (!arguments.length) return this.view['library'];\n    this.view['library'] = (str ? String(str) : null);\n    return this;\n};\n\nDataviz.prototype.message = function(){\n    var loader;\n    if (this.view._rendered) {\n      this.destroy();\n    }\n    if (this.el()) {\n      this.el().innerHTML = '';\n      var message = Dataviz.libraries['default'].message;\n      if (message.render) {\n        message.render.apply(this, arguments);\n      }\n    }\n    return this;\n};\n\nDataviz.prototype.notes = function(str){\n    if (!arguments.length) return this.view['notes'];\n    this.view['notes'] = (str ? String(str) : null);\n    return this;\n};\n\nDataviz.prototype.prepare = function(){\n    var self = this, loader;\n\n    if (!this.el()) {\n      throw 'A DOM element is required. Check out the .el() method.';\n      return;\n    }\n\n    domReady(function(){\n      if (self.view._rendered) {\n        self.destroy();\n      }\n      if (self.el()) {\n        self.el().innerHTML = '';\n        loader = Dataviz.libraries['default'].spinner;\n        if (loader.render) {\n          loader.render.call(self);\n        }\n        self.view._prepared = true;\n      }\n    });\n    return this;\n};\n\nDataviz.prototype.render = function(){\n    var self = this,\n        loader = Dataviz.libraries['default'].spinner,\n        library = this.library(),\n        type = this.type(),\n        element = this.el();\n\n    if (!this.el()) {\n      this.message('A DOM element is required. Check out the .el() method.');\n      throw 'A DOM element is required. Check out the .el() method.';\n      return;\n    }\n\n    if (!this.type()) {\n      this.message('A chart type is required. Check out the .type() method.');\n      throw 'A chart type is required. Check out the .type() method.';\n      return;\n    }\n\n    domReady(function(){\n      if (self.view._prepared && loader.destroy) {\n        loader.destroy.apply(self, arguments);\n      }\n      self.el().innerHTML = '';\n\n      if (Dataviz.libraries[library] === 'undefined'){\n        // Error: Unregistered library\n        self.message('Incorrect library');\n        throw 'Incorrect library';\n        return;\n      }\n      else {\n        if (typeof Dataviz.libraries[library][type] === 'undefined') {\n          self.message('Incorrect chart type');\n          throw 'Incorrect chart type';\n          return;\n        }\n        else {\n          buildDomWrapper(self.el(), {\n            notes: self.notes(),\n            theme: self.theme(),\n            title: self['title']()\n          });\n          Dataviz.libraries[library][type].render.call(self);\n          self.view._rendered = true;\n        }\n      }\n    });\n    return this;\n};\n\nDataviz.prototype.sortGroups = function(str){\n    if (!arguments.length) return this.view.sortGroups;\n    this.view.sortGroups = (str ? String(str) : null);\n\n    // Sort groups\n    if (this.view.sortGroups && this.data().length > 1) {\n      if (isDateString(this.data()[1][0])) {\n        this.dataset.sortColumns(this.view.sortGroups, this.dataset.getColumnSum);\n      }\n      else {\n        this.dataset.sortRows(this.view.sortGroups, this.dataset.getRowSum);\n      }\n    }\n    return this;\n};\n\nDataviz.prototype.sortIntervals = function(str){\n    if (!arguments.length) return this.view.sortIntervals;\n    this.view.sortIntervals = (str ? String(str) : null);\n    if (this.view.sortIntervals) {\n      this.dataset.sortRows(this.view.sortIntervals);\n    }\n    return this;\n};\n\nDataviz.prototype.stacked = function(bool){\n    if (!arguments.length) return this.view['stacked'];\n    this.view['stacked'] = bool ? true : false;\n    return this;\n};\n\nDataviz.prototype.theme = function(str){\n    if (!arguments.length) return this.view.theme;\n    this.view.theme = (str ? String(str) : null);\n    return this;\n};\n\nDataviz.prototype.title = function(str){\n    if (!arguments.length) return this.view['title'];\n    this.view['title'] = (str ? String(str) : null);\n    return this;\n};\n\nDataviz.prototype.type = function(str){\n    if (!arguments.length) return this.view['type'];\n    this.view['type'] = (str ? convertChartTypes(str) : null);\n    return this;\n};\n\nDataviz.prototype.update = function(){\n    var library = this.library(),\n        type = this.type(),\n        element = this.el();\n    if (library && type && element && Dataviz.libraries[library][type].update) {\n      Dataviz.libraries[library][type].update.apply(this, arguments);\n    }\n    return this;\n};\n\nDataviz.prototype.width = function(num){\n    if (!arguments.length) return this.view['width'];\n    this.view['width'] = (!isNaN(parseInt(num)) ? parseInt(num) : null);\n    return this;\n};\n\n  // Deprecations\n  Dataviz.prototype.chartType = Dataviz.prototype.type;\n  Dataviz.prototype.error = Dataviz.prototype.message;\n  Dataviz.prototype.parseRawData = Dataviz.prototype.data;\n  Dataviz.prototype.parseRequest = function(){\n    // this.emit('error', 'This method is no longer supported. Use .data() instead: https://github.com/keen/keen-dataviz.js#data');\n    return this;\n  };\n  Dataviz.prototype.initialize = function(){\n    // this.emit('error', 'This method is no longer supported, and can be omitted as it has no impact');\n    return this;\n  };\n\n  // Private\n  // ------------\n\nfunction buildDomWrapper(el, options) {\n  let html = '';\n  html += '<div class=\"' + options.theme + '\">';\n  if (options['title']) {\n    html += '<div class=\"' + options.theme + '-title\">' + escapeHtml(options['title']) + '</div>';\n  }\n  html += '<div class=\"' + options.theme + '-stage\"><div class=\"' + options.theme + '-rendering\"></div></div>';\n  if (options.notes) {\n    html += '<div class=\"' + options.theme + '-notes\">' + escapeHtml(options.notes) + '</div>';\n  }\n  html += '</div>';\n  el.innerHTML = html;\n}\n\nfunction convertChartTypes(str) {\n  const map = {\n    areachart: 'area',\n    barchart: 'horizontal-bar',\n    columnchart: 'bar',\n    linechart: 'line',\n    piechart: 'pie',\n  };\n  return map[str] || str;\n}\n\nfunction testDom(fn) {\n  if (/in/.test(document.readyState)) {\n    setTimeout(function(){\n      testDom(fn);\n    }, 9);\n  } else {\n    fn();\n  }\n}\n\nfunction domReady(fn) {\n  if (typeof document !== 'undefined' || typeof window === 'undefined') {\n    fn();\n    return;\n  }\n  // Firefox 3.5 shim\n  if (document.readyState == null && document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', function DOMContentLoaded() {\n      document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n      document.readyState = 'complete';\n    }, false);\n    document.readyState = 'loading';\n  }\n  testDom(fn);\n}\n\nif (typeof __KEEN_NO_COMMON_GLOBAL_OBJECT__ === 'undefined') {\n  (function (env) {\n    env.Keen = env.Keen || {};\n    env.Keen.Dataset = Dataset;\n    env.Keen.Dataviz = Dataviz;\n  }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {})\n}\n\nexport { Dataset } from './dataset';\n\nexport default Dataviz;\n"],"sourceRoot":""}