!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3"),require("c3"));else if("function"==typeof define&&define.amd)define(["d3","c3"],e);else{var n="object"==typeof exports?e(require("d3"),require("c3")):e(t.d3,t.c3);for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(window,function(t,e){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";function i(t,e,n){var i;if(!t)return 0;if(n=n||t,t instanceof Array){for(i=0;i<t.length;i++)if(!1===e.call(n,t[i],i,t))return 0}else for(i in t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))return 0;return 1}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function i(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])t[n]=arguments[e][n];return t}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=/["'&<>]/;function r(t){var e,n=""+t,r=i.exec(n);if(!r)return n;var a="",o=0,s=0;for(o=r.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==o&&(a+=n.substring(s,o)),s=o+1,a+=e}return s!==o?a+n.substring(s,o):a}},function(e,n){e.exports=t},function(t,e,n){"use strict";function i(t){return t.replace(/(<([^>]+)>)/gi,"")}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";var i={};n.d(i,"appendColumn",function(){return p}),n.d(i,"appendRow",function(){return f});var r={};n.d(r,"deleteColumn",function(){return v}),n.d(r,"deleteRow",function(){return g});var a={};n.d(a,"filterColumns",function(){return m}),n.d(a,"filterRows",function(){return y});var o={};n.d(o,"insertColumn",function(){return b}),n.d(o,"insertRow",function(){return w});var s={};n.d(s,"selectColumn",function(){return x}),n.d(s,"selectRow",function(){return O});var l={};n.d(l,"methods",function(){return S}),n.d(l,"default",function(){return M});var c={};n.d(c,"sortColumns",function(){return C}),n.d(c,"sortRows",function(){return A});var u={};n.d(u,"updateColumn",function(){return k}),n.d(u,"updateRow",function(){return q});var h=function(t){for(var e=[],n=0;n<t;n++)e.push(null);return e},d=n(0);function p(t,e){var n=this,i=(Array.prototype.slice.call(arguments,2),void 0!==t?t:null);return"function"==typeof e?(n.matrix[0].push(i),Object(d.a)(n.matrix,function(t,i){var r=void 0;i>0&&(void 0===(r=e.call(n,t,i))&&(r=null),n.matrix[i].push(r))})):(!e||e instanceof Array)&&((e=e||[]).length<=n.matrix.length-1?e=e.concat(h(n.matrix.length-1-e.length)):Object(d.a)(e,function(t,i){n.matrix.length-1<e.length&&f.call(n,String(n.matrix.length))}),n.matrix[0].push(i),Object(d.a)(e,function(t,e){n.matrix[e+1][n.matrix[0].length-1]=t})),n}function f(t,e){var n=this,i=(Array.prototype.slice.call(arguments,2),void 0!==t?t:null),r=[];return r.push(i),"function"==typeof e?(Object(d.a)(n.matrix[0],function(t,i){var a=void 0,o=void 0;i>0&&(a=n.selectColumn(i),void 0===(o=e.call(n,a,i))&&(o=null),r.push(o))}),n.matrix.push(r)):(!e||e instanceof Array)&&((e=e||[]).length<=n.matrix[0].length-1?e=e.concat(h(n.matrix[0].length-1-e.length)):Object(d.a)(e,function(t,i){n.matrix[0].length-1<e.length&&p.call(n,String(n.matrix[0].length))}),n.matrix.push(r.concat(e))),n}function v(t){var e=this,n="number"==typeof t?t:this.matrix[0].indexOf(t);return n>-1&&Object(d.a)(e.matrix,function(t,i){e.matrix[i].splice(n,1)}),e}function g(t){var e="number"==typeof t?t:this.selectColumn(0).indexOf(t);return e>-1&&this.matrix.splice(e,1),this}function m(t){var e=this,n=[];return Object(d.a)(e.matrix,function(t,e){n.push([])}),Object(d.a)(e.matrix[0],function(i,r){var a=e.selectColumn(r);(0==r||t.call(e,a,r))&&Object(d.a)(a,function(t,e){n[e].push(t)})}),e.data(n),e}function y(t){var e=this,n=[];return Object(d.a)(e.matrix,function(i,r){(0==r||t.call(e,i,r))&&n.push(i)}),e.data(n),e}function b(t,e,n){var i=this,r=void 0!==e?e:null;return"function"==typeof n?(i.matrix[0].splice(t,0,r),Object(d.a)(i.matrix,function(e,r){var a;r>0&&(void 0===(a=n.call(i,e,r))&&(a=null),i.matrix[r].splice(t,0,a))})):(!n||n instanceof Array)&&((n=n||[]).length<=i.matrix.length-1?n=n.concat(h(i.matrix.length-1-n.length)):Object(d.a)(n,function(t,e){i.matrix.length-1<n.length&&f.call(i,String(i.matrix.length))}),i.matrix[0].splice(t,0,r),Object(d.a)(n,function(e,n){i.matrix[n+1].splice(t,0,e)})),i}function w(t,e,n){var i=this,r=[],a=void 0!==e?e:null;return r.push(a),"function"==typeof n?(Object(d.a)(i.matrix[0],function(t,e){var a=void 0,o=void 0;e>0&&(a=i.selectColumn(e),void 0===(o=n.call(i,a,e))&&(o=null),r.push(o))}),i.matrix.splice(t,0,r)):(!n||n instanceof Array)&&((n=n||[]).length<=i.matrix[0].length-1?n=n.concat(h(i.matrix[0].length-1-n.length)):Object(d.a)(n,function(t,e){i.matrix[0].length-1<n.length&&p.call(i,String(i.matrix[0].length))}),i.matrix.splice(t,0,r.concat(n))),i}function x(t){var e=[],n="number"==typeof t?t:this.matrix[0].indexOf(t);return n>-1&&void 0!==this.matrix[0][n]&&Object(d.a)(this.matrix,function(t,i){e.push(t[n])}),e}function O(t){var e=[],n="number"==typeof t?t:this.selectColumn(0).indexOf(t);return n>-1&&void 0!==this.matrix[n]&&(e=this.matrix[n]),e}var j=n(1),_={};Object(d.a)(S,function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);_["getColumn"+n]=_["getRow"+n]=function(t){return this[e](t,1)}}),_.getColumnLabel=_.getRowIndex=function(t){return t[0]};var S={average:function(t,e,n){var i=t.slice(e||0,n?n+1:t.length),r=0;return Object(d.a)(i,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||(r+=parseFloat(t))}),r/i.length},maximum:function(t,e,n){var i=t.slice(e||0,n?n+1:t.length),r=[];return Object(d.a)(i,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||r.push(parseFloat(t))}),Math.max.apply(Math,r)},minimum:function(t,e,n){var i=t.slice(e||0,n?n+1:t.length),r=[];return Object(d.a)(i,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||r.push(parseFloat(t))}),Math.min.apply(Math,r)},sum:function(t,e,n){var i=t.slice(e||0,n?n+1:t.length),r=0;return Object(d.a)(i,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||(r+=parseFloat(t))}),r}};Object(j.a)(S,_);var M={methods:S};function C(t,e){var n=this,i=this.matrix[0].slice(1),r=[],a=e||S.getColumnLabel;return Object(d.a)(i,function(t,e){r.push(n.selectColumn(e+1).slice(0))}),r.sort(function(e,i){var r=a.call(n,e)>a.call(n,i);return r?"asc"===t?1:-1:r?0:"asc"===t?-1:1}),Object(d.a)(r,function(t,e){n.deleteColumn(e+1).insertColumn(e+1,t[0],t.slice(1))}),n}function A(t,e){var n=this,i=this.matrix.slice(0,1),r=this.matrix.slice(1),a=e||S.getRowIndex;return r.sort(function(e,i){var r=a.call(n,e)>a.call(n,i);return r?"asc"===t?1:-1:r?0:"asc"===t?-1:1}),n.data(i.concat(r)),n}function k(t,e){var n=this,i="number"==typeof t?t:this.matrix[0].indexOf(t);return i>-1&&("function"==typeof e?Object(d.a)(n.data(),function(t,r){var a;r>0&&void 0!==(a=e.call(n,t[i],r,t))&&(n.matrix[r][i]=a)}):(!e||e instanceof Array)&&((e=e||[]).length<=n.data().length-1?e=e.concat(h(n.data().length-1-e.length)):Object(d.a)(e,function(t,i){n.matrix.length-1<e.length&&f.call(n,String(n.matrix.length))}),Object(d.a)(e,function(t,e){n.matrix[e+1][i]=t}))),n}function q(t,e){var n=this,i="number"==typeof t?t:this.selectColumn(0).indexOf(t);return i>-1&&("function"==typeof e?Object(d.a)(n.data()[i],function(t,r){var a=n.selectColumn(r),o=e.call(n,t,r,a);void 0!==o&&(n.matrix[i][r]=o)}):(!e||e instanceof Array)&&((e=e||[]).length<=n.matrix[0].length-1?e=e.concat(h(n.matrix[0].length-1-e.length)):Object(d.a)(e,function(t,i){n.matrix[0].length-1<e.length&&p.call(n,String(n.matrix[0].length))}),Object(d.a)(e,function(t,e){n.matrix[i][e+1]=t}))),n}var N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var z=void 0;var R={metric:function(){return function(t){return(new z).set(["Value","Result"],t.result).type("metric")}},interval:function(){var t=Array.prototype.slice.call(arguments);return function(e){var n=(new z).type("interval");return Object(d.a)(e.result,function(e,i){var r=t[0]&&"timeframe.end"===t[0]?e.timeframe.end:e.timeframe.start;n.set(["Result",r],e.value)}),n}},"grouped-metric":function(){return function(t){var e=(new z).type("grouped-metric");return Object(d.a)(t.result,function(t,n){var i;Object(d.a)(t,function(t,e){"result"!==e&&(i=e)}),e.set(["Result",String(t[i])],t.result)}),e}},"grouped-interval":function(){var t=Array.prototype.slice.call(arguments);return function(e){var n=(new z).type("grouped-interval");return Object(d.a)(e.result,function(e,i){var r=t[0]&&"timeframe.end"===t[0]?e.timeframe.end:e.timeframe.start;e.value.length?Object(d.a)(e.value,function(t,e){var i;Object(d.a)(t,function(t,e){"result"!==e&&(i=e)}),n.set([String(t[i]),r],t.result)}):n.appendRow(r)}),n}},"double-grouped-metric":function(){var t=Array.prototype.slice.call(arguments);if(!t[0])throw"Requested parser requires a sequential list (array) of properties to target as a second argument";return function(e){var n=(new z).type("double-grouped-metric");return Object(d.a)(e.result,function(e,i){var r=e[t[0][0]]+" "+e[t[0][1]];n.set(["Result",r],e.result)}),n}},"double-grouped-interval":function(){var t=Array.prototype.slice.call(arguments);if(!t[0])throw"Requested parser requires a sequential list (array) of properties to target as a second argument";return function(e){var n=(new z).type("double-grouped-interval");return Object(d.a)(e.result,function(e,i){var r=t[1]&&"timeframe.end"===t[1]?e.timeframe.end:e.timeframe.start;Object(d.a)(e.value,function(e,i){var a=e[t[0][0]]+" "+e[t[0][1]];n.set([a,r],e.result)})}),n}},funnel:function(){return function(t){var e,n,i;return void 0!==t.steps&&void 0!==t.result&&t.result instanceof Array?(e=t.result,n=t.steps):void 0!==t.result.steps&&void 0!==t.result.result&&t.result.result instanceof Array&&(e=t.result.result,n=t.result.steps),(i=(new z).type("funnel")).appendColumn("Step Value"),Object(d.a)(e,function(t,e){void 0!==n&&n[e]&&i.appendRow(String(n[e].event_collection),[t])}),i}},list:function(){return function(t){var e=(new z).type("list");return Object(d.a)(t.result,function(t,n){e.set(["Result",String(n+1)],t)}),e}},extraction:function(){return function(t){var e=(new z).type("extraction");return Object(d.a)(t.result,function(t,n){Object(d.a)(function t(e){var n={};for(var i in e)if(e.hasOwnProperty(i))if("object"==N(e[i])&&null!==e[i]){var r=t(e[i]);for(var a in r)r.hasOwnProperty(a)&&(n[i+"."+a]=r[a])}else n[i]=e[i];return n}(t),function(t,i){e.set([i,String(n+1)],t)})}),e.deleteColumn(0),e}}};n.d(e,"a",function(){return L});var L=function t(){if(this instanceof t==!1)return new t;this.matrix=[["Index"]],this.meta={type:void 0}};L.prototype.data=function(t){return arguments.length?(this.matrix=t instanceof Array?t:null,this):this.matrix},L.prototype.set=function(t,e){if(arguments.length<2||t.length<2)throw Error("Incorrect arguments provided for #set method");var n="number"==typeof t[0]?t[0]:this.matrix[0].indexOf(t[0]),i="number"==typeof t[1]?t[1]:x.call(this,0).indexOf(t[1]),r=x.call(this,t[0]),a=O.call(this,t[1]);return r.length<1&&(p.call(this,String(t[0])),n=this.matrix[0].length-1),a.length<1&&(f.call(this,String(t[1])),i=this.matrix.length-1),this.matrix[i][n]=e,this},L.prototype.type=function(t){return arguments.length?(this.meta.type=t?String(t):void 0,this):this.meta.type},Object(j.a)(L.prototype,i),Object(j.a)(L.prototype,r),Object(j.a)(L.prototype,a),Object(j.a)(L.prototype,o),Object(j.a)(L.prototype,s),Object(j.a)(L.prototype,c),Object(j.a)(L.prototype,u),Object(j.a)(L.prototype,l),L.parser=(z=L,function(t){var e=Array.prototype.slice.call(arguments,1);if(R[t])return R[t].apply(this,e);throw"Requested parser does not exist"});e.b=L},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=function(t){return"object"===(void 0===t?"undefined":i(t))?function(t){return null!==t&&"function"==typeof t.getTime&&!isNaN(t.getTime())}(t):"string"==typeof t&&function(t){return/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i.test(t)}(t)}},function(t,n){t.exports=e},function(t,e,n){"use strict";var i=n(7),r=n.n(i),a=n(3),o=n.n(a),s=n(0),l=n(1),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function u(t){for(var e=1;e<arguments.length;e++)Object(s.a)(arguments[e],function(e,n){void 0!==t[n]&&void 0!==e&&"object"===c(t[n])&&"object"===(void 0===e?"undefined":c(e))&&null!==t[n]&&null!==e?u(t[n],e):t[n]=e});return t}var h=n(6),d=function(t,e){var n=Math.abs(new Date(t).getTime()-new Date(e).getTime()),i=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return n>=24192e5?function(t){var e=new Date(t);return i[e.getMonth()]+" "+e.getFullYear()}:n>=864e5?function(t){var e=new Date(t);return i[e.getMonth()]+" "+e.getDate()}:n>=36e5?"%I:%M %p":"%I:%M:%S %p"},p=function(t){var e=this,n=this.view._artifacts.c3,i=[],r=this.el().querySelector("."+this.theme()+"-rendering"),a=120,s=this.view._artifacts.pagination={hidden:[],labels:[],position:0,range:Math.round((r.offsetHeight-78)/20),total:0};"donut"!==this.type()&&"pie"!==this.type()||(s.range=s.range>=5?5:s.range);for(var l=0;l<t.length;l++)"x"===t[l][0]||Object(h.a)(t[l][1])||i.push(t[l][0]);var c=o.a.select(r).append("svg").attr({class:"keen-c3-legend",height:r.offsetHeight-10,width:a}).style({right:-a+"px",top:"10px"}),u=c.append("g").attr("class","keen-c3-legend-items"),d=20*s.range,p=c.append("g").attr({class:"keen-c3-legend-pagination",transform:function(){return"translate(2, "+d+")"}});function f(){s.labels=i.slice(s.position,s.position+s.range),s.total=i.length,function(){u.selectAll("g").remove();var t=u.selectAll("g").data(s.labels);t.enter().append("g").attr("transform",function(t,e){return"translate(0, "+20*e+")"}).attr("data-id",function(t){return t}).style("opacity",function(t){var e=s.hidden.indexOf(t);return e<0?1:.35}).each(function(t){o.a.select(this).append("text").attr({"font-size":12,"pointer-events":"none",x:15,y:9}).text(t).text(function(t){return o.a.select(this).node().getBBox().width>105?t.length<=15?t:t.substring(0,12)+"...":t}),o.a.select(this).append("rect").attr({height:14,width:110,x:0,y:0}).style({cursor:"pointer","fill-opacity":0}),o.a.select(this).append("rect").attr({fill:n.color(t),height:10,"pointer-events":"none",rx:5,ry:5,width:10,x:0,y:0})}).on("mouseover",function(t,e){n.focus(t),t.length>15&&o.a.select(r).append("div").attr("class","keen-c3-legend-label-overlay").style({"max-width":"75%",right:-a+"px",top:5+20*(e+1)+"px"}).html(t).append("div").attr("class","keen-c3-legend-label-overlay-pointer")}).on("mouseout",function(t){n.revert(),o.a.select(e.el().querySelector("."+e.theme()+"-rendering .keen-c3-legend-label-overlay")).remove()}).on("click",function(t){o.a.select(this).style("opacity",function(){var e=s.hidden.indexOf(t);return e<0?(s.hidden.push(t),.35):(s.hidden.splice(e,1),1)}),n.toggle(t)}),t.exit().remove()}.call(e,s.labels),s.total>s.range&&function(){p.selectAll("g").remove(),p.selectAll("g").data([{direction:"reverse",path_d:"M0 10 L10 0 L20 10 Z"},{direction:"forward",path_d:"M0 0 L10 10 L20 0 Z"}]).enter().append("g").attr("transform",function(t,e){return"translate("+20*e+", 0)"}).each(function(t){o.a.select(this).append("path").attr("d",function(t){return t.path_d}).style({cursor:"pointer",fill:"#D7D7D7",stroke:"none"}).on("mouseover",function(t){o.a.select(this).style("fill","#4D4D4D")}).on("mouseout",function(t){o.a.select(this).style("fill","#D7D7D7")}).on("click",function(t){"forward"===t.direction?s.position+s.range<s.total&&(s.position=s.position+s.range):s.position-s.range>=0&&(s.position=s.position-s.range),f(),document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()})})}.call(e),n.resize()}f()},f=n(2),v=function(t,e,n,i){var r,a,o,s,l,c,u,h;o=this.config.tooltip_format_name||function(t){return t},c=this.config.tooltip_format_title||e,h=this.config.tooltip_format_value||n;for(var d=0;d<t.length;d++)t[d]&&(t[d].value||0===t[d].value)&&(s||(l=c?c(t[d].x):t[d].x,s="<table class='"+this.CLASS.tooltip+"'>"+(l||0===l?"<tr><th colspan='2'>"+Object(f.a)(l)+"</th></tr>":"")),a=o(t[d].name),u=h(t[d].value,t[d].ratio,t[d].id,t[d].index),r=this.levelColor?this.levelColor(t[d].value):i(t[d].id),u&&(s+="<tr class='"+this.CLASS.tooltipName+"-"+t[d].id+"'>",s+="<td class='name'><span style='background-color:"+r+"'></span>"+Object(f.a)(a)+"</td>",s+="<td class='value'>"+Object(f.a)(u)+"</td>",s+="</tr>"));return s+"</table>"};var g={height:void 0,width:void 0,stickyHeader:!0,stickyFooter:!1};var m={message:{render:function(t){var e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("span"),r=this.height()||140,a=document.createElement("div"),o=document.createElement("div");e.className=this.theme(),n.className=this.theme()+"-message",n.style.width=this.width()+"px",a.className=this.theme()+"-title",a.innerHTML=Object(f.a)(this.title()||""),o.className=this.theme()+"-notes",o.innerHTML=Object(f.a)(this.notes()||""),i.innerHTML=Object(f.a)(t)||"",n.appendChild(i),e.appendChild(a),e.appendChild(n),e.appendChild(o),this.el().innerHTML="",this.el().appendChild(e);var s=r-a.offsetHeight-o.offsetHeight;n.style.height=s+"px",n.style.paddingTop=s/2-12+"px"},update:function(){this.render()},destroy:function(){}},metric:{render:function(){var t,e=this.colors()[0],n=this.theme(),i=this.title(),r="-",a=this.height()||140,o=this.width(),s=this.chartOptions(),l="",c="",u="";"number"==typeof this.data()[1][1]&&(r=this.data()[1][1]),t=r,void 0!==s.prettyNumber&&!0!==s.prettyNumber||isNaN(parseInt(r))||(t=function(t){var e=(t=Number(t)).toPrecision(3),n="",i=["","k","M","B","T"];return Number(e)==t&&String(t).length<=4?String(t):Math.abs(t)>=1e15?e:t>=1||t<=-1?(t<0&&(t=-t,n="-"),n+function t(e,n){var e=String(e),r=e.split(".");if(r.length>1){e=r[0];var a=r[1];2==e.length&&a.length>0?a.length>0?e=e+"."+a.charAt(0):e+="0":1==e.length&&a.length>0&&(e=e+"."+a.charAt(0),a.length>1?e+=a.charAt(1):e+="0")}var o=e.length;return e.split(".").length>1&&o--,o<=3?String(e)+i[n]:t(Number(e)/1e3,n+1)}(t,0)):t.toPrecision(3)}(r)),s.prefix&&(c='<span class="'+n+'-metric-prefix">'+s.prefix+"</span>"),s.suffix&&(u='<span class="'+n+'-metric-suffix">'+s.suffix+"</span>"),l+='<div class="'+n+'">',l+='<div class="'+n+'-metric" style="background-color: '+e+"; width: "+(o?o+"px":"auto")+';" title="'+Object(f.a)(r)+'">',l+='<span class="'+n+'-metric-value">'+c+Object(f.a)(t)+u+"</span>",i&&(l+='<span class="'+n+'-metric-title">'+Object(f.a)(i)+"</span>"),l+="</div>",l+="</div>",this.el().innerHTML=l,this.el().querySelector("."+n+"-metric-value").style.paddingTop=(a-this.el().offsetHeight)/2+"px",this.el().querySelector("."+n+"-metric").style.height=a+"px"},update:function(){this.render()},destroy:function(){}},table:{render:function(){var t,e=this.data(),n=this.el(),i=(this.height()||g.height)-this.el().offsetHeight,r=this.theme(),a=this.width()||g.width,o="",l=new Array(e[0].length),c=new Array(e[0].length);if(1===e.length&&0===e[0].length)this.message("No data to display");else{Object(s.a)(e,function(t){Object(s.a)(t,function(t,e){c[e]||(c[e]=0),l[e]="number"==typeof t?"right":"left",c[e]=String(t).length>c[e]?String(t).length:c[e]})}),o+='<div class="'+r+'-table" style="height: '+(i?i+"px":"auto")+"; width: "+(a?a+"px":"auto")+';">',o+='<table class="'+r+'-table-dataset">',o+="<thead>",o+="<tr>";for(var u=0;u<e[0].length;u++)o+='<th style="width: '+10*c[u]+"px; text-align: "+l[u]+';">'+e[0][u]+"</th>";o+="</tr>",o+="</thead>",o+="<tbody>",o+=function(t,e,n){for(var i="",r=0;r<t.length;r++)if(r>0){i+="<tr>";for(var a=0;a<t[r].length;a++)i+='<td style="min-width: '+10*e[a]+"px; text-align: "+n[a]+';">'+t[r][a]+"</td>";i+="</tr>"}return i}.bind(this,e,c,l)(),o+="</tbody>",o+="</table>",o+='<table class="'+r+'-table-fixed-header">',o+="<thead>",o+="<tr>";for(u=0;u<e[0].length;u++)o+='<th style="min-width: '+10*c[u]+"px; text-align: "+l[u]+';">'+e[0][u]+"</th>";o+="</tr>",o+="</thead>",o+="</table>",o+="</div>",n.querySelector("."+r+"-rendering").innerHTML=o,t=n.querySelector("."+r+"-table-fixed-header"),n.querySelector("."+r+"-table").onscroll=function(e){t.style.top=e.target.scrollTop+"px"}}},update:function(){this.render()},destroy:function(){var t=this.el().querySelector("."+this.theme()+"-table");t&&t.onscroll&&(t.onscroll=void 0)}},spinner:{render:function(){var t,e="",n=this.view._artifacts.spinner={},i=this.height()||35,r=(i-35)/2,a=["webkit","Moz","ms","O"],o=this.view._artifacts.radius=0;e+='<div class="'+this.theme()+'">',e+='<div class="keen-spinner-container" style="height: '+i+"px; padding-top: "+r+'px;">',e+='<div class="keen-spinner-indicator"></div>',e+="</div>",e+="</div>",this.el().innerHTML=e,void 0===(t=this.el().querySelector(".keen-spinner-indicator")).style.animationName&&(o=0,n.interval=setInterval(function(){o=350===o?0:o+10;for(var e=0;e<a.length;e++)t.style[a[e]]="rotate("+n.radius+"deg)"},15))},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.interval&&clearInterval(this.view._artifacts.spinner.interval),this.view._artifacts.spinner.radius=0;try{delete this.view._artifacts.spinner}catch(t){this.view._artifacts.spinner=void 0}}this.el().innerHTML=""}}};e.a=function(t){var e,n;return function(t){if("undefined"==typeof window)return;window.onresize=window.resize=function(){},window.addEventListener?window.addEventListener("resize",t,!0):window.attachEvent&&window.attachEvent("onresize",t)}(function(){e&&clearTimeout(e),n=t.visuals.length>12?1e3:250,e=setTimeout(function(){Object(s.a)(t.visuals,function(t){t.view._artifacts.c3&&t.view._artifacts.c3.resize()})},n)}),function(){Object(s.a)(["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"],function(t,e){m[t]={render:function(){var e=function(){var t,e,n;return t={axis:{},color:{},data:{order:null},legend:{position:"right",show:!0},padding:{},point:{focus:{expand:{enabled:!1}},r:2,show:!0},tooltip:{},transition:{duration:0}},e={bindto:this.el().querySelector("."+this.theme()+"-rendering"),color:{pattern:this.colors()},data:{colors:Object(l.a)({},this.colorMapping()),columns:[],type:this.type().replace("horizontal-","")},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()},tooltip:{}},(n=u(n=u({},t,this.chartOptions()),e)).color.pattern=e.color.pattern,n.data.colors=e.data.colors,n.data.columns=e.data.columns,n}.call(this);if(1!==this.data()[0].length&&1!==this.data().length)if("gauge"===t?(e.legend.position="bottom",e.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]):"pie"===t||"donut"===t?e.data.columns=this.data().slice(1):(t.indexOf("horizontal-")>-1&&(e.axis.rotated=t.indexOf("horizontal-")>-1),Object(h.a)(this.data()[1][0])?(e.axis.x=e.axis.x||{},e.axis.x.type="timeseries",e.axis.x.tick=e.axis.x.tick||{format:this.dateFormat()||d(this.data()[1][0],this.data()[2]?this.data()[2][0]:this.data()[1][0]),culling:{max:5}},e.data.columns[0]=[],Object(s.a)(this.dataset.selectColumn(0),function(t,n){n>0&&(t=new Date(t)),e.data.columns[0][n]=t}),e.data.columns[0][0]="x",e.data.x="x",this.stacked()&&this.data()[0].length>2&&(e.data.groups=[this.dataset.selectRow(0).slice(1)])):(e.axis.x=e.axis.x||{},e.axis.x.type="category",e.axis.x.categories=this.dataset.selectColumn(0).slice(1),this.stacked()&&this.data()[0].length>2&&(e.data.groups=[this.dataset.selectRow(0).slice(1)])),2===this.data()[0].length&&(e.legend.show=!1),Object(s.a)(this.data()[0],function(t,n){n>0&&e.data.columns.push(this.dataset.selectColumn(n))}.bind(this))),!0===e.legend.show&&"right"===e.legend.position&&["gauge"].indexOf(t.replace("horizontal-",""))){e.data.color=function(t,e){var n;return this.view._artifacts.pagination&&"gauge"!==this.type()?(n=this.view._artifacts.pagination.labels,e.id&&n.indexOf(e.id)>-1||e&&!e.id&&n.indexOf(e)>-1?t:"donut"===this.type()||"pie"===this.type()?"rgba(0,0,0,.1)":"rgba(0,0,0,.07)"):t}.bind(this),e.tooltip={contents:v,format:{value:function(t,e,n,i){if(!this.view._artifacts.pagination||"gauge"===this.type())return t;if(this.view._artifacts.pagination.labels.indexOf(n)>-1)return t}.bind(this)}},e.legend.show=!1;var n=this.el().querySelector("."+this.theme()+"-rendering").offsetWidth-100;e.size.width=e.size.width||n,this.el().querySelector("."+this.theme()+"-rendering").setAttribute("style","margin-right: 120px;"),this.view._artifacts.c3=r.a.generate(e),p.call(this,e.data.columns)}else e.legend.show=!1,this.view._artifacts.c3=r.a.generate(e);else this.message("No data to display")},update:function(){this.render()},destroy:function(){this.view._artifacts.c3&&(this.view._artifacts.c3.destroy(),this.view._artifacts.c3=null)}}})}(),m}},function(t,e,n){"use strict";var i=n(5),r=n(1),a=n(4);e.a=function(t){return arguments.length?t instanceof i.b?(this.dataset=t,this):function(t){var e,n,o,s,l,c,u,h,d=[];n=this.indexBy()?this.indexBy():"timestamp.start",o=t.metadata||{},l=void 0!==t.query?t.query:{},"funnel"===(l=Object(r.a)({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},l)).analysis_type?s="funnel":"extraction"===l.analysis_type?s="extraction":"select_unique"===l.analysis_type?l.group_by||l.interval||(s="list"):l.analysis_type&&(l.group_by||l.interval?l.group_by&&!l.interval?l.group_by instanceof Array&&l.group_by.length>1?(s="double-grouped-metric",d.push(l.group_by)):s="grouped-metric":l.interval&&!l.group_by?(s="interval",d.push(n)):l.group_by&&l.interval&&(l.group_by instanceof Array&&l.group_by.length>1?(s="double-grouped-interval",d.push(l.group_by),d.push(n)):(s="grouped-interval",d.push(n))):s="metric");s||("number"==typeof t.result&&(s="metric"),t.result instanceof Array&&t.result.length>0&&(!t.result[0].timeframe||"number"!=typeof t.result[0].value&&null!=t.result[0].value||(s="interval",d.push(n)),"number"==typeof t.result[0].result&&(s="grouped-metric"),t.result[0].value instanceof Array&&(s="grouped-interval",d.push(n)),"number"==typeof t.result[0]&&void 0!==t.steps&&(s="funnel",l.steps=t.steps),"string"!=typeof t.result[0]&&"number"!=typeof t.result[0]||void 0!==t.steps||(s="list"),s||(s="extraction")));this.title()||(u=o.display_name?o.display_name:function(t){var e,n=t.analysis_type?t.analysis_type.replace("_"," "):"";e=n.replace(/\b./g,function(t){return t.toUpperCase()}),t.event_collection&&(e+=" - "+t.event_collection);return e}(l),this.title(u));this.type()||(h=o.visualization&&o.visualization.chart_type?o.visualization.chart_type:function(t){var e=void 0;switch(t){case"metric":e="metric";break;case"interval":e="area";break;case"grouped-metric":case"double-grouped-metric":e="bar";break;case"grouped-interval":case"double-grouped-interval":e="line";break;case"funnel":e="horizontal-bar";break;case"list":case"extraction":default:e="table"}return e}(s),this.type(h));c=i.b.parser.apply(this,[s].concat(d)),e=c(Object(r.a)(t,{query:l})),s.indexOf("interval")>-1&&e.updateColumn(0,function(t,e){return new Date(t)});return e.updateRow(0,function(t,e){return Object(a.a)(t)}),this.dataset=e,this}.call(this,t):this.dataset.data()}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"Dataviz",function(){return h});var i=n(9),r=n(5),a=n(0),o=n(6),s=n(4),l=n(2),c=n(8);n.d(e,"Dataset",function(){return r.a});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function t(){if(this instanceof t==!1)return new t;this.dataset=new r.a,this.view={_prepared:!1,_rendered:!1,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},dateFormat:void 0,el:void 0,height:void 0,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:void 0,sortGroups:void 0,sortIntervals:void 0,stacked:!1,theme:"keen-dataviz",title:void 0,type:void 0,width:void 0},t.visuals.push(this)};function d(t){"undefined"==typeof document&&"undefined"!=typeof window?(null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),document.readyState="complete"},!1),document.readyState="loading"),function t(e){/in/.test(document.readyState)?setTimeout(function(){t(e)},9):e()}(t)):t()}h.libraries={default:{}},"undefined"!=typeof window&&(h.libraries.default=Object(c.a)(h)),h.visuals=[],h.register=function(t,e){h.libraries[t]=h.libraries[t]||{},Object(a.a)(e,function(e,n){h.libraries[t][n]=e})},h.find=function(t){if(!arguments.length)return h.visuals;var e=t.nodeName?t:document.querySelector(t),n=null;return Object(a.a)(h.visuals,function(t){if(e==t.el())return n=t,!1}),n},h.prototype.attributes=function(t){if(!arguments.length)return this.view;var e=this.view;return Object(a.a)(t,function(t,n){"chartType"===n&&(n="type"),e[n]=t}),this},h.prototype.call=function(t){return t.call(this),this},h.prototype.chartOptions=function(t){var e=this;return arguments.length?(null===t?this.view.chartOptions={}:"object"===(void 0===t?"undefined":u(t))&&Object(a.a)(t,function(t,n){e.view.chartOptions[n]=t||null}),this):this.view.chartOptions},h.prototype.colors=function(t){return arguments.length?(this.view.colors=t instanceof Array?t:[],this):this.view.colors},h.prototype.colorMapping=function(t){var e=this;return arguments.length?(null===t?this.view.colorMapping={}:"object"===(void 0===t?"undefined":u(t))&&Object(a.a)(t,function(t,n){e.view.colorMapping[n]=t||null}),this):this.view.colorMapping},h.prototype.data=i.a,h.prototype.dateFormat=function(t){return arguments.length?(this.view.dateFormat="string"==typeof t||"function"==typeof t?t:void 0,this):this.view.dateFormat},h.prototype.destroy=function(){var t=this.library(),e=this.type(),n=this.el();return h.libraries[t]&&h.libraries[t][e]&&h.libraries[t][e].destroy.call(this),n&&(n.innerHTML=""),this.view._prepared=!1,this.view._rendered=!1,this.view._artifacts={},this},h.prototype.el=function(t){var e=this;return arguments.length?(d(function(){t&&null!==t?t.nodeName?e.view.el=t:document.querySelector&&(e.view.el=document.querySelector(t)):e.view.el=void 0}),this):this.view.el},h.prototype.height=function(t){return arguments.length?(this.view.height=isNaN(parseInt(t))?null:parseInt(t),this):this.view.height},h.prototype.indexBy=function(t){return arguments.length?(this.view.indexBy=t?String(t):"timeframe.start",this):this.view.indexBy},h.prototype.labels=function(t){return arguments.length?(this.view.labels=t instanceof Array?t:[],2!==this.data()[0].length||Object(o.a)(this.data()[1][0])?this.dataset.updateRow(0,function(t,e){return e>0&&this.view.labels[e-1]?Object(s.a)(String(this.view.labels[e-1])):Object(s.a)(t)}.bind(this)):this.dataset.updateColumn(0,function(t,e){return this.view.labels[e-1]?Object(s.a)(String(this.view.labels[e-1])):Object(s.a)(t)}.bind(this)),this):this.view.labels},h.prototype.labelMapping=function(t){return arguments.length?(null===t?this.view.labelMapping={}:"object"===(void 0===t?"undefined":u(t))&&Object(a.a)(t,function(t,e){this.view.labelMapping[e]=t||null}.bind(this)),2!==this.data()[0].length||Object(o.a)(this.data()[1][0])?this.dataset.updateRow(0,function(t){return this.view.labelMapping[t]?Object(s.a)(String(this.view.labelMapping[t])):Object(s.a)(t)}.bind(this)):this.dataset.updateColumn(0,function(t){return this.view.labelMapping[t]?Object(s.a)(String(this.view.labelMapping[t])):Object(s.a)(t)}.bind(this)),this):this.view.labelMapping},h.prototype.library=function(t){return arguments.length?(this.view.library=t?String(t):null,this):this.view.library},h.prototype.message=function(){if(this.view._rendered&&this.destroy(),this.el()){this.el().innerHTML="";var t=h.libraries.default.message;t.render&&t.render.apply(this,arguments)}return this},h.prototype.notes=function(t){return arguments.length?(this.view.notes=t?String(t):null,this):this.view.notes},h.prototype.prepare=function(){var t,e=this;if(!this.el())throw"A DOM element is required. Check out the .el() method.";return d(function(){e.view._rendered&&e.destroy(),e.el()&&(e.el().innerHTML="",(t=h.libraries.default.spinner).render&&t.render.call(e),e.view._prepared=!0)}),this},h.prototype.render=function(){var t=this,e=h.libraries.default.spinner,n=this.library(),i=this.type();this.el();if(!this.el())throw this.message("A DOM element is required. Check out the .el() method."),"A DOM element is required. Check out the .el() method.";if(!this.type())throw this.message("A chart type is required. Check out the .type() method."),"A chart type is required. Check out the .type() method.";return d(function(){if(t.view._prepared&&e.destroy&&e.destroy.apply(t,arguments),t.el().innerHTML="","undefined"===h.libraries[n])throw t.message("Incorrect library"),"Incorrect library";if(void 0===h.libraries[n][i])throw t.message("Incorrect chart type"),"Incorrect chart type";!function(t,e){var n="";n+='<div class="'+e.theme+'">',e.title&&(n+='<div class="'+e.theme+'-title">'+Object(l.a)(e.title)+"</div>");n+='<div class="'+e.theme+'-stage"><div class="'+e.theme+'-rendering"></div></div>',e.notes&&(n+='<div class="'+e.theme+'-notes">'+Object(l.a)(e.notes)+"</div>");n+="</div>",t.innerHTML=n}(t.el(),{notes:t.notes(),theme:t.theme(),title:t.title()}),h.libraries[n][i].render.call(t),t.view._rendered=!0}),this},h.prototype.sortGroups=function(t){return arguments.length?(this.view.sortGroups=t?String(t):null,this.view.sortGroups&&this.data().length>1&&(Object(o.a)(this.data()[1][0])?this.dataset.sortColumns(this.view.sortGroups,this.dataset.getColumnSum):this.dataset.sortRows(this.view.sortGroups,this.dataset.getRowSum)),this):this.view.sortGroups},h.prototype.sortIntervals=function(t){return arguments.length?(this.view.sortIntervals=t?String(t):null,this.view.sortIntervals&&this.dataset.sortRows(this.view.sortIntervals),this):this.view.sortIntervals},h.prototype.stacked=function(t){return arguments.length?(this.view.stacked=!!t,this):this.view.stacked},h.prototype.theme=function(t){return arguments.length?(this.view.theme=t?String(t):null,this):this.view.theme},h.prototype.title=function(t){return arguments.length?(this.view.title=t?String(t):null,this):this.view.title},h.prototype.type=function(t){return arguments.length?(this.view.type=t?function(t){return{areachart:"area",barchart:"horizontal-bar",columnchart:"bar",linechart:"line",piechart:"pie"}[t]||t}(t):null,this):this.view.type},h.prototype.update=function(){var t=this.library(),e=this.type(),n=this.el();return t&&e&&n&&h.libraries[t][e].update&&h.libraries[t][e].update.apply(this,arguments),this},h.prototype.width=function(t){return arguments.length?(this.view.width=isNaN(parseInt(t))?null:parseInt(t),this):this.view.width},h.prototype.chartType=h.prototype.type,h.prototype.error=h.prototype.message,h.prototype.parseRawData=h.prototype.data,h.prototype.parseRequest=function(){return this},h.prototype.initialize=function(){return this},"undefined"==typeof __KEEN_NO_COMMON_GLOBAL_OBJECT__&&function(t){t.Keen=t.Keen||{},t.Keen.Dataset=r.a,t.Keen.Dataviz=h}.call(void 0,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),e.default=h}.call(this,n(10))},function(t,e,n){t.exports=n(11)}])});
//# sourceMappingURL=keen-dataviz.min.js.map