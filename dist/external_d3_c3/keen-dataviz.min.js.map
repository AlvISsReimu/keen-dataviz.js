{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/utils/each.js","webpack:///./lib/utils/escape-html.js","webpack:///./lib/utils/extend.js","webpack:///./lib/utils/assert-date-string.js","webpack:///./lib/dataset/utils/create-null-list.js","webpack:///./lib/dataset/modifiers/append.js","webpack:///./lib/utils/extend-deep.js","webpack:///external \"d3\"","webpack:///./lib/utils/strip-html-tags.js","webpack:///./lib/dataset/utils/analyses.js","webpack:///./lib/dataset/index.js","webpack:///./lib/libraries/default/spinner.js","webpack:///./lib/libraries/default/table.js","webpack:///./lib/utils/pretty-number.js","webpack:///./lib/libraries/default/metric.js","webpack:///./lib/libraries/default/message.js","webpack:///./lib/libraries/c3/extensions/tooltip-contents.js","webpack:///./lib/libraries/c3/extensions/paginating-legend.js","webpack:///./lib/libraries/c3/extensions/default-date-format.js","webpack:///external \"c3\"","webpack:///./lib/libraries/index.js","webpack:///./lib/data.js","webpack:///./lib/dataset/utils/object.js","webpack:///./lib/dataset/utils/flatten.js","webpack:///./lib/dataset/utils/parsers.js","webpack:///./lib/dataset/modifiers/update.js","webpack:///./lib/dataset/modifiers/sort.js","webpack:///./lib/dataset/modifiers/select.js","webpack:///./lib/dataset/modifiers/insert.js","webpack:///./lib/dataset/modifiers/filter.js","webpack:///./lib/dataset/modifiers/delete.js","webpack:///./lib/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./lib/browser.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__19__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","each","cb","Array","length","escapeHtml","string","escape","str","match","matchHtmlRegExp","exec","html","index","lastIndex","charCodeAt","substring","extend","target","arguments","prop","testObject","input","getTime","isNaN","testString","test","_typeof","len","list","push","appendColumn","appendRow","_createNullList","_each","self","this","label","slice","undefined","matrix","row","cell","concat","_createNullList2","default","String","newRow","col","selectColumn","extendDeep","key","stripHtmlTags","inputString","replace","average","arr","start","end","set","sum","val","parseFloat","maximum","nums","Math","max","apply","minimum","min","getColumnAverage","getRowAverage","getColumnSum","getRowSum","getColumnMaximum","getRowMaximum","getColumnMinimum","getRowMinimum","getColumnLabel","getRowIndex","append","del","filter","insert","select","sort","update","_extend","Dataset","meta","type","data","coords","Error","colIndex","indexOf","rowIndex","colResult","rowResult","selectRow","analyses","parser","_parsers2","render","view","_artifacts","spinner","config","theme","el","innerHTML","destroy","interval","clearInterval","radius","e","dataset","fixedHeader","message","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","Symbol","iterator","next","done","err","return","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","querySelector","onscroll","style","top","scrollTop","prettyNumber","sciNo","Number","toPrecision","prefix","suffixes","abs","recurse","iteration","split","rhs","charAt","numNumerals","_prettyNumber","_escapeHtml","colors","title","opts","suffix","formattedNum","parseInt","text","outer","document","createElement","inner","msg","titleContainer","notesContainer","className","notes","appendChild","defaultTitleFormat","defaultValueFormat","color","nameFormat","tooltip_format_name","titleFormat","tooltip_format_title","valueFormat","tooltip_format_value","x","CLASS","tooltip","ratio","id","bgcolor","levelColor","tooltipName","options","cols","columns","datavizInstance","chart","c3","domNode","legendConfig","legend","pagination","_extends","hidden","labels","offset","limit","round","offsetHeight","total","_assertDateString2","legendElement","align","position","paginateHorizontalLeftElement","setAttribute","legendItemsElement","paginateVerticalElement","paginateHorizontalRightElement","paginateData","forEach","labelShortened","textMaxLength","legendItem","chartPartId","legendItemColorSample","backgroundColor","prepend","tooltipElement","addEventListener","event","focus","show","pointer","revert","remove","opacity","isHidden","splice","toggle","arrowUp","arrowDown","paginate","direction","diff","floor","clearSelectedText","resize","selection","empty","getSelection","removeAllRanges","_assertDateString","startDate","endDate","timeDiff","Date","months","ms","date","getMonth","getFullYear","getDate","lib","timer","fn","onresize","attachEvent","bindResizeListener","clearTimeout","delay","visuals","setTimeout","types","metric","table","_this","ENFORCED_OPTIONS","bindto","pattern","colorMapping","size","width","offsetWidth","height","_extendDeep","axis","rotated","tick","format","dateFormat","_defaultDateFormat2","culling","stacked","groups","categories","bind","c3options","scope","contents","c3TooltipContents","valueFormatted","generate","c3PaginatingLegend","defineC3","response","indexBy","query","selectedParser","parserArgs","metadata","analysis_type","event_collection","filters","group_by","timeframe","timezone","result","steps","display_name","analysis","toUpperCase","getDefaultTitle","visualization","chart_type","getDefaultType","updateColumn","updateRow","_stripHtmlTags","_dataset","valueAtDeepKey","obj","is","flatten","ob","toReturn","flatObject","parsers","_flatten","_object","res","record","grouped-metric","grouped-interval","group","j","double-grouped-metric","rowLabel","double-grouped-interval","funnel","extraction","_loop","names","keys","iNames","deleteColumn","q","_append","sortColumns","comp","head","analysesUtilMethods","b","op","insertColumn","sortRows","body","_analyses","insertRow","filterColumns","clone","selectedColumn","ri","filterRows","deleteRow","Dataviz","defaultOptions","showDeprecationWarnings","container","containerElement","labelMapping","library","sortGroups","sortIntervals","showLoadingSpinner","order","padding","point","expand","enabled","transition","_prepared","_rendered","prepare","setLabels","mapLabels","domReady","readyState","DOMContentLoaded","removeEventListener","testDom","libraries","_libraries2","register","actions","method","find","nodeName","visual","attributes","console","log","chartOptions","element","num","loader","rawData","error","chart100percentWide","buildDomWrapper","bool","areachart","barchart","columnchart","linechart","piechart","convertChartTypes","chartType","parseRawData","parseRequest","initialize","g","Function","eval","_index","env","global","extendKeenGlobalObject","KeenDataviz","KeenDataset","Keen","KEEN_EXPOSE_AS_GLOBAL_OBJECT"],"mappings":"CAAA,SAAAA,EAAAC,GACA,oBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,EAAAG,QAAA,MAAAA,QAAA,YACA,sBAAAC,eAAAC,IACAD,QAAA,WAAAJ,OACA,CACA,IAAAM,EAAA,iBAAAL,QAAAD,EAAAG,QAAA,MAAAA,QAAA,OAAAH,EAAAD,EAAA,GAAAA,EAAA,IACA,QAAAQ,KAAAD,GAAA,iBAAAL,gBAAAF,GAAAQ,GAAAD,EAAAC,IAPA,CASCC,OAAA,SAAAC,EAAAC,GACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAZ,QAGA,IAAAC,EAAAS,EAAAE,IACAN,EAAAM,EACAC,GAAA,EACAb,YAUA,OANAc,EAAAF,GAAAG,KAAAd,EAAAD,QAAAC,IAAAD,QAAAW,GAGAV,EAAAY,GAAA,EAGAZ,EAAAD,QA2CA,OAtCAW,EAAAK,EAAAF,EAGAH,EAAAM,EAAAP,EAGAC,EAAAO,EAAA,SAAAlB,EAAAmB,EAAAC,GACAT,EAAAU,EAAArB,EAAAmB,IACAG,OAAAC,eAAAvB,EAAAmB,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAT,EAAAgB,EAAA,SAAA3B,GACAsB,OAAAC,eAAAvB,EAAA,cAAiD4B,OAAA,KAIjDjB,EAAAkB,EAAA,SAAA5B,GACA,IAAAmB,EAAAnB,KAAA6B,WACA,WAA2B,OAAA7B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAU,EAAAO,EAAAE,EAAA,IAAAA,GACAA,GAIAT,EAAAU,EAAA,SAAAU,EAAAC,GAAsD,OAAAV,OAAAW,UAAAC,eAAAnB,KAAAgB,EAAAC,IAGtDrB,EAAAwB,EAAA,GAIAxB,IAAAyB,EAAA,sFCnEgBC,KAAT,SAAchB,EAAGiB,EAAIF,GAC1B,IAAIP,EACJ,IAAKR,EACH,OAAO,EAGT,GADAe,EAAKA,GAAIf,EACLA,aAAakB,OAEf,IAAKV,EAAI,EAAGA,EAAIR,EAAEmB,OAAQX,IACxB,IAA+B,IAA3BS,EAAGvB,KAAKqB,EAAGf,EAAEQ,GAAIA,EAAGR,GACtB,OAAO,OAKX,IAAKQ,KAAKR,EACR,GAAIA,EAAEa,eAAeL,KACY,IAA3BS,EAAGvB,KAAKqB,EAAGf,EAAEQ,GAAIA,EAAGR,GACtB,OAAO,EAKf,OAAO,oFCbOoB,WAAT,SAAoBC,GACzB,IAOIC,EAPAC,EAAM,GAAKF,EACXG,EAAQC,EAAgBC,KAAKH,GAEjC,IAAKC,EACH,OAAOD,EAIT,IAAII,EAAO,GACPC,EAAQ,EACRC,EAAY,EAEhB,IAAKD,EAAQJ,EAAMI,MAAOA,EAAQL,EAAIJ,OAAQS,IAAS,CACrD,OAAQL,EAAIO,WAAWF,IACrB,KAAK,GACHN,EAAS,SACT,MACF,KAAK,GACHA,EAAS,QACT,MACF,KAAK,GACHA,EAAS,QACT,MACF,KAAK,GACHA,EAAS,OACT,MACF,KAAK,GACHA,EAAS,OACT,MACF,QACE,SAGAO,IAAcD,IAChBD,GAAQJ,EAAIQ,UAAUF,EAAWD,IAGnCC,EAAYD,EAAQ,EACpBD,GAAQL,EAGV,OAAOO,IAAcD,EACjBD,EAAOJ,EAAIQ,UAAUF,EAAWD,GAChCD,GAtDN,IAAMF,EAAkB,2FCARO,OAAT,SAAgBC,GACrB,IAAK,IAAIhD,EAAI,EAAGA,EAAIiD,UAAUf,OAAQlC,IACpC,IAAK,IAAIkD,KAAQD,UAAUjD,GACzBgD,EAAOE,GAAQD,UAAUjD,GAAGkD,GAGhC,OAAOF,kSCNF,SAASG,EAAWC,GACzB,OAAc,OAAVA,GAA2C,mBAAlBA,EAAMC,UAA2BC,MAAMF,EAAMC,WAMrE,SAASE,EAAWH,GAEzB,MADiB,gEACDI,KAAKJ,KATPD,eAOAI,uBAKD,SAAUH,GACvB,MAAqB,iBAAjB,IAAOA,EAAP,YAAAK,EAAOL,IACFD,EAAWC,GACQ,iBAAVA,GACTG,EAAWH,6FChBP,SAAUM,GAEvB,IADA,IAAMC,KACG3D,EAAI,EAAGA,EAAI0D,EAAK1D,IACvB2D,EAAKC,KAAK,MAEZ,OAAOD,oFCFOE,iBA6CAC,YAhDhB,MAAAC,EAAA1D,EAAA,uCACA2D,EAAA3D,EAAA,GAEO,SAASwD,EAAavB,EAAKc,GAChC,IAAMa,EAAOC,KAEPC,GADOlC,MAAMN,UAAUyC,MAAM3D,KAAKwC,UAAW,QAC5BoB,IAAR/B,EAAqBA,EAAM,MAuC1C,MArCqB,mBAAVc,GACTa,EAAKK,OAAO,GAAGV,KAAKO,IACpB,EAAAH,EAAAjC,MAAKkC,EAAKK,OAAQ,SAASC,EAAKvE,GAC9B,IAAIwE,SACAxE,EAAI,SAEc,KADpBwE,EAAOpB,EAAM3C,KAAKwD,EAAMM,EAAKvE,MAE3BwE,EAAO,MAETP,EAAKK,OAAOtE,GAAG4D,KAAKY,SAKhBpB,GAASA,aAAiBnB,UAClCmB,EAAQA,OAEElB,QAAU+B,EAAKK,OAAOpC,OAAS,EACvCkB,EAAQA,EAAMqB,QAAO,EAAAC,EAAAC,SAAeV,EAAKK,OAAOpC,OAAS,EAAIkB,EAAMlB,UAKnE,EAAA8B,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GACtBiE,EAAKK,OAAOpC,OAAQ,EAAIkB,EAAMlB,QAChC4B,EAAUrD,KAAKwD,EAAMW,OAAOX,EAAKK,OAAOpC,WAK9C+B,EAAKK,OAAO,GAAGV,KAAKO,IACpB,EAAAH,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GAC1BiE,EAAKK,OAAOtE,EAAE,GAAGiE,EAAKK,OAAO,GAAGpC,OAAO,GAAKZ,KAKzC2C,EAGF,SAASH,EAAUxB,EAAKc,GAC7B,IAAMa,EAAOC,KAEPC,GADOlC,MAAMN,UAAUyC,MAAM3D,KAAKwC,UAAW,QAC5BoB,IAAR/B,EAAqBA,EAAM,MACpCuC,KAqCN,OAnCAA,EAAOjB,KAAKO,GAES,mBAAVf,IACT,EAAAY,EAAAjC,MAAKkC,EAAKK,OAAO,GAAI,SAASH,EAAOnE,GACnC,IAAI8E,SACAN,SACAxE,EAAI,IACN8E,EAAMb,EAAKc,aAAa/E,QAEJ,KADpBwE,EAAOpB,EAAM3C,KAAKwD,EAAMa,EAAK9E,MAE3BwE,EAAO,MAETK,EAAOjB,KAAKY,MAGhBP,EAAKK,OAAOV,KAAKiB,MAGTzB,GAASA,aAAiBnB,UAClCmB,EAAQA,OAEElB,QAAU+B,EAAKK,OAAO,GAAGpC,OAAS,EAC1CkB,EAAQA,EAAMqB,QAAQ,EAAAC,EAAAC,SAAgBV,EAAKK,OAAO,GAAGpC,OAAS,EAAIkB,EAAMlB,UAGxE,EAAA8B,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GACtBiE,EAAKK,OAAO,GAAGpC,OAAQ,EAAIkB,EAAMlB,QACnC2B,EAAapD,KAAKwD,EAAMW,OAAQX,EAAKK,OAAO,GAAGpC,WAKrD+B,EAAKK,OAAOV,KAAKiB,EAAOJ,OAAOrB,KAG1Ba,oSCvFOe,WAAT,SAASA,EAAWhC,GACzB,IAAK,IAAIhD,EAAI,EAAGA,EAAIiD,UAAUf,OAAQlC,KACpC,EAAAgE,EAAAjC,MAAKkB,UAAUjD,GAAI,SAASkD,EAAM+B,QACH,IAAhBjC,EAAOiC,SAAwC,IAAT/B,GACtB,WAAvBO,EAAOT,EAAOiC,KAAwC,iBAAhB,IAAO/B,EAAP,YAAAO,EAAOP,KAC7B,OAAhBF,EAAOiC,IAAwC,OAAT/B,EACtC8B,EAAWhC,EAAOiC,GAAM/B,GAG5BF,EAAOiC,GAAO/B,IAIpB,OAAOF,GAfT,IAAAgB,EAAA3D,EAAA,kBCAAV,EAAAD,QAAAQ,mFCQgBgF,cAAT,SAAuBC,GAC5B,OAAOA,EAAYC,QAAQ,gBAAiB,oFCT9C,IAAApB,EAAA3D,EAAA,GACAA,EAAA,GAEA,SAASgF,EAAQC,EAAKC,EAAOC,GAC3B,IAAIC,EAAMH,EAAIlB,MAAMmB,GAAO,EAAIC,EAAMA,EAAI,EAAIF,EAAIpD,QAC7CwD,EAAM,EASV,OALA,EAAA1B,EAAAjC,MAAK0D,EAAK,SAASE,EAAK3F,GACH,iBAAR2F,GAAqBrC,MAAMsC,WAAWD,MAC/CD,GAAOE,WAAWD,MAGfD,EAAMD,EAAIvD,OAGnB,SAAS2D,EAAQP,EAAKC,EAAOC,GAC3B,IAAIC,EAAMH,EAAIlB,MAAMmB,GAAO,EAAIC,EAAMA,EAAI,EAAIF,EAAIpD,QAC7C4D,KAQJ,OALA,EAAA9B,EAAAjC,MAAK0D,EAAK,SAASE,EAAK3F,GACH,iBAAR2F,GAAqBrC,MAAMsC,WAAWD,KAC/CG,EAAKlC,KAAKgC,WAAWD,MAGlBI,KAAKC,IAAIC,MAAMF,KAAMD,GAG9B,SAASI,EAAQZ,EAAKC,EAAOC,GAC3B,IAAIC,EAAMH,EAAIlB,MAAMmB,GAAO,EAAIC,EAAMA,EAAI,EAAIF,EAAIpD,QAC7C4D,KAQJ,OALA,EAAA9B,EAAAjC,MAAK0D,EAAK,SAASE,EAAK3F,GACH,iBAAR2F,GAAqBrC,MAAMsC,WAAWD,KAC/CG,EAAKlC,KAAKgC,WAAWD,MAGlBI,KAAKI,IAAIF,MAAMF,KAAMD,GAG9B,SAASJ,EAAIJ,EAAKC,EAAOC,GAEvB,IAAIC,EAAMH,EAAIlB,MAAMmB,GAAO,EAAIC,EAAMA,EAAI,EAAIF,EAAIpD,QAC7CwD,EAAM,EAQV,OALA,EAAA1B,EAAAjC,MAAK0D,EAAK,SAASE,EAAK3F,GACH,iBAAR2F,GAAqBrC,MAAMsC,WAAWD,MAC/CD,GAAOE,WAAWD,MAGfD,EAGT,IAAMU,EAAmB,SAAUd,GACjC,OAAOD,EAAQC,EAAK,IAEhBe,EAAgBD,EAEhBE,EAAe,SAAUhB,GAC7B,OAAOI,EAAIJ,EAAK,IAEZiB,EAAYD,EAEZE,EAAmB,SAAUlB,GACjC,OAAOO,EAAQP,EAAK,IAEhBmB,EAAgBD,EAEhBE,EAAmB,SAAUpB,GACjC,OAAOY,EAAQZ,EAAK,IAEhBqB,EAAgBD,EAEhBE,EAAiB,SAAUtB,GAC/B,OAAOA,EAAI,IAEPuB,EAAcD,aAGlBvB,UACAQ,UACAK,UACAR,MACAU,mBACAC,gBACAC,eACAC,YACAC,mBACAC,gBACAC,mBACAC,gBACAC,iBACAC,+GC/FF,IAAYC,IAAZzG,EAAA,IACY0G,IAAZ1G,EAAA,KACY2G,IAAZ3G,EAAA,KACY4G,IAAZ5G,EAAA,KACY6G,IAAZ7G,EAAA,KACY8G,IAAZ9G,EAAA,KACY+G,IAAZ/G,EAAA,SAGAA,EAAA,IACAgH,EAAAhH,EAAA,OACAA,EAAA,iNAEO,IAAMiH,YAAU,SAAVA,IACX,GAAIpD,gBAAgBoD,IAAY,EAC9B,OAAO,IAAIA,EAGbpD,KAAKI,SACF,UAEHJ,KAAKqD,MACHC,UAAMnD,IAIViD,EAAQ3F,UAAU8F,KAAO,SAAUnC,GACjC,OAAKrC,UAAUf,QACfgC,KAAKI,OAAUgB,aAAerD,MAAQqD,EAAM,KACrCpB,MAFuBA,KAAKI,QAKrCgD,EAAQ3F,UAAU8D,IAAM,SAAUiC,EAAQpG,GACxC,GAAI2B,UAAUf,OAAS,GAAKwF,EAAOxF,OAAS,EAC1C,MAAMyF,MAAM,gDAGd,IAAIC,EAAW,iBAAoBF,EAAO,GAAKA,EAAO,GAAKxD,KAAKI,OAAO,GAAGuD,QAAQH,EAAO,IACrFI,EAAW,iBAAoBJ,EAAO,GAAKA,EAAO,GAAKR,EAAOnC,aAAatE,KAAKyD,KAAM,GAAG2D,QAAQH,EAAO,IAExGK,EAAYb,EAAOnC,aAAatE,KAAKyD,KAAMwD,EAAO,IAClDM,EAAYd,EAAOe,UAAUxH,KAAKyD,KAAMwD,EAAO,IAgBnD,OAbIK,EAAU7F,OAAS,IACrB4E,EAAOjD,aAAapD,KAAKyD,KAAMU,OAAO8C,EAAO,KAC7CE,EAAW1D,KAAKI,OAAO,GAAGpC,OAAS,GAIjC8F,EAAU9F,OAAS,IACrB4E,EAAOhD,UAAUrD,KAAKyD,KAAMU,OAAO8C,EAAO,KAC1CI,EAAW5D,KAAKI,OAAOpC,OAAS,GAIlCgC,KAAKI,OAAQwD,GAAYF,GAAatG,EAC/B4C,MAGToD,EAAQ3F,UAAU6F,KAAO,SAASlF,GAChC,OAAKW,UAAUf,QACfgC,KAAKqD,KAAL,KAAqBjF,EAAMsC,OAAOtC,QAAO+B,EAClCH,MAFuBA,KAAKqD,KAAL,OAKhC,EAAAF,EAAAtE,QAAOuE,EAAQ3F,UAAWmF,IAC1B,EAAAO,EAAAtE,QAAOuE,EAAQ3F,UAAWoF,IAC1B,EAAAM,EAAAtE,QAAOuE,EAAQ3F,UAAWqF,IAC1B,EAAAK,EAAAtE,QAAOuE,EAAQ3F,UAAWsF,IAC1B,EAAAI,EAAAtE,QAAOuE,EAAQ3F,UAAWuF,IAC1B,EAAAG,EAAAtE,QAAOuE,EAAQ3F,UAAWwF,IAC1B,EAAAE,EAAAtE,QAAOuE,EAAQ3F,UAAWyF,IAC1B,EAAAC,EAAAtE,QAAOuE,EAAQ3F,UAAWuG,WAC1BZ,EAAQa,QAAS,EAAAC,EAAAzD,SAAQ2C,aAEVA,4FC5Ebe,OAAQ,WACN,IAAI3F,EAAO,GACOwB,KAAKoE,KAAKC,WAAWC,WAGvC9F,GAAQ,eAAiBwB,KAAKuE,OAAOC,MAAQ,KAC7ChG,GAAU,wDACVA,GAAY,6CACZA,GAAU,SACVA,GAAQ,SACRwB,KAAKyE,KAAKC,UAAYlG,GAExB0E,OAAQ,WAENlD,KAAKmE,UAEPQ,QAAS,WACP,GAAI3E,KAAKoE,KAAKC,WAAWC,QAAS,CAC5BtE,KAAKoE,KAAKC,WAAWC,QAAQM,UAC/BC,cAAc7E,KAAKoE,KAAKC,WAAWC,QAAQM,UAE7C5E,KAAKoE,KAAKC,WAAWC,QAAQQ,OAAS,EACtC,WACS9E,KAAKoE,KAAKC,WAAWC,QAE9B,MAAOS,GACL/E,KAAKoE,KAAKC,WAAWC,aAAUnE,GAGnCH,KAAKyE,KAAKC,UAAY,oFC9B1BvI,EAAA,cA0BEgI,OAAQ,WACN,IAAMa,EAAUhF,KAAKuD,OACfkB,EAAKzE,KAAKyE,KACVD,EAAQxE,KAAKwE,QAEfhG,EAAO,GACPyG,SAGJ,GADmC,IAAnBD,EAAQhH,QAAsC,IAAtBgH,EAAQ,GAAGhH,OAEjDgC,KAAKkF,QAAQ,0BADf,CAMA1G,kBAAuBgG,EAAvB,WAGAhG,oBAA2BgG,EAA3B,mBACAhG,GAAY,UACZA,GAAc,OApBG,IAAA2G,GAAA,EAAAC,GAAA,EAAAC,OAAAlF,EAAA,IAqBjB,QAAAmF,EAAAC,EAAoBP,EAAQ,GAA5BQ,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAgC,CAC9B3G,UAD8B8G,EAAAlI,MAC9B,SAtBe,MAAAwI,GAAAR,GAAA,EAAAC,EAAAO,EAAA,aAAAT,GAAAI,EAAAM,QAAAN,EAAAM,SAAA,WAAAT,EAAA,MAAAC,GAwBjB7G,GAAc,QACdA,GAAY,WAEZA,GAAY,UACZA,GA7CJ,SAA4BwG,GAC1B,IAAIxG,EAAO,GACP1C,EAAI,EAF2BgK,GAAA,EAAAC,GAAA,EAAAC,OAAA7F,EAAA,IAGnC,QAAA8F,EAAAC,EAAgBlB,EAAhBQ,OAAAC,cAAAK,GAAAG,EAAAC,EAAAR,QAAAC,MAAAG,GAAA,EAAyB,KAAhBzF,EAAgB4F,EAAA7I,MACvB,GAAItB,EAAI,EAAG,CACT0C,GAAU,OADD,IAAA2H,GAAA,EAAAC,GAAA,EAAAC,OAAAlG,EAAA,IAET,QAAAmG,EAAAC,EAAmBlG,EAAnBmF,OAAAC,cAAAU,GAAAG,EAAAC,EAAAb,QAAAC,MAAAQ,GAAA,EACE3H,UADsB8H,EAAAlJ,MACtB,QAHO,MAAAwI,GAAAQ,GAAA,EAAAC,EAAAT,EAAA,aAAAO,GAAAI,EAAAV,QAAAU,EAAAV,SAAA,WAAAO,EAAA,MAAAC,GAKT7H,GAAU,QAEZ1C,EAAI,GAX6B,MAAA8J,GAAAG,GAAA,EAAAC,EAAAJ,EAAA,aAAAE,GAAAI,EAAAL,QAAAK,EAAAL,SAAA,WAAAE,EAAA,MAAAC,GAanC,OAAOxH,GAgC0BjC,KAAKyD,KAAMgF,GAC1CxG,GAAY,WACZA,GAAU,WAcVA,GAAQ,SAGRiG,EAAG+B,cAAc,IAAMhC,EAAQ,cAAcE,UAAYlG,EAEzDyG,EAAcR,EAAG+B,cAAc,IAAMhC,EAAQ,uBAC7CC,EAAG+B,cAAc,IAAMhC,EAAQ,UAAUiC,SAAW,SAAS1B,GAC3DE,EAAYyB,MAAMC,IAAM5B,EAAEjG,OAAO8H,UAAY,QAGjD1D,OAAQ,WAENlD,KAAKmE,UAEPQ,QAAS,WACP,IAAIF,EAAKzE,KAAKyE,KAAK+B,cAAc,IAAMxG,KAAKwE,QAAU,UAClDC,GAAMA,EAAGgC,WACXhC,EAAGgC,cAAWtG,sFCvFJ0G,aAAT,SAAsB3H,GAE3B,IACI4H,GADA5H,EAAQ6H,OAAO7H,IACD8H,YAAY,GAC1BC,EAAS,GACTC,GAAY,GAAI,IAAK,IAAK,IAAK,KAEnC,GAAIH,OAAOD,IAAU5H,GAASwB,OAAOxB,GAAOlB,QAAU,EACpD,OAAO0C,OAAOxB,GAGhB,GAAI2C,KAAKsF,IAAIjI,IAAU,KACrB,OAAO4H,EAGT,OAAI5H,GAAS,GAAKA,IAAU,GACtBA,EAAQ,IAEVA,GAASA,EACT+H,EAAS,KAEJA,EAMT,SAASG,EAAQlI,EAAOmI,GACtB,IAAInI,EAAQwB,OAAOxB,GACnB,IAAIoI,EAAQpI,EAAMoI,MAAM,KAExB,GAAIA,EAAMtJ,OAAS,EAAG,CAEpBkB,EAAQoI,EAAM,GACd,IAAIC,EAAMD,EAAM,GAEI,GAAhBpI,EAAMlB,QAAeuJ,EAAIvJ,OAAS,EAEhCuJ,EAAIvJ,OAAS,EACfkB,EAAQA,EAAQ,IAAMqI,EAAIC,OAAO,GAIjCtI,GAAS,IAGY,GAAhBA,EAAMlB,QAAeuJ,EAAIvJ,OAAS,IACzCkB,EAAQA,EAAQ,IAAMqI,EAAIC,OAAO,GAE7BD,EAAIvJ,OAAS,EACfkB,GAASqI,EAAIC,OAAO,GAIpBtI,GAAS,KAIf,IAAIuI,EAAcvI,EAAMlB,OAEpBkB,EAAMoI,MAAM,KAAKtJ,OAAS,GAC5ByJ,IAEF,OAAIA,GAAe,EACV/G,OAAOxB,GAASgI,EAASG,GAGzBD,EAAQL,OAAO7H,GAAS,IAAMmI,EAAY,GA9CnCD,CAAQlI,EAAO,IAGxBA,EAAM8H,YAAY,mFCxB7B,IAAAU,EAAAvL,EAAA,IACAwL,EAAAxL,EAAA,cAGEgI,OAAQ,WACQnE,KAAKuE,OAAOqD,OAAO,GAAjC,IACMpD,EAAQxE,KAAKuE,OAAOC,MACpBqD,EAAQ7H,KAAKuE,OAAOsD,MACpBC,EAAO9H,KAAKuE,OACdnH,EAAQ,IACRoB,EAAO,GACPyI,EAAS,GACTc,EAAS,GACTC,SAG6B,iBAAtBhI,KAAKuD,OAAO,GAAG,KACxBnG,EAAQ4C,KAAKuD,OAAO,GAAG,IAGzByE,EAAe5K,OACuB,IAAzB0K,EAAA,eAAiE,IAAzBA,EAAA,cAC/C1I,MAAM6I,SAAS7K,MACjB4K,GAAe,EAAAN,EAAAb,cAAazJ,IAG5B0K,EAAA,SACFb,EAAS,gBAAkBzC,EAAQ,mBAAqBsD,EAAA,OAAiB,WAEvEA,EAAA,SACFC,EAAS,gBAAkBvD,EAAQ,mBAAqBsD,EAAA,OAAiB,WAG3EtJ,GAAQ,eAAiBgG,EAAQ,KACjChG,GAAU,eAAiBgG,EAAQ,qCAAsC,EAAAmD,EAAA1J,YAAWb,GAAS,KAC7FoB,GAAY,eAAiBgG,EAAQ,kBAAoByC,GAAS,EAAAU,EAAA1J,YAAW+J,GAAgBD,EAAS,SAClGF,IACFrJ,GAAU,eAAiBgG,EAAQ,mBAAoB,EAAAmD,EAAA1J,YAAW4J,GAAS,UAE7ErJ,GAAU,SACVA,GAAQ,SAERwB,KAAKyE,KAAKC,UAAYlG,GAKxB0E,OAAQ,WAENlD,KAAKmE,UAEPQ,QAAS,6FCnDX,IAAAgD,EAAAxL,EAAA,cAGEgI,OAAQ,SAAS+D,GACf,IAAMC,EAAQC,SAASC,cAAc,OAC/BC,EAAQF,SAASC,cAAc,OAC/BE,EAAMH,SAASC,cAAc,QAE7BG,EAAiBJ,SAASC,cAAc,OACxCI,EAAiBL,SAASC,cAAc,OAE9CF,EAAMO,UAAY1I,KAAKuE,OAAOC,MAAQ,oBACtC8D,EAAMI,UAAY1I,KAAKuE,OAAOC,MAAQ,WAGtCgE,EAAeE,UAAY1I,KAAKuE,OAAOC,MAAQ,SAC/CgE,EAAe9D,WAAY,EAAAiD,EAAA1J,YAAW+B,KAAKuE,OAAOsD,OAAS,IAC3DY,EAAeC,UAAY1I,KAAKuE,OAAOC,MAAQ,SAC/CiE,EAAe/D,WAAY,EAAAiD,EAAA1J,YAAW+B,KAAKuE,OAAOoE,OAAS,IAE3DJ,EAAI7D,WAAY,EAAAiD,EAAA1J,YAAWiK,IAAS,GACpCI,EAAMM,YAAYL,GAClBJ,EAAMS,YAAYJ,GAClBL,EAAMS,YAAYN,GAClBH,EAAMS,YAAYH,GAElBzI,KAAKyE,KAAKC,UAAY,GACtB1E,KAAKyE,KAAKmE,YAAYT,IAGxBjF,OAAQ,WAENlD,KAAKmE,UAEPQ,QAAS,uGChCI,SAAUjI,EAAGmM,EAAoBC,EAAoBC,GASlE,IARA,IAAIb,SACAL,SAEEmB,EAAahJ,KAAKuE,OAAO0E,qBAAuB,SAAUtM,GAAQ,OAAOA,GACzEuM,EAAclJ,KAAKuE,OAAO4E,sBAAwBN,EAClDO,EAAcpJ,KAAKuE,OAAO8E,sBAAwBP,EAG/ChN,EAAI,EAAGA,EAAIY,EAAEsB,OAAQlC,IAC5B,GAAOY,EAAEZ,KAAOY,EAAEZ,GAAGsB,OAAwB,IAAfV,EAAEZ,GAAGsB,OAAnC,CACK8K,IACHL,EAAQqB,EAAcA,EAAYxM,EAAEZ,GAAGwN,GAAK5M,EAAEZ,GAAGwN,EACjDpB,EAAO,iBAAmBlI,KAAKuJ,MAAMC,QAAU,MAAQ3B,GAAmB,IAAVA,EAAc,wBAAyB,EAAAF,EAAA1J,YAAW4J,GAAS,aAAe,KAE5I,IAAIlL,EAAOqM,EAAWtM,EAAEZ,GAAGa,MACvBS,EAAQgM,EAAY1M,EAAEZ,GAAGsB,MAAOV,EAAEZ,GAAG2N,MAAO/M,EAAEZ,GAAG4N,GAAIhN,EAAEZ,GAAG2C,OAC1DkL,EAAU3J,KAAK4J,WAAa5J,KAAK4J,WAAWlN,EAAEZ,GAAGsB,OAAS2L,EAAMrM,EAAEZ,GAAG4N,IACrEtM,IACF8K,GAAQ,cAAgBlI,KAAKuJ,MAAMM,YAAc,IAAMnN,EAAEZ,GAAG4N,GAAK,KACjExB,GAAU,kDAAoDyB,EAAU,aAAc,EAAAhC,EAAA1J,YAAWtB,GAAQ,QACzGuL,GAAU,sBAAuB,EAAAP,EAAA1J,YAAWb,GAAS,QACrD8K,GAAQ,SAGZ,OAAOA,EAAO,YA3BhB,IAAAP,EAAAxL,EAAA,oQCIe,SAAU2N,GAmBvB,IAlBA,IAAMC,EAAOD,EAAQvG,KAAKyG,QACpBC,EAAkBjK,KAClBkK,EAAQlK,KAAKoE,KAAKC,WAAW8F,GAC7BH,KACAI,EAAUpK,KAAKyE,KAAK+B,cAAc,IAAMyD,EAAgB1F,OAAOC,MAAQ,cACvE6F,EAAeJ,EAAgB1F,OAAO+F,OAEtCC,EAAavK,KAAKoE,KAAKC,WAAWkG,WAArBC,GAEfC,UACAC,UACAC,OAAQ,EACRC,MAAO/I,KAAKgJ,OAAOT,EAAQU,aAAe,IAAM,IAChDC,MAAO,GAENV,EAAaE,YAGTzO,EAAI,EAAGA,EAAIiO,EAAK/L,OAAQlC,IACZ,MAAfiO,EAAKjO,GAAG,KAAe,EAAAkP,EAAAvK,SAAasJ,EAAKjO,GAAG,KAC9CkO,EAAQtK,KAAKqK,EAAKjO,GAAG,IAIzB,IAAMmP,EAAgBjL,KAAKyE,KAAK+B,cAAc,mBAE1C0E,EAAQ,WACkB,QAA1Bb,EAAac,UAAgD,WAA1Bd,EAAac,WAClDD,EAAQ,cAGV,IAAME,EAAgChD,SAASC,cAAc,OAC7D+C,EAA8BC,aAAa,QAAS,6EACtC,eAAVH,GACFD,EAAcrI,OAAOwI,GAGvB,IAAME,EAAqBlD,SAASC,cAAc,OAClDiD,EAAmBD,aAAa,QAAhC,uCAAgFH,EAAhF,UACAD,EAAcrI,OAAO0I,GAErB,IAAMC,EAA0BnD,SAASC,cAAc,OACvDkD,EAAwBF,aAAa,QAAS,6DAChC,aAAVH,GACFD,EAAcrI,OAAO2I,GAGvB,IAAMC,EAAiCpD,SAASC,cAAc,OAQ9D,SAASoD,IACPlB,EAAWG,OAASV,EAAQ9J,MAAMqK,EAAWI,OAAQJ,EAAWI,OAASJ,EAAWK,OACpFL,EAAWQ,MAAQf,EAAQhM,OAQ7B,WACEsN,EAAmB5G,UAAY,GAE/B6F,EAAWG,OAAOgB,QAAQ,SAAAzL,GACxB,IAAM0L,EAAiBtB,EAAapK,MAAM2L,cAAgB3L,EAAMC,MAAM,EAAGmK,EAAapK,MAAM2L,cAAgB,GAAK3L,EAC3G4L,EAAazD,SAASC,cAAc,OAC1CwD,EAAWnH,UAAX,kCAAyDiH,EAAzD,UACAE,EAAWC,YAAc7L,EACzB4L,EAAWR,aAAa,QAAS,eACjCC,EAAmB1I,OAAOiJ,GAE1B,IAAME,EAAwB3D,SAASC,cAAc,QACrD0D,EAAsBV,aAAa,QAAS,4BAC5CU,EAAsBrF,MAAMsF,gBAAkB9B,EAAMnB,MAAM8C,EAAWC,aACrED,EAAWI,QAAQF,GAEnB,IAAMG,EAAiB9D,SAASC,cAAc,OAC9CwD,EAAWM,iBAAiB,YAAa,SAACC,GACxClC,EAAMmC,MAAMR,EAAWC,aACnBzB,EAAab,QAAQ8C,MAAQT,EAAWC,YAAY9N,OAASqM,EAAapK,MAAM2L,gBAClFM,EAAeb,aAAa,QAA5B,wDAA6FhB,EAAac,UAC1Ge,EAAexH,WAEXoF,EAAQQ,OAAOd,QAAQ+C,QAAvB,0CACCV,EAAWC,YAChBD,EAAWjJ,OAAOsJ,MAGtBL,EAAWM,iBAAiB,WAAY,SAACC,GACvClC,EAAMsC,SACNN,EAAeO,WAEjBZ,EAAWM,iBAAiB,QAAS,SAACC,GACpC,IAAIM,EAAU,EACRC,EAAWpC,EAAWE,OAAO9G,QAAQkI,EAAWC,aAClDa,EAAW,GACbpC,EAAWE,OAAO/K,KAAKmM,EAAWC,aAClCY,EAAU,MAGVnC,EAAWE,OAAOmC,OAAOD,EAAU,GACnCD,EAAU,GAEZb,EAAWnF,MAAMgG,QAAUA,EAC3BxC,EAAM2C,OAAOhB,EAAWC,kBAnDNvP,KAAK0N,EAAiBM,EAAWG,QACnDH,EAAWQ,MAAQR,EAAWK,OAwDpC,WACEW,EAAwB7G,UAAY,GACpC0G,EAA8B1G,UAAY,GAC1C8G,EAA+B9G,UAAY,GAE3C,IAAMoI,EAAU1E,SAASC,cAAc,KACjC0E,EAAY3E,SAASC,cAAc,KAEnC2E,EAAW,SAACC,GAChB,GAAkB,YAAdA,EAAyB,CAC3B,IAAMC,EAAO3C,EAAWI,OAASJ,EAAWK,MAC5C,OAAIsC,EAAO3C,EAAWQ,WACpBR,EAAWI,OAASuC,QAGtB3C,EAAWI,OAAS,GAItB,IAAMuC,EAAO3C,EAAWI,OAASJ,EAAWK,MAE1CL,EAAWI,OADTuC,GAAQ,EACUA,EAIFrL,KAAKsL,MAAM5C,EAAWQ,MAAMR,EAAWK,OAASL,EAAWK,OAGjFmC,EAAUZ,iBAAiB,QAAS,WAClCa,EAAS,WACTvB,IACA2B,MAGFN,EAAQX,iBAAiB,QAAS,WAChCa,EAAS,YACTvB,IACA2B,MAG4B,SAA1B/C,EAAac,UAAiD,UAA1Bd,EAAac,UACnD2B,EAAQzB,aAAa,QAAS,MAC9B0B,EAAU1B,aAAa,QAAS,QAChCE,EAAwB3I,OAAOmK,GAC/BxB,EAAwB3I,OAAOkK,KAG/BA,EAAQzB,aAAa,QAAS,QAC9B0B,EAAU1B,aAAa,QAAS,SAChCD,EAA8BxI,OAAOkK,GACrCtB,EAA+B5I,OAAOmK,KAzGZxQ,KAAK0N,GAEjCC,EAAMmD,SA4GR,SAASD,IAEHhF,SAASkF,WAAalF,SAASkF,UAAUC,MAC/BnF,SAASkF,UACXC,QAEHxR,OAAOyR,cACFzR,OAAOyR,eACTC,kBAlIdjC,EAA+BH,aAAa,QAAS,8EACvC,eAAVH,GACFD,EAAcrI,OAAO4I,GAGvBC,qJA1DFtP,EAAA,UAEAuR,EAAAvR,EAAA,gICFe,SAAUwR,EAAWC,GAClC,IAAMC,EAAWhM,KAAKsF,IAAI,IAAI2G,KAAKH,GAAWxO,UAAY,IAAI2O,KAAKF,GAASzO,WACtE4O,GACJ,MACA,MACA,MACA,MACA,MACA,OACA,OACA,MACA,OACA,MACA,MACA,OAIF,OAAIF,GAAY,QACP,SAASG,GACd,IAAMC,EAAO,IAAIH,KAAKE,GACtB,OAAOD,EAAOE,EAAKC,YAAc,IAAMD,EAAKE,eAIvCN,GAAY,MACZ,SAASG,GACd,IAAMC,EAAO,IAAIH,KAAKE,GACtB,OAAOD,EAAOE,EAAKC,YAAc,IAAMD,EAAKG,WAIvCP,GAAY,KACZ,WAIA,8BCrCXpS,EAAAD,QAAAS,mQCgBe,SAASoS,GACtB,IAAIC,SAeJ,OA2NF,SAA4BC,GAC1B,GAAI,oBAAuBxS,OAAQ,OACnCA,OAAOyS,SAAWzS,OAAOsR,OAAS,aAC9BtR,OAAOoQ,iBACTpQ,OAAOoQ,iBAAiB,SAAUoC,GAAI,GAE/BxS,OAAO0S,aACd1S,OAAO0S,YAAY,WAAYF,GAhPjCG,CAAmB,WACbJ,GACFK,aAAaL,GAEf,IAAMM,EAASP,EAAIQ,QAAQ7Q,OAAS,GAAM,IAAO,IACjDsQ,EAAQQ,WAAW,YACjB,EAAAhP,EAAAjC,MAAKwQ,EAAIQ,QAAS,SAAS3E,GACrBA,EAAM9F,KAAKC,WAAW8F,IACxBD,EAAM9F,KAAKC,WAAW8F,GAAGkD,YAG5BuB,KAMP,WACE,IAAMG,GACJ7J,kBACA8J,iBACAC,gBACA3K,mBAsKF,OArHA,EAAAxE,EAAAjC,OA5CE,OACA,cACA,YACA,MACA,QACA,QACA,OACA,MACA,OACA,SAGA,kBACA,yBACA,uBACA,iBACA,kBACA,kBACA,qBA0BY,SAASyF,EAAM7E,GAC3BsQ,EAAMzL,IACJa,OAAQ,WAAU,IAAA+K,EAAAlP,KACV8J,EA1BZ,WACE,IAAMqF,GACJC,OAAQpP,KAAKyE,KAAK+B,cAAc,IAAMxG,KAAKuE,OAAOC,MAAQ,wBAC1DuE,OACEsG,QAASrP,KAAKuE,OAAOqD,QAEvBrE,MACEqE,YAAa5H,KAAKuE,OAAO+K,cACzBtF,WACA1G,KAAMtD,KAAKuE,OAAOjB,KAAKpC,QAAQ,cAAe,KAEhDqO,MACEC,MAAOxP,KAAKyE,KAAK+B,cAAc,IAAMxG,KAAKuE,OAAOC,MAAQ,wBAAwBiL,YACjFC,OACE1P,KAAKyE,KAAK+B,cAAc,IAAMxG,KAAKuE,OAAOC,MAAQ,wBAAwBsG,aAAe,EACvF9K,KAAKyE,KAAK+B,cAAc,IAAMxG,KAAKuE,OAAOC,MAAQ,wBAAwBsG,kBACxE3K,IAIV,OAAO,EAAAwP,EAAA7O,eAAed,KAAKuE,OAAQ4K,IAMG5S,KAAKyD,MAEvC,GAA8B,IAA1BA,KAAKuD,OAAO,GAAGvF,QAAuC,IAAvBgC,KAAKuD,OAAOvF,OAmE/C,GA9Da,UAATsF,GAEFwG,EAAQQ,OAAOgC,MAAO,EACtBxC,EAAQvG,KAAKyG,UACXhK,KAAK6H,SAAW7H,KAAKuD,OAAO,GAAG,GAC/BvD,KAAKuD,OAAO,GAAG,MAGD,QAATD,GAA2B,UAATA,EACzBwG,EAAQvG,KAAKyG,QAAUhK,KAAKuD,OAAOrD,MAAM,IAKrCoD,EAAKK,QAAQ,gBAAkB,IACjCmG,EAAQ8F,KAAKC,QAAUvM,EAAKK,QAAQ,gBAAkB,IAGpD,EAAAqH,EAAAvK,SAAaT,KAAKuD,OAAO,GAAG,KAE9BuG,EAAQ8F,KAAKtG,EAAIQ,EAAQ8F,KAAKtG,MAC9BQ,EAAQ8F,KAAKtG,EAAEhG,KAAO,aACtBwG,EAAQ8F,KAAKtG,EAAEwG,KAAOhG,EAAQ8F,KAAKtG,EAAEwG,OACnCC,OAAQ/P,KAAKuE,OAAOyL,aAAc,EAAAC,EAAAxP,SAAoBT,KAAKuD,OAAO,GAAG,GAAIvD,KAAKuD,OAAO,GAAKvD,KAAKuD,OAAO,GAAG,GAAKvD,KAAKuD,OAAO,GAAG,IAC7H2M,SAAWpO,IAAK,IAGlBgI,EAAQvG,KAAKyG,QAAQ,OACrB,EAAAlK,EAAAjC,MAAKmC,KAAKgF,QAAQnE,aAAa,GAAI,SAASP,EAAMxE,GAC5CA,EAAI,IACNwE,EAAO,IAAIwN,KAAKxN,IAElBwJ,EAAQvG,KAAKyG,QAAQ,GAAGlO,GAAKwE,IAE/BwJ,EAAQvG,KAAKyG,QAAQ,GAAG,GAAK,IAC7BF,EAAQvG,KAAK+F,EAAI,IACbtJ,KAAKuE,OAAO4L,SAAWnQ,KAAKuD,OAAO,GAAGvF,OAAS,IACjD8L,EAAQvG,KAAK6M,QAAWpQ,KAAKgF,QAAQjB,UAAU,GAAG7D,MAAM,OAK1D4J,EAAQ8F,KAAKtG,EAAIQ,EAAQ8F,KAAKtG,MAC9BQ,EAAQ8F,KAAKtG,EAAEhG,KAAO,WACtBwG,EAAQ8F,KAAKtG,EAAE+G,WAAarQ,KAAKgF,QAAQnE,aAAa,GAAGX,MAAM,GAC3DF,KAAKuE,OAAO4L,SAAWnQ,KAAKuD,OAAO,GAAGvF,OAAS,IACjD8L,EAAQvG,KAAK6M,QAAWpQ,KAAKgF,QAAQjB,UAAU,GAAG7D,MAAM,MAI9B,IAA1BF,KAAKuD,OAAO,GAAGvF,SACjB8L,EAAQQ,OAAOgC,MAAO,IAGxB,EAAAxM,EAAAjC,MAAKmC,KAAKuD,OAAO,GAAI,SAASjD,EAAMxE,GAC9BA,EAAI,GACNgO,EAAQvG,KAAKyG,QAAQtK,KAAKM,KAAKgF,QAAQnE,aAAa/E,KAEtDwU,KAAKtQ,SAImB,IAAxB8J,EAAQQ,OAAOgC,KAAe,CAC9B,IAAMiE,OAAiBzG,GAEvByG,EAAUhN,KAAKwF,MA6C3B,SAA6BA,EAAOrM,GAClC,IAAM4G,EAAOtD,KAAKuE,OAAOjB,KACzB,GAAItD,KAAKoE,KAAKC,WAAWkG,YACX,UAATjH,EAE+B,CAC5B,IAAMkN,EAAQxQ,KAAKoE,KAAKC,WAAWkG,WAAWG,OAC9C,OAAKhO,EAAEgN,IAAM8G,EAAM7M,QAAQjH,EAAEgN,KAAO,GAC9BhN,IAAMA,EAAEgN,IAAM8G,EAAM7M,QAAQjH,IAAM,EAC7BqM,EAGI,UAATzF,GAA6B,QAATA,EACf,iBAGA,kBAKjB,OAAOyF,GAlE4CuH,KAAKtQ,MAGhDuQ,EAAU/G,SACRiH,SAAUC,UACVX,QACElI,MAAO7H,KAAKuE,OAAOiF,QAAQuG,OAAOlI,MAClCzK,MAAO,SAACA,EAAOqM,EAAOC,EAAIjL,GACxB,IAAIkS,EA8DtB,SAAkCvT,EAAOqM,EAAOC,EAAIjL,GAClD,IAAM6E,EAAOtD,KAAKuE,OAAOjB,KAEzB,IAAItD,KAAKoE,KAAKC,WAAWkG,YACX,UAATjH,EASH,OAAOlG,EAND,IAAMoT,EAAQxQ,KAAKoE,KAAKC,WAAWkG,WAAWG,OAC9C,OAAI8F,EAAM7M,QAAQ+F,IAAO,EAChBtM,OADT,GAtEsDb,KAAK2S,EAAM9R,EAAOqM,EAAOC,EAAIjL,GAK3E,OAJIyQ,EAAK3K,OAAOiF,SAAW0F,EAAK3K,OAAOiF,QAAQuG,QAAUb,EAAK3K,OAAOiF,QAAQuG,OAAO3S,QAElFuT,EAAiBzB,EAAK3K,OAAOiF,QAAQuG,OAAO3S,MAAMb,KAAK2S,EAAMyB,EAAgBlH,EAAOC,EAAIjL,IAEnFkS,KAKbJ,EAAUjG,OAAOgC,MAAO,EAGxBtM,KAAKoE,KAAKC,WAAV,GAA6B8F,UAAGyG,SAASL,GACzCM,UAAmBtU,KAAKyD,KAAM8J,QAGhC9J,KAAKoE,KAAKC,WAAV,GAA6B8F,UAAGyG,SAAS9G,QA9FzC9J,KAAKkF,QAAQ,uBAkGjBhC,OAAQ,WAENlD,KAAKmE,UAEPQ,QAAS,WACH3E,KAAKoE,KAAKC,WAAV,KACFrE,KAAKoE,KAAKC,WAAV,GAA2BM,UAC3B3E,KAAKoE,KAAKC,WAAV,GAA6B,UAM9B0K,EA9KA+B,IAhCT,QAAA3U,EAAA,KAGA2D,KAFA3D,EAAA,IAEAA,EAAA,IAEAwT,GADAxT,EAAA,GACAA,EAAA,QACAA,EAAA,QACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SAEAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,kJCVe,SAAUoH,GACvB,OAAKxE,UAAUf,OACXuF,aAAgBH,WAClBpD,KAAKgF,QAAUzB,EACRvD,MAOX,SAAuB+Q,GACrB,IAAI/L,EACAgM,EACA3N,EACAY,EAEAgN,EACAC,EACArJ,EACAvE,EAJA6N,KAMJH,EAAUhR,KAAKuE,OAAOyM,QACtB3N,EAAO0N,EAASK,aAChBH,OAAmC,IAAnBF,EAASE,MAAyBF,EAASE,SAa/B,YAV5BA,GAAQ,EAAA9N,EAAAtE,SACNwS,cAAe,KACfC,iBAAkB,KAClBC,WACAC,SAAU,KACV5M,SAAU,KACV6M,UAAW,KACXC,SAAU,MACTT,IAEOI,cACRpN,EAAS,SAEsB,eAAxBgN,EAAMI,cACbpN,EAAS,aAEsB,kBAAxBgN,EAAMI,cACRJ,EAAMO,UAAaP,EAAMrM,WAC5BX,EAAS,QAIJgN,EAAMI,gBACRJ,EAAMO,UAAaP,EAAMrM,SAGrBqM,EAAMO,WAAaP,EAAMrM,SAC5BqM,EAAMO,oBAAoBzT,OAASkT,EAAMO,SAASxT,OAAS,GAC7DiG,EAAS,wBACTkN,EAAWzR,KAAKuR,EAAMO,WAGtBvN,EAAS,iBAGJgN,EAAMrM,WAAaqM,EAAMO,UAChCvN,EAAS,WACTkN,EAAWzR,KAAKsR,IAETC,EAAMO,UAAYP,EAAMrM,WAC3BqM,EAAMO,oBAAoBzT,OAASkT,EAAMO,SAASxT,OAAS,GAC7DiG,EAAS,0BACTkN,EAAWzR,KAAKuR,EAAMO,UACtBL,EAAWzR,KAAKsR,KAGhB/M,EAAS,mBACTkN,EAAWzR,KAAKsR,KAvBlB/M,EAAS,UA4BRA,IAI4B,iBAApB8M,EAASY,SAClB1N,EAAS,UAKP8M,EAASY,kBAAkB5T,OAASgT,EAASY,OAAO3T,OAAS,KAI3D+S,EAASY,OAAO,GAAGF,WAAiD,iBAA5BV,EAASY,OAAO,GAAGvU,OAAiD,MAA5B2T,EAASY,OAAO,GAAGvU,QACrG6G,EAAS,WACTkN,EAAWzR,KAAKsR,IAKsB,iBAA7BD,EAASY,OAAO,GAAGA,SAC5B1N,EAAS,kBAKP8M,EAASY,OAAO,GAAGvU,iBAAiBW,QACtCkG,EAAS,mBACTkN,EAAWzR,KAAKsR,IAKgB,iBAAvBD,EAASY,OAAO,SACI,IAAnBZ,EAASa,QACjB3N,EAAS,SAETgN,EAAMW,MAAQb,EAASa,OAKQ,iBAAvBb,EAASY,OAAO,IAAgD,iBAAtBZ,EAASY,OAAO,SAA6C,IAAnBZ,EAASa,QACvG3N,EAAS,QAKNA,IACHA,EAAS,gBAMVjE,KAAKuE,OAAOsD,QAEbA,EADExE,EAAKwO,aACCxO,EAAKwO,aAyCnB,SAAyBZ,GACvB,IACIpJ,EADAiK,EAAWb,EAAMI,cAAgBJ,EAAMI,cAAcnQ,QAAQ,IAAK,KAAO,GAG7E2G,EAAQiK,EAAS5Q,QAAS,OAAQ,SAASrF,GACzC,OAAOA,EAAEkW,gBAGPd,EAAMK,mBACRzJ,GAAS,MAAQoJ,EAAMK,kBAEzB,OAAOzJ,EAjDKmK,CAAgBf,GAE1BjR,KAAKuE,OAAOsD,MAAQA,GAIjB7H,KAAKuE,OAAOjB,OAEbA,EADED,EAAK4O,eAAiB5O,EAAK4O,cAAcC,WACpC7O,EAAK4O,cAAcC,WA4ChC,SAAwBjO,GACtB,IAAIX,SACJ,OAAQW,GACN,IAAK,SACHX,EAAO,SACP,MACF,IAAK,WACHA,EAAO,OACP,MACF,IAAK,iBACL,IAAK,wBACHA,EAAO,MACP,MACF,IAAK,mBACL,IAAK,0BACHA,EAAO,OACP,MACF,IAAK,SACHA,EAAO,iBACP,MACF,IAAK,OACL,IAAK,aACL,QACEA,EAAO,QAEX,OAAOA,EAlEI6O,CAAelO,GAExBjE,KAAKuE,OAAOjB,KAAOA,GAIrB4N,EAAiB9N,UAAQa,OAAOlC,MAAM/B,MAAOiE,GAAQ1D,OAAO4Q,IAG5DnM,EAAUkM,GAAe,EAAA/N,EAAAtE,QAAOkS,GAAYE,MAASA,KAGjDhN,EAAON,QAAQ,aAAe,GAChCqB,EAAQoN,aAAa,EAAG,SAAShV,EAAOtB,GACtC,OAAO,IAAIgS,KAAK1Q,KAUpB,OANA4H,EAAQqN,UAAU,EAAG,SAASjV,EAAOtB,GACnC,OAAO,EAAAwW,EAAAtR,eAAc5D,KAGvB4C,KAAKgF,QAAUA,EAERhF,MAxKgBzD,KAAKyD,KAAMuD,GANJvD,KAAKgF,QAAQzB,QAL7C,MAAAgP,EAAApW,EAAA,wCACAgH,EAAAhH,EAAA,GACAmW,EAAAnW,EAAA,oFCFgBqW,eAAT,SAASA,EAAeC,EAAKC,EAAItV,GACtC,MAAiB,iBAANsV,EACFF,EAAeC,EAAKC,EAAGpL,MAAM,KAAMlK,GACxB,GAAXsV,EAAG1U,aAAqBmC,IAAR/C,GAA6B,OAARqV,QACtB,IAAfA,EAAIC,EAAG,IACPD,EAAIC,EAAG,IAAMtV,EACF,GAAXsV,EAAG1U,OACHyU,OACc,IAAPC,QAAqC,IAARD,GACjC,OAAPC,GAAuB,OAARD,QACO,IAAfA,EAAIC,EAAG,IACV,KAEAF,EAAeC,EAAIC,EAAG,IAAKA,EAAGxS,MAAM,GAAI9C,qSCVnCuV,QAAT,SAASA,EAAQC,GACtB,IAAIC,KACJ,IAAK,IAAI/W,KAAK8W,EACZ,GAAKA,EAAGlV,eAAe5B,GACvB,GAAsB,UAAlByD,EAAQqT,EAAG9W,KAA6B,OAAV8W,EAAG9W,GAAa,CAChD,IAAIgX,EAAaH,EAAQC,EAAG9W,IAC5B,IAAK,IAAIwN,KAAKwJ,EACPA,EAAWpV,eAAe4L,KAC/BuJ,EAAS/W,EAAI,IAAMwN,GAAKwJ,EAAWxJ,SAGrCuJ,EAAS/W,GAAK8W,EAAG9W,GAGrB,OAAO+W,4FCXM,SAAoBxE,GAEjC,OADAjL,EAAUiL,EACH,SAAS1R,GACd,IAAImN,EAAU/L,MAAMN,UAAUyC,MAAM3D,KAAKwC,UAAW,GAEpD,GAAKgU,EAAQpW,GAIX,OAAOoW,EAAQpW,GAAMoF,MAAM/B,KAAM8J,GAHjC,KAAM,oCAVZ,IAAAhK,EAAA3D,EAAA,GACA6W,EAAA7W,EAAA,IACA8W,EAAA9W,EAAA,IAJIiH,SA2LJ,IAAM2P,GACJ/D,OAxKF,WACE,OAAO,SAASkE,GACd,OAAO,IAAI9P,GACR7B,KAAK,QAAS,UAAW2R,EAAIvB,QAC7BrO,KAAK,YAqKVsB,SAhKF,WACE,IAAIkF,EAAU/L,MAAMN,UAAUyC,MAAM3D,KAAKwC,WACzC,OAAO,SAASmU,GACd,IAAIlO,GAAU,IAAI5B,GACfE,KAAK,YAKR,OAJA,EAAAxD,EAAAjC,MAAKqV,EAAIvB,OAAQ,SAASwB,EAAQrX,GAChC,IAAI2C,EAAQqL,EAAQ,IAAqB,kBAAfA,EAAQ,GAAyBqJ,EAAO1B,UAAUnQ,IAAM6R,EAAO1B,UAAUpQ,MACnG2D,EAAQzD,KAAK,SAAU9C,GAAQ0U,EAAO/V,SAEjC4H,IAwJToO,iBApJF,WACE,OAAO,SAASF,GACd,IAAIlO,GAAU,IAAI5B,GACfE,KAAK,kBAUR,OATA,EAAAxD,EAAAjC,MAAKqV,EAAIvB,OAAQ,SAASwB,EAAQrX,GAChC,IAAImE,GACJ,EAAAH,EAAAjC,MAAKsV,EAAQ,SAAS/V,EAAO2D,GACf,WAARA,IACFd,EAAQc,KAGZiE,EAAQzD,KAAK,SAAUb,OAAOyS,EAAOlT,KAAUkT,EAAOxB,UAEjD3M,IAwITqO,mBAnIF,WACE,IAAIvJ,EAAU/L,MAAMN,UAAUyC,MAAM3D,KAAKwC,WACzC,OAAO,SAASmU,GACd,IAAIlO,GAAU,IAAI5B,GACfE,KAAK,oBAkBR,OAjBA,EAAAxD,EAAAjC,MAAKqV,EAAIvB,OAAQ,SAASwB,EAAQrX,GAChC,IAAI2C,EAAQqL,EAAQ,IAAqB,kBAAfA,EAAQ,GAAyBqJ,EAAO1B,UAAUnQ,IAAM6R,EAAO1B,UAAUpQ,MAC/F8R,EAAO/V,MAAMY,QACf,EAAA8B,EAAAjC,MAAKsV,EAAO/V,MAAO,SAASkW,EAAOC,GACjC,IAAItT,GACJ,EAAAH,EAAAjC,MAAKyV,EAAO,SAASlW,EAAO2D,GACd,WAARA,IACFd,EAAQc,KAGZiE,EAAQzD,KAAMb,OAAO4S,EAAMrT,IAASxB,GAAS6U,EAAM3B,UAIrD3M,EAAQpF,UAAUnB,KAGfuG,IA8GTwO,wBAzGF,WACE,IAAI1J,EAAU/L,MAAMN,UAAUyC,MAAM3D,KAAKwC,WACzC,IAAK+K,EAAQ,GAAI,KAAM,mGACvB,OAAO,SAASoJ,GACd,IAAIlO,GAAU,IAAI5B,GACfE,KAAK,yBAKR,OAJA,EAAAxD,EAAAjC,MAAKqV,EAAIvB,OAAQ,SAASwB,EAAQrX,GAChC,IAAI2X,EAAWN,EAAOrJ,EAAQ,GAAG,IAAM,IAAMqJ,EAAOrJ,EAAQ,GAAG,IAC/D9E,EAAQzD,KAAM,SAAUkS,GAAYN,EAAOxB,UAEtC3M,IAgGT0O,0BA3FF,WACE,IAAI5J,EAAU/L,MAAMN,UAAUyC,MAAM3D,KAAKwC,WACzC,IAAK+K,EAAQ,GAAI,KAAM,mGACvB,OAAO,SAASoJ,GACd,IAAIlO,GAAU,IAAI5B,GACfE,KAAK,2BAQR,OAPA,EAAAxD,EAAAjC,MAAKqV,EAAIvB,OAAQ,SAASwB,EAAQrX,GAChC,IAAI2C,EAAQqL,EAAQ,IAAqB,kBAAfA,EAAQ,GAAyBqJ,EAAO1B,UAAUnQ,IAAM6R,EAAO1B,UAAUpQ,OACnG,EAAAvB,EAAAjC,MAAKsV,EAAA,MAAiB,SAAS/V,EAAOmW,GACpC,IAAItT,EAAQ7C,EAAM0M,EAAQ,GAAG,IAAM,IAAM1M,EAAM0M,EAAQ,GAAG,IAC1D9E,EAAQzD,KAAMtB,EAAOxB,GAASrB,EAAMuU,YAGjC3M,IA+ET2O,OA3EF,WACE,OAAO,SAAST,GACd,IAAIvB,EAAQC,EAAO5M,EAsBnB,YArByB,IAAdkO,EAAItB,YACc,IAAfsB,EAAIvB,QACTuB,EAAIvB,kBAAkB5T,OAEvB4T,EAASuB,EAAIvB,OACbC,EAAQsB,EAAItB,YAEiB,IAArBsB,EAAIvB,OAAOC,YACS,IAAtBsB,EAAIvB,OAAOA,QAChBuB,EAAIvB,OAAOA,kBAAkB5T,QAE9B4T,EAASuB,EAAIvB,OAAOA,OACpBC,EAAQsB,EAAIvB,OAAOC,QAE3B5M,GAAU,IAAI5B,GAAUE,KAAK,WACrB3D,aAAa,eACrB,EAAAG,EAAAjC,MAAK8T,EAAQ,SAASvU,EAAOtB,QACN,IAAV8V,GAAyBA,EAAM9V,IACxCkJ,EAAQpF,UAAUc,OAAOkR,EAAM9V,GAAGwV,mBAAoBlU,MAGnD4H,IAoDTvF,KAhDF,WACE,OAAO,SAASyT,GACd,IAAIlO,GAAU,IAAI5B,GACfE,KAAK,QAIR,OAHA,EAAAxD,EAAAjC,MAAKqV,EAAIvB,OAAQ,SAASvU,EAAOtB,GAC/BkJ,EAAQzD,KAAO,SAAUb,OAAO5E,EAAE,IAAMsB,KAEnC4H,IA0CT4O,WAtCF,WACE,OAAO,SAASV,GAId,IAHA,IAAIlO,GAAU,IAAI5B,GACfE,KAAK,cAFUuQ,EAAA,SAIT/X,GACP,IAAIqX,EAASD,EAAIvB,OAAO7V,IACxB,EAAAgE,EAAAjC,OAAK,EAAAmV,EAAAL,SAAQQ,GAAS,SAAS/V,EAAO2D,GACpCiE,EAAQzD,KAAMR,EAAKL,OAAO5E,EAAE,IAAMsB,MAH7BtB,EAAE,EAAGA,EAAE,EAAGA,IAAI+X,EAAd/X,GAQT,IAAMgY,EAAQhX,OAAOiX,MAAK,EAAAf,EAAAL,SAAQO,EAAIvB,OAAO,KAE7C,IAAS7V,EAAE,EAAGA,EAAEoX,EAAIvB,OAAO3T,OAAQlC,IAAI,CAErC,IADA,IAAIqX,GAAUrX,EAAE,GACPkY,EAAO,EAAGA,EAAOF,EAAM9V,OAAQgW,IACtCb,EAAOzT,MAAK,EAAAuT,EAAAT,gBAAeU,EAAIvB,OAAO7V,GAAIgY,EAAME,KAElDhP,EAAQ5E,OAAOM,OAAO5E,EAAE,IAAMqX,EAIhC,OADAnO,EAAQiP,aAAa,GACdjP,sFClLKoN,aAAT,SAAsB8B,EAAGhV,GAC9B,IAAIa,EAAOC,KACPvB,EAAsB,iBAANyV,EAAkBA,EAAIlU,KAAKI,OAAO,GAAGuD,QAAQuQ,GAE7DzV,GAAS,IAEU,mBAAVS,GAET,EAAAY,EAAAjC,MAAKkC,EAAKwD,OAAQ,SAASlD,EAAKvE,GAC9B,IAAIwE,EACAxE,EAAI,QAEc,KADpBwE,EAAOpB,EAAM3C,KAAKwD,EAAMM,EAAI5B,GAAQ3C,EAAGuE,MAErCN,EAAKK,OAAOtE,GAAG2C,GAAS6B,OAKpBpB,GAASA,aAAiBnB,UACpCmB,EAAQA,OAEElB,QAAU+B,EAAKwD,OAAOvF,OAAS,EACvCkB,EAAQA,EAAMqB,QAAQ,EAAAC,EAAAC,SAAeV,EAAKwD,OAAOvF,OAAS,EAAIkB,EAAMlB,UAKpE,EAAA8B,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GACtBiE,EAAKK,OAAOpC,OAAQ,EAAIkB,EAAMlB,QAChC4B,YAAUrD,KAAKwD,EAAMW,OAAQX,EAAKK,OAAOpC,YAK/C,EAAA8B,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GAC1BiE,EAAKK,OAAOtE,EAAE,GAAG2C,GAASrB,MAMhC,OAAO2C,KAGOsS,UAAT,SAAmB6B,EAAGhV,GAC3B,IAAIa,EAAOC,KACPvB,EAAsB,iBAANyV,EAAkBA,EAAIlU,KAAKa,aAAa,GAAG8C,QAAQuQ,GAEnEzV,GAAS,IAEU,mBAAVS,GAET,EAAAY,EAAAjC,MAAKkC,EAAKwD,OAAO9E,GAAQ,SAASrB,EAAOtB,GACvC,IAAI8E,EAAMb,EAAKc,aAAa/E,GAC5BwE,EAAOpB,EAAM3C,KAAKwD,EAAM3C,EAAOtB,EAAG8E,QACd,IAATN,IACTP,EAAKK,OAAO3B,GAAO3C,GAAKwE,OAIlBpB,GAASA,aAAiBnB,UACpCmB,EAAQA,OAEElB,QAAU+B,EAAKK,OAAO,GAAGpC,OAAS,EAC1CkB,EAAQA,EAAMqB,QAAQ,EAAAC,EAAAC,SAAgBV,EAAKK,OAAO,GAAGpC,OAAS,EAAIkB,EAAMlB,UAGxE,EAAA8B,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GACtBiE,EAAKK,OAAO,GAAGpC,OAAQ,EAAIkB,EAAMlB,QACnC2B,eAAapD,KAAKwD,EAAMW,OAAQX,EAAKK,OAAO,GAAGpC,YAKrD,EAAA8B,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GAC1BiE,EAAKK,OAAO3B,GAAO3C,EAAE,GAAKsB,MAKhC,OAAO2C,GApFT,MAAAD,EAAA3D,EAAA,GACA0D,EAAA1D,EAAA,uCACAgY,EAAAhY,EAAA,oFCCgBiY,YAAT,SAAqBhW,EAAKiW,GAC/B,IAAItU,EAAOC,KACPsU,EAAOtU,KAAKI,OAAO,GAAGF,MAAM,GAC5B6J,KAEAwE,EAAK8F,GAAQE,UAAoB7R,eAsBrC,OAnBA,EAAA5C,EAAAjC,MAAKyW,EAAM,SAAShU,EAAMxE,GACxBiO,EAAKrK,KAAKK,EAAKc,aAAa/E,EAAE,GAAGoE,MAAM,MAEzC6J,EAAK9G,KAAK,SAASpH,EAAE2Y,GAEnB,IAAIC,EAAKlG,EAAGhS,KAAKwD,EAAMlE,GAAK0S,EAAGhS,KAAKwD,EAAMyU,GAC1C,OAAIC,EACc,QAARrW,EAAgB,GAAK,EACnBqW,EAGH,EAFS,QAARrW,GAAiB,EAAI,KAKjC,EAAA0B,EAAAjC,MAAKkM,EAAM,SAASnJ,EAAK9E,GACvBiE,EACGkU,aAAanY,EAAE,GACf4Y,aAAa5Y,EAAE,EAAG8E,EAAI,GAAIA,EAAIV,MAAM,MAElCH,KAGO4U,SAAT,SAAkBvW,EAAKiW,GAC5B,IAAItU,EAAOC,KACPsU,EAAOtU,KAAKI,OAAOF,MAAM,EAAE,GAC3B0U,EAAO5U,KAAKI,OAAOF,MAAM,GACzBqO,EAAK8F,GAAQE,UAAoB5R,YAarC,OAZAiS,EAAK3R,KAAK,SAASpH,EAAG2Y,GAEpB,IAAIC,EAAKlG,EAAGhS,KAAKwD,EAAMlE,GAAK0S,EAAGhS,KAAKwD,EAAMyU,GAC1C,OAAIC,EACc,QAARrW,EAAgB,GAAK,EACnBqW,EAGH,EAFS,QAARrW,GAAiB,EAAI,IAKjC2B,EAAKwD,KAAK+Q,EAAK/T,OAAOqU,IACf7U,GAlDT,MAAAD,EAAA3D,EAAA,GACA0Y,EAAA1Y,EAAA,wHCCgB0E,aAAT,SAAsBqT,GAC3B,IAAMvC,KACAlT,EAAsB,iBAANyV,EAAkBA,EAAIlU,KAAKI,OAAO,GAAGuD,QAAQuQ,GAE/DzV,GAAS,QAAsC,IAA1BuB,KAAKI,OAAO,GAAG3B,KACtC,EAAAqB,EAAAjC,MAAKmC,KAAKI,OAAQ,SAASC,EAAKvE,GAC9B6V,EAAOjS,KAAKW,EAAI5B,MAGpB,OAAOkT,KAGO5N,UAAT,SAAmBmQ,GACxB,IAAIvC,KACElT,EAAsB,iBAANyV,EAAkBA,EAAIlU,KAAKa,aAAa,GAAG8C,QAAQuQ,GAErEzV,GAAS,QAAmC,IAAvBuB,KAAKI,OAAO3B,KACnCkT,EAAS3R,KAAKI,OAAO3B,IAEvB,OAAOkT,GArBT,IAAA7R,EAAA3D,EAAA,oFCIgBuY,aAAT,SAAsBjW,EAAOL,EAAKc,GACvC,IAAMa,EAAOC,KACPC,OAAiBE,IAAR/B,EAAqBA,EAAM,KAErB,mBAAVc,GAETa,EAAKK,OAAO,GAAGwM,OAAOnO,EAAO,EAAGwB,IAChC,EAAAH,EAAAjC,MAAKkC,EAAKK,OAAQ,SAASC,EAAKvE,GAC9B,IAAIwE,EACAxE,EAAI,SAEc,KADpBwE,EAAOpB,EAAM3C,KAAKwD,EAAMM,EAAKvE,MAE3BwE,EAAO,MAETP,EAAKK,OAAOtE,GAAG8Q,OAAOnO,EAAO,EAAG6B,SAM5BpB,GAASA,aAAiBnB,UAClCmB,EAAQA,OAEElB,QAAU+B,EAAKK,OAAOpC,OAAS,EACvCkB,EAAQA,EAAMqB,QAAQ,EAAAC,EAAAC,SAAeV,EAAKK,OAAOpC,OAAS,EAAIkB,EAAMlB,UAKpE,EAAA8B,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GACtBiE,EAAKK,OAAOpC,OAAQ,EAAIkB,EAAMlB,QAChC4B,YAAUrD,KAAKwD,EAAMW,OAAQX,EAAKK,OAAOpC,WAK/C+B,EAAKK,OAAO,GAAGwM,OAAOnO,EAAO,EAAGwB,IAChC,EAAAH,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GAC1BiE,EAAKK,OAAOtE,EAAE,GAAG8Q,OAAOnO,EAAO,EAAGrB,MAItC,OAAO2C,KAGO+U,UAAT,SAAmBrW,EAAOL,EAAKc,GACpC,IAAMa,EAAOC,KACPW,KACAV,OAAiBE,IAAR/B,EAAqBA,EAAM,KAC1CuC,EAAOjB,KAAKO,GAES,mBAAVf,IACT,EAAAY,EAAAjC,MAAKkC,EAAKK,OAAO,GAAI,SAASH,EAAOnE,GACnC,IAAI8E,SACAN,SACAxE,EAAI,IACN8E,EAAMb,EAAKc,aAAa/E,QAEJ,KADpBwE,EAAOpB,EAAM3C,KAAKwD,EAAMa,EAAK9E,MAE3BwE,EAAO,MAETK,EAAOjB,KAAKY,MAGhBP,EAAKK,OAAOwM,OAAOnO,EAAO,EAAGkC,MAGrBzB,GAASA,aAAiBnB,UAClCmB,EAAQA,OAEElB,QAAU+B,EAAKK,OAAO,GAAGpC,OAAS,EAC1CkB,EAAQA,EAAMqB,QAAQ,EAAAC,EAAAC,SAAgBV,EAAKK,OAAO,GAAGpC,OAAS,EAAIkB,EAAMlB,UAGxE,EAAA8B,EAAAjC,MAAKqB,EAAO,SAAS9B,EAAOtB,GACtBiE,EAAKK,OAAO,GAAGpC,OAAQ,EAAIkB,EAAMlB,QACnC2B,eAAapD,KAAKwD,EAAMW,OAAQX,EAAKK,OAAO,GAAGpC,WAKrD+B,EAAKK,OAAOwM,OAAOnO,EAAO,EAAGkC,EAAOJ,OAAOrB,KAG7C,OAAOa,GAxFT,MAAAD,EAAA3D,EAAA,GACA0D,EAAA1D,EAAA,uCACAgY,EAAAhY,EAAA,oFCAgB4Y,cAAT,SAAuBxG,GAC5B,IAAMxO,EAAOC,KACPgV,KAgBN,OAdA,EAAAlV,EAAAjC,MAAKkC,EAAKK,OAAQ,SAASC,EAAKvE,GAC9BkZ,EAAMtV,YAGR,EAAAI,EAAAjC,MAAKkC,EAAKK,OAAO,GAAI,SAASQ,EAAK9E,GACjC,IAAImZ,EAAiBlV,EAAKc,aAAa/E,IAC9B,GAALA,GAAUyS,EAAGhS,KAAKwD,EAAMkV,EAAgBnZ,MAC1C,EAAAgE,EAAAjC,MAAKoX,EAAgB,SAAS3U,EAAM4U,GAClCF,EAAME,GAAIxV,KAAKY,OAKrBP,EAAKwD,KAAKyR,GACHjV,KAGOoV,WAAT,SAAoB5G,GACzB,IAAMxO,EAAOC,KACPgV,KASN,OAPA,EAAAlV,EAAAjC,MAAKkC,EAAKK,OAAQ,SAASC,EAAKvE,IACrB,GAALA,GAAUyS,EAAGhS,KAAKwD,EAAMM,EAAKvE,KAC/BkZ,EAAMtV,KAAKW,KAIfN,EAAKwD,KAAKyR,GACHjV,GAlCT,IAAAD,EAAA3D,EAAA,oFCEgB8X,aAAT,SAAsBC,GAC3B,IAAMnU,EAAOC,KACPvB,EAAsB,iBAANyV,EAAkBA,EAAIlU,KAAKI,OAAO,GAAGuD,QAAQuQ,GAE/DzV,GAAS,IACX,EAAAqB,EAAAjC,MAAKkC,EAAKK,OAAQ,SAASC,EAAKvE,GAC9BiE,EAAKK,OAAOtE,GAAG8Q,OAAOnO,EAAO,KAGjC,OAAOsB,KAGOqV,UAAT,SAAmBlB,GACxB,IAAIzV,EAAsB,iBAANyV,EAAkBA,EAAIlU,KAAKa,aAAa,GAAG8C,QAAQuQ,GAEnEzV,GAAS,GACXuB,KAAKI,OAAOwM,OAAOnO,EAAO,GAE5B,OAAOuB,MApBT,IAAAF,EAAA3D,EAAA,ieCCAoW,EAAApW,EAAA,6EA8nBSiH,WA/nBT,QAAAjH,EAAA,KAGA2D,EAAA3D,EAAA,OACAA,EAAA,IACAmW,EAAAnW,EAAA,MACAA,EAAA,KACAA,EAAA,MACAwT,EAAAxT,EAAA,sDAGO,IAAMkZ,YAAU,SAAVA,IAAkC,IAAdvL,EAAc/K,UAAAf,OAAA,QAAAmC,IAAApB,UAAA,GAAAA,UAAA,MAC7C,GAAIiB,gBAAgBqV,IAAY,EAC9B,OAAO,IAAIA,EAAQvL,GAGrB,IAEMwL,GACJC,yBAAyB,EACzBC,eAAWrV,EACXsV,sBAAkBtV,EAGlB0H,WAAO1H,EACPwI,WAAOxI,EACPqE,MAAO,eAEPoD,QACE,UAAW,UAAW,UAAW,UAAW,UAAW,UACvD,UAAW,UAAW,UAAW,UAAW,UAAW,UACvD,UAAW,UAAW,UAAW,UAAW,UAAW,UACvD,UAAW,UAAW,UAAW,UAAW,UAAW,UACvD,UAAW,UAAW,WAGxB0H,gBAEA0B,QAAS,kBACTtG,UACAgL,gBACAC,QAAS,UACTC,gBAAYzV,EACZ0V,mBAAe1V,EACf2V,oBAAoB,EAGpBxS,UAAMnD,EACNgQ,SAAS,EACTH,gBAAY7P,EACZmK,QACEgC,MAAM,EACNnB,SAAU,QACVlL,OACE2L,cAAe,IAEjBrB,YACEI,OAAQ,EACRC,MAAO,GAETpB,SACE8C,MAAM,EACNC,SAAS,IAIbqD,QACA7G,SACAxF,MACEwS,MAAO,MAETxG,QAGAyG,WACAC,OACE5J,OACE6J,QACEC,SAAS,IAGbhZ,EAAG,EACHmP,MAAM,GAER9C,SACEuG,WAIFqG,eAKFpW,KAAKuE,OAALiG,MAAmB,EAAAmF,EAAA7O,YAAWwU,EAAgBxL,IAG1C9J,KAAKuE,OAAOiR,WACdxV,KAAKyE,GAAGzE,KAAKuE,OAAOiR,WAGtBxV,KAAKgF,QAAU,IAAI5B,UACnBpD,KAAKoE,MACHiS,WAAW,EACXC,WAAW,EACXjS,eAGFgR,EAAQxG,QAAQnP,KAAKM,MAEjBA,KAAKuE,OAAOuR,oBACd9V,KAAKuW,WAgLT,SAASC,EAAUvM,GAEwB,IAArCA,EAAgB1G,OAAO,GAAGvF,SAAiB,EAAAgN,EAAAvK,SAAawJ,EAAgB1G,OAAO,GAAG,IASpF0G,EAAgBjF,QAAQqN,UAAU,EAAG,SAASjV,EAAOqB,GACnD,OAAIA,EAAQ,GAAKwL,EAAgB1F,OAAOmG,OAAOjM,EAAM,IAC5C,EAAA6T,EAAAtR,eAAcN,OAAOuJ,EAAgB1F,OAAOmG,OAAOjM,EAAM,MAE3D,EAAA6T,EAAAtR,eAAc5D,IACrBkT,KAAKrG,IAbPA,EAAgBjF,QAAQoN,aAAa,EAAG,SAAShV,EAAOqB,GACtD,OAAIwL,EAAgB1F,OAAOmG,OAAOjM,EAAM,IAC/B,EAAA6T,EAAAtR,eAAcN,OAAOuJ,EAAgB1F,OAAOmG,OAAOjM,EAAM,MAE3D,EAAA6T,EAAAtR,eAAc5D,IACrBkT,KAAKrG,IA+BX,SAASwM,EAAUxM,GAEwB,IAArCA,EAAgB1G,OAAO,GAAGvF,SAAiB,EAAAgN,EAAAvK,SAAawJ,EAAgB1G,OAAO,GAAG,IASpF0G,EAAgBjF,QAAQqN,UAAU,EAAG,SAASjV,GAC5C,OAAI6M,EAAgB1F,OAAOmR,aAAatY,IAC/B,EAAAkV,EAAAtR,eAAcN,OAAOuJ,EAAgB1F,OAAOmR,aAAatY,MAE3D,EAAAkV,EAAAtR,eAAc5D,IACrBkT,KAAKrG,IAbPA,EAAgBjF,QAAQoN,aAAa,EAAG,SAAShV,GAC/C,OAAI6M,EAAgB1F,OAAOmR,aAAatY,IAC/B,EAAAkV,EAAAtR,eAAcN,OAAOuJ,EAAgB1F,OAAOmR,aAAatY,MAE3D,EAAAkV,EAAAtR,eAAc5D,IACrBkT,KAAKrG,IA4IX,SAAS2L,EAAW3L,GAEdA,EAAgB1F,OAAOqR,YAAc3L,EAAgB1G,OAAOvF,OAAS,KACnE,EAAAgN,EAAAvK,SAAawJ,EAAgB1G,OAAO,GAAG,IACzC0G,EAAgBjF,QAAQoP,YAAYnK,EAAgB1F,OAAOqR,WAAY3L,EAAgBjF,QAAQ5C,cAG/F6H,EAAgBjF,QAAQ2P,SAAS1K,EAAgB1F,OAAOqR,WAAY3L,EAAgBjF,QAAQ3C,YAiBlG,SAASwT,EAAc5L,GACjBA,EAAgB1F,OAAOsR,eACzB5L,EAAgBjF,QAAQ2P,SAAS1K,EAAgB1F,OAAOsR,eA2H5D,SAASa,EAASnI,GACQ,oBAAbnG,UAA8C,oBAAXrM,QAKnB,MAAvBqM,SAASuO,YAAsBvO,SAAS+D,mBAC1C/D,SAAS+D,iBAAiB,mBAAoB,SAASyK,IACrDxO,SAASyO,oBAAoB,mBAAoBD,GAAkB,GACnExO,SAASuO,WAAa,aACrB,GACHvO,SAASuO,WAAa,WArB1B,SAASG,EAAQvI,GACX,KAAKjP,KAAK8I,SAASuO,YACrB7H,WAAW,WACTgI,EAAQvI,IACP,GAEHA,IAiBFuI,CAAQvI,IAXNA,IA9fJ8G,EAAQ0B,WAActW,YACA,oBAAX1E,SACTsZ,EAAQ0B,UAAUtW,SAAU,EAAAuW,EAAAvW,SAAU4U,IAExCA,EAAQxG,WAERwG,EAAQ4B,SAAW,SAAUta,EAAMua,GACjC7B,EAAQ0B,UAAUpa,GAAQ0Y,EAAQ0B,UAAUpa,QAC5C,EAAAmD,EAAAjC,MAAKqZ,EAAS,SAASC,EAAQpW,GAC7BsU,EAAQ0B,UAAUpa,GAAMoE,GAAOoW,KAInC9B,EAAQ+B,KAAO,SAAStY,GACtB,IAAKC,UAAUf,OAAQ,OAAOqX,EAAQxG,QACtC,IAAMpK,EAAK3F,EAAOuY,SAAWvY,EAASsJ,SAAS5B,cAAc1H,GACzDT,EAAQ,KAOZ,OANA,EAAAyB,EAAAjC,MAAKwX,EAAQxG,QAAS,SAASyI,GAC7B,GAAI7S,GAAM6S,EAAO/S,OAAOiR,UAEtB,OADAnX,EAAQiZ,GACD,IAGJjZ,GAOTgX,EAAQ5X,UAAU8Z,WAAa,SAAS9E,GAItC,GAHIzS,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,6EAET1Y,UAAUf,OAAQ,OAAOgC,KAAKuE,OACnC,IAAMH,EAAOpE,KAAKuE,OAQlB,OAPA,EAAAzE,EAAAjC,MAAK4U,EAAK,SAASzT,EAAM+B,GAEX,cAARA,IACFA,EAAM,QAERqD,EAAKrD,GAAO/B,IAEPgB,MAGTqV,EAAQ5X,UAAUlB,KAAO,SAASgS,GAE9B,OADAA,EAAGhS,KAAKyD,MACDA,MAGXqV,EAAQ5X,UAAUia,aAAe,SAASjF,GAIxC,OAHIzS,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,8EAET1Y,UAAUf,QACfgC,KAAKuE,QAAS,EAAAoL,EAAA7O,YAAWd,KAAKuE,OAAQkO,GAC/BzS,MAFuBA,KAAKuE,QAKrC8Q,EAAQ5X,UAAUmK,OAAS,SAASxG,GAIlC,OAHIpB,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,gFAET1Y,UAAUf,QACfgC,KAAKuE,OAAOqD,OAAUxG,aAAerD,MAAQqD,KACtCpB,MAFuBA,KAAKuE,OAAOqD,QAK5CyN,EAAQ5X,UAAU6R,aAAe,SAASmD,GACpCzS,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,4FAEd,IAAMxN,EAAkBjK,KACxB,OAAKjB,UAAUf,QACH,OAARyU,EACFzS,KAAKuE,OAAO+K,gBAEU,iBAAf,IAAOmD,EAAP,YAAAlT,EAAOkT,MACd,EAAA3S,EAAAjC,MAAK4U,EAAK,SAASrV,EAAO2D,GACxBkJ,EAAgB1F,OAAO+K,aAAavO,GAAQ3D,GAAgB,OAGzD4C,MATuBA,KAAKuE,OAAO+K,cAY5C+F,EAAQ5X,UAAU8F,KAAOA,UAEzB8R,EAAQ5X,UAAUuS,WAAa,SAASvO,GAItC,OAHIzB,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,wFAET1Y,UAAUf,QAEbgC,KAAKuE,OAAOyL,WADK,iBAARvO,GAAmC,mBAARA,EACXA,OAGAtB,EAEpBH,MAPuBA,KAAKuE,OAAOyL,YAU5CqF,EAAQ5X,UAAUkH,QAAU,WAC1B,IAAMgR,EAAU3V,KAAK2V,UACfrS,EAAOtD,KAAKuE,OAAOjB,KACnBqU,EAAU3X,KAAKyE,KAerB,OAZI4Q,EAAQ0B,UAAUpB,IACfN,EAAQ0B,UAAUpB,GAASrS,IAC5B+R,EAAQ0B,UAAUpB,GAASrS,GAAMqB,QAAQpI,KAAKyD,MAIhD2X,IACFA,EAAQjT,UAAY,IAEtB1E,KAAKoE,KAAKiS,WAAY,EACtBrW,KAAKoE,KAAKkS,WAAY,EACtBtW,KAAKoE,KAAKC,cACHrE,MAGTqV,EAAQ5X,UAAUgH,GAAK,SAAS3F,GAC9B,IAAMmL,EAAkBjK,KACxB,OAAKjB,UAAUf,QACf0Y,EAAS,WACH5X,GAAqB,OAAXA,EACRA,EAAOuY,SACTpN,EAAgB1F,OAAOkR,iBAAmB3W,EAEnCsJ,SAAS5B,gBAChByD,EAAgB1F,OAAOkR,iBAAmBrN,SAAS5B,cAAc1H,IAInEmL,EAAgB1F,OAAOkR,sBAAmBtV,IAGvCH,MAduBA,KAAKuE,OAAOkR,kBAiB5CJ,EAAQ5X,UAAUiS,OAAS,SAASkI,GAIlC,OAHI5X,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,6CAEPzX,MAITqV,EAAQ5X,UAAUuT,QAAU,SAAS5S,GAInC,OAHI4B,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,kFAET1Y,UAAUf,QACfgC,KAAKuE,OAAOyM,QAAW5S,EAAMsC,OAAOtC,GAAO,kBACpC4B,MAFuBA,KAAKuE,OAAOyM,SAK5CqE,EAAQ5X,UAAUiN,OAAS,SAAStJ,GAKlC,OAJIpB,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,gFAGT1Y,UAAUf,QACfgC,KAAKuE,OAAOmG,OAAUtJ,aAAerD,MAAQqD,KAE7CoV,EAAUxW,MAEHA,MALuBA,KAAKuE,OAAOmG,QA4B5C2K,EAAQ5X,UAAUiY,aAAe,SAASjD,GAIxC,OAHIzS,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,4FAET1Y,UAAUf,QACH,OAARyU,EACFzS,KAAKuE,OAAOmR,gBAEU,iBAAf,IAAOjD,EAAP,YAAAlT,EAAOkT,MACd,EAAA3S,EAAAjC,MAAK4U,EAAK,SAASrV,EAAO2D,GACxBf,KAAKuE,OAAOmR,aAAa3U,GAAQ3D,GAAgB,MACjDkT,KAAKtQ,OAGTyW,EAAUzW,MAEHA,MAZuBA,KAAKuE,OAAOmR,cAmC5CL,EAAQ5X,UAAUkY,QAAU,SAASvX,GACjC,OAAKW,UAAUf,QACfgC,KAAKuE,OAAL,QAA0BnG,EAAMsC,OAAOtC,GAAO,KACvC4B,MAFuBA,KAAKuE,OAAL,SAKlC8Q,EAAQ5X,UAAUyH,QAAU,WAIxB,GAHIlF,KAAKoE,KAAKkS,WACZtW,KAAK2E,UAEH3E,KAAKyE,KAAM,CACbzE,KAAKyE,KAAKC,UAAY,GACtB,IAAMQ,EAAUmQ,EAAQ0B,UAAUtW,QAAQyE,QACtCA,EAAQf,QACVe,EAAQf,OAAOpC,MAAM/B,KAAMjB,WAG/B,OAAOiB,MAGXqV,EAAQ5X,UAAUkL,MAAQ,SAASvK,GAIjC,OAHI4B,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,8EAET1Y,UAAUf,QACfgC,KAAKuE,OAAOoE,MAASvK,EAAMsC,OAAOtC,GAAO,KAClC4B,MAFuBA,KAAKuE,OAAOoE,OAK5C0M,EAAQ5X,UAAU8Y,QAAU,WACxB,IAAMtM,EAAkBjK,KAExB,IAAKA,KAAKyE,KACR,MAASzE,KAAKuE,OAAOiR,UAArB,mEAkBF,OAdAkB,EAAS,WAIP,GAHIzM,EAAgB7F,KAAKkS,WACvBrM,EAAgBtF,UAEdsF,EAAgBxF,KAAM,CACxBwF,EAAgBxF,KAAKC,UAAY,GACjC,IAAMmT,EAASxC,EAAQ0B,UAAUtW,QAAQ6D,QACrCuT,EAAO1T,QACT0T,EAAO1T,OAAO5H,KAAK0N,GAErBA,EAAgB7F,KAAKiS,WAAY,KAI9BrW,MAGXqV,EAAQ5X,UAAU0G,OAAS,WAA6B,IAApB2T,EAAoB/Y,UAAAf,OAAA,QAAAmC,IAAApB,UAAA,GAAAA,UAAA,QAAVoB,EACtC8J,EAAkBjK,KACxB,GAAI8X,EACF,OAAO7N,EAAgB1G,KAAKuU,GAAS3T,SAEnCrH,OAAOiX,KAAK/T,KAAKuE,OAAOmR,cAAc1X,OAAS,GACjDyY,EAAUxM,GAENjK,KAAKuE,OAAOmG,QAAU5N,OAAOiX,KAAK/T,KAAKuE,OAAOmG,QAAQ1M,OAAS,GACnEwY,EAAUvM,GAENjK,KAAKuE,OAAOqR,YAChBA,EAAW3L,GAEPjK,KAAKuE,OAAOsR,eAChBA,EAAc5L,GAGhB,IAAM4N,EAASxC,EAAQ0B,UAAUtW,QAAQ6D,QACnCqR,EAAU3V,KAAKuE,OAAOoR,QACtBrS,EAAOtD,KAAKuE,OAAOjB,KACnBmS,EAAmBzV,KAAKyE,KAE9B,IAAKgR,QAAyCtV,IAArBsV,EAAgC,CACvD,IAAMlN,EAASvI,KAAKuE,OAAOiR,UAArB,mEAEN,MADAgC,QAAQO,MAAMxP,GACRA,EAiCR,OA7BAmO,EAAS,WAMP,GALIzM,EAAgB7F,KAAKiS,WAAawB,EAAOlT,SAC3CkT,EAAOlT,QAAQ5C,MAAMkI,EAAiBlL,WAExC0W,EAAiB/Q,UAAY,GAEM,cAA/B2Q,EAAQ0B,UAAUpB,GAAyB,CAE7C,IAAMpN,sBAEN,MADA0B,EAAgB/E,QAAQqD,GAClBA,EAIN,QAAgD,IAArC8M,EAAQ0B,UAAUpB,GAASrS,GAAuB,CAC3D,IAAMiF,yBAEN,MADA0B,EAAgB/E,QAAQqD,GAClBA,GA8Hd,SAAyB9D,EAAIqF,GAC3B,IAAItL,EAAO,GACPwZ,EAAsB,GACM,QAA5BlO,EAAQQ,OAAOa,UAAkD,WAA5BrB,EAAQQ,OAAOa,WACtD6M,EAAsB,wBAGxB,IAAIxC,0BAAoCwC,EAApC,WACA9M,EAAQ,aACoB,SAA5BpB,EAAQQ,OAAOa,UAAmD,UAA5BrB,EAAQQ,OAAOa,WACvDD,EAAQ,YAGRsK,EAD8B,QAA5B1L,EAAQQ,OAAOa,UAAkD,SAA5BrB,EAAQQ,OAAOa,SACtDqK,6CAAyDtK,EAAzD,mBAAiFpB,EAAQQ,OAAOa,SAAhG,WAAmHqK,EAEpGA,EAAf,6CAAqEtK,EAArE,mBAA6FpB,EAAQQ,OAAOa,SAA5G,WAEF3M,kBAAuBsL,EAAQtF,MAA/B,KACIsF,EAAQjC,QACVrJ,kBAAuBsL,EAAQtF,MAA/B,WAA+CsF,EAAQjC,MAAvD,UAEFrJ,kBAAuBsL,EAAQtF,MAA/B,cAAkDsF,EAAQtF,MAA1D,cAA6E0G,EAA7E,KAAuFsK,EAAvF,SACI1L,EAAQnB,QACVnK,kBAAuBsL,EAAQtF,MAA/B,WAA+CsF,EAAQnB,MAAvD,UAEFnK,YACAiG,EAAGC,UAAYlG,EApJTyZ,CAAgBxC,EACdxL,EAAgB1F,QAElB8Q,EAAQ0B,UAAUpB,GAASrS,GAAMa,OAAO5H,KAAK0N,GAC7CA,EAAgB7F,KAAKkS,WAAY,IAIhCtW,MAGTqV,EAAQ5X,UAAUmY,WAAa,SAASxX,GAItC,OAHI4B,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,wFAET1Y,UAAUf,QACfgC,KAAKuE,OAAOqR,WAAcxX,EAAMsC,OAAOtC,GAAO,KAE9CwX,EAAW5V,MAEJA,MALuBA,KAAKuE,OAAOqR,YAoB5CP,EAAQ5X,UAAUoY,cAAgB,SAASzX,GAIzC,OAHI4B,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,8FAET1Y,UAAUf,QACfgC,KAAKuE,OAAOsR,cAAiBzX,EAAMsC,OAAOtC,GAAO,KAEjDyX,EAAc7V,MAEPA,MALuBA,KAAKuE,OAAOsR,eAc5CR,EAAQ5X,UAAU0S,QAAU,SAAS+H,GAInC,OAHIlY,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,kFAET1Y,UAAUf,QACfgC,KAAKuE,OAAO4L,UAAU+H,EACflY,MAFuBA,KAAKuE,OAAO4L,SAK5CkF,EAAQ5X,UAAU+G,MAAQ,SAASpG,GAIjC,OAHI4B,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,8EAET1Y,UAAUf,QACfgC,KAAKuE,OAAOC,MAASpG,EAAMsC,OAAOtC,GAAO,KAClC4B,MAFuBA,KAAKuE,OAAOC,OAK5C6Q,EAAQ5X,UAAUoK,MAAQ,SAASzJ,GAIjC,OAHI4B,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,8EAET1Y,UAAUf,QACfgC,KAAKuE,OAAOsD,MAASzJ,EAAMsC,OAAOtC,GAAO,KAClC4B,MAFuBA,KAAKuE,OAAOsD,OAK5CwN,EAAQ5X,UAAU6F,KAAO,SAASlF,GAIhC,OAHI4B,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,4EAET1Y,UAAUf,QACfgC,KAAKuE,OAAOjB,KAAQlF,EAkEtB,SAA2BA,GAQzB,OANE+Z,UAAW,OACXC,SAAU,iBACVC,YAAa,MACbC,UAAW,OACXC,SAAU,OAEDna,IAAQA,EA1EOoa,CAAkBpa,GAAO,KAC5C4B,MAFuBA,KAAKuE,OAAOjB,MAK5C+R,EAAQ5X,UAAUyF,OAAS,WACzB,IAAMyS,EAAU3V,KAAKuE,OAAOoR,QACtBrS,EAAOtD,KAAKuE,OAAOjB,KACnBqU,EAAU3X,KAAKyE,KAIrB,OAHIkR,GAAWrS,GAAQqU,GAAWtC,EAAQ0B,UAAUpB,GAASrS,GAAMJ,QACjEmS,EAAQ0B,UAAUpB,GAASrS,GAAMJ,OAAOnB,MAAM/B,KAAMjB,WAE/CiB,MAGTqV,EAAQ5X,UAAU+R,MAAQ,SAASoI,GAIjC,OAHI5X,KAAKuE,OAAOgR,yBACdiC,QAAQC,IAAI,4CAEPzX,MAIPqV,EAAQ5X,UAAUgb,UAAYpD,EAAQ5X,UAAU6F,KAChD+R,EAAQ5X,UAAUsa,MAAQ1C,EAAQ5X,UAAUyH,QAC5CmQ,EAAQ5X,UAAUib,aAAerD,EAAQ5X,UAAU8F,KACnD8R,EAAQ5X,UAAUkb,aAAe,WAE/B,OAAO3Y,MAETqV,EAAQ5X,UAAUmb,WAAa,WAE7B,OAAO5Y,gBA0EIqV,iBCjoBf,IAAAwD,EAGAA,EAAA,WACA,OAAA7Y,KADA,GAIA,IAEA6Y,KAAAC,SAAA,cAAAA,KAAA,EAAAC,MAAA,QACC,MAAAhU,GAED,iBAAAhJ,SAAA8c,EAAA9c,QAOAN,EAAAD,QAAAqd,kJCnBA,IAAAG,EAAA7c,EAAA,6EAsBSkZ,oFAASjS,WApBlB,IAAM6V,OAAwB,IAAXC,EAAyBA,EAAyB,oBAATnZ,KAAuBA,KAAyB,oBAAXhE,OAAyBA,UAE7God,2BAAyB,SAASF,GAC7CA,EAAIG,YAAc/D,UAClB4D,EAAII,YAAcjW,UAGlB6V,EAAIK,KAAOL,EAAIK,SACfL,EAAIK,KAAKlW,QAAUA,UACnB6V,EAAIK,KAAKjE,QAAUA,WAM2B,oBAAjCkE,8BAEbJ,EAAuBF,aAIV5D","file":"keen-dataviz.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"), require(\"c3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\", \"c3\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\"), require(\"c3\")) : factory(root[\"d3\"], root[\"c3\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__7__, __WEBPACK_EXTERNAL_MODULE__19__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n","export function each(o, cb, s) {\n  var n;\n  if (!o) {\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array) {\n    // Indexed arrays, needed for Safari\n    for (n = 0; n < o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false) {\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o) {\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","const matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nexport function escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","export function extend(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n}\n","export function testObject(input) {\n  if (input !== null && typeof input.getTime === 'function' && !isNaN(input.getTime())) {\n    return true;\n  }\n  return false;\n}\n\nexport function testString(input) {\n  const ISO_8601 = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n  return ISO_8601.test(input);\n}\n\nexport default function (input) {\n  if (typeof input === 'object') {\n    return testObject(input);\n  } else if (typeof input === 'string') {\n    return testString(input);\n  }\n  return false;\n}\n","export default function (len) {\n  const list = [];\n  for (let i = 0; i < len; i++) {\n    list.push(null);\n  }\n  return list;\n}\n","import createNullList from '../utils/create-null-list';\nimport { each } from '../../utils/each';\n\nexport function appendColumn(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n    self.matrix[0].push(label);\n    each(self.matrix, function(row, i) {\n      let cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].push(cell);\n      }\n    });\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat(createNullList(self.matrix.length - 1 - input.length));\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String(self.matrix.length));\n        }\n      });\n    }\n\n    self.matrix[0].push(label);\n    each(input, function(value, i){\n      self.matrix[i+1][self.matrix[0].length-1] = value;\n    });\n\n  }\n\n  return self;\n}\n\nexport function appendRow(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n  const newRow = [];\n\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i){\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.push(newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length));\n        }\n      });\n    }\n\n    self.matrix.push(newRow.concat(input));\n  }\n\n  return self;\n}\n","import { each } from './each';\n\nexport function extendDeep(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    each(arguments[i], function(prop, key){\n      if (( typeof target[key] !== 'undefined' && typeof prop !== 'undefined' ) &&\n          ( typeof target[key] === 'object'    && typeof prop === 'object' ) &&\n          ( target[key] !== null               && prop !== null )) {\n            extendDeep(target[key], prop);\n      }\n      else {\n        target[key] = prop;\n      }\n    });\n  }\n  return target;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","/**\n * Strip html tags from string\n *\n * @param  {string} string The string to strip\n * @return {string}\n * @public\n */\n\nexport function stripHtmlTags(inputString) {\n  return inputString.replace(/(<([^>]+)>)/ig, '');\n}\n","import { each } from '../../utils/each';\nimport { extend } from '../../utils/extend';\n\nfunction average(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0,\n      avg = null;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum / set.length;\n}\n\nfunction maximum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.max.apply(Math, nums);\n}\n\nfunction minimum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.min.apply(Math, nums);\n}\n\nfunction sum(arr, start, end){\n  // Copy set with given range\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum;\n}\n\nconst getColumnAverage = function (arr) {\n  return average(arr, 1);\n};\nconst getRowAverage = getColumnAverage;\n\nconst getColumnSum = function (arr) {\n  return sum(arr, 1);\n};\nconst getRowSum = getColumnSum;\n\nconst getColumnMaximum = function (arr) {\n  return maximum(arr, 1);\n};\nconst getRowMaximum = getColumnMaximum;\n\nconst getColumnMinimum = function (arr) {\n  return minimum(arr, 1);\n};\nconst getRowMinimum = getColumnMinimum;\n\nconst getColumnLabel = function (arr) {\n  return arr[0];\n};\nconst getRowIndex = getColumnLabel;\n\nexport default {\n  average,\n  maximum,\n  minimum,\n  sum,\n  getColumnAverage,\n  getRowAverage,\n  getColumnSum,\n  getRowSum,\n  getColumnMaximum,\n  getRowMaximum,\n  getColumnMinimum,\n  getRowMinimum,\n  getColumnLabel,\n  getRowIndex,\n};\n","// Modifiers\nimport * as append from './modifiers/append';\nimport * as del from './modifiers/delete';\nimport * as filter from './modifiers/filter';\nimport * as insert from './modifiers/insert';\nimport * as select from './modifiers/select';\nimport * as sort from './modifiers/sort';\nimport * as update from './modifiers/update';\n\n// Utils\nimport analyses from './utils/analyses';\nimport { extend } from '../utils/extend';\nimport parsers from './utils/parsers';\n\nexport const Dataset = function () {\n  if (this instanceof Dataset === false) {\n    return new Dataset();\n  }\n\n  this.matrix = [\n    ['Index']\n  ];\n  this.meta = {\n    type: undefined\n  };\n}\n\nDataset.prototype.data = function (arr) {\n  if (!arguments.length) return this.matrix;\n  this.matrix = (arr instanceof Array ? arr : null);\n  return this;\n};\n\nDataset.prototype.set = function (coords, value) {\n  if (arguments.length < 2 || coords.length < 2) {\n    throw Error('Incorrect arguments provided for #set method');\n  }\n\n  var colIndex = 'number' === typeof coords[0] ? coords[0] : this.matrix[0].indexOf(coords[0]),\n      rowIndex = 'number' === typeof coords[1] ? coords[1] : select.selectColumn.call(this, 0).indexOf(coords[1]);\n\n  var colResult = select.selectColumn.call(this, coords[0]),\n      rowResult = select.selectRow.call(this, coords[1]);\n\n  // Column doesn't exist, create and reset colIndex\n  if (colResult.length < 1) {\n    append.appendColumn.call(this, String(coords[0]));\n    colIndex = this.matrix[0].length - 1;\n  }\n\n  // Row doesn't exist, create and reset rowIndex\n  if (rowResult.length < 1) {\n    append.appendRow.call(this, String(coords[1]));\n    rowIndex = this.matrix.length - 1;\n  }\n\n  // Set provided value\n  this.matrix[ rowIndex ][ colIndex ] = value;\n  return this;\n};\n\nDataset.prototype.type = function(str){\n  if (!arguments.length) return this.meta['type'];\n  this.meta['type'] = (str ? String(str) : undefined);\n  return this;\n};\n\nextend(Dataset.prototype, append);\nextend(Dataset.prototype, del);\nextend(Dataset.prototype, filter);\nextend(Dataset.prototype, insert);\nextend(Dataset.prototype, select);\nextend(Dataset.prototype, sort);\nextend(Dataset.prototype, update);\nextend(Dataset.prototype, analyses);\nDataset.parser = parsers(Dataset);\n\nexport default Dataset;\n","export default {\n  render: function(){\n    let html = '';\n    const artifacts = this.view._artifacts.spinner = {};\n\n    // Build DOM element\n    html += '<div class=\"' + this.config.theme + '\">';\n    html +=   '<div class=\"keen-spinner-container keen-dataviz-box\">';\n    html +=     '<div class=\"keen-spinner-indicator\"></div>';\n    html +=   '</div>';\n    html += '</div>';\n    this.el().innerHTML = html;\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    if (this.view._artifacts.spinner) {\n      if (this.view._artifacts.spinner.interval) {\n        clearInterval(this.view._artifacts.spinner.interval);\n      }\n      this.view._artifacts.spinner.radius = 0;\n      try {\n        delete this.view._artifacts.spinner;\n      }\n      catch (e) {\n        this.view._artifacts.spinner = undefined;\n      }\n    }\n    this.el().innerHTML = '';\n  }\n};\n","import { each } from '../../utils/each';\n\nconst defaults = {\n  height: undefined,\n  width: undefined,\n  stickyHeader: false,\n  stickyFooter: false\n};\n\nfunction _generateTableRows(dataset) {\n  let html = '';\n  let i = 0;\n  for (let row of dataset) {\n    if (i > 0) {\n      html +=   '<tr>';\n      for (let rowCol of row) {\n        html +=   `<td>${rowCol}</td>`;\n      }\n      html +=   '</tr>';\n    }\n    i = 1;\n  }\n  return html;\n}\n\nexport default {\n  render: function() {\n    const dataset = this.data();\n    const el = this.el();\n    const theme = this.theme();\n\n    let html = '';\n    let fixedHeader;\n\n    const isEmpty = dataset.length === 1 && dataset[0].length === 0;\n    if (isEmpty) {\n      this.message('No data to display');\n      return;\n    }\n\n    // Open wrapper\n    html += `<div class=\"${theme}-table\">`;\n\n    // Static, scrollable table\n    html +=   `<table class=\"${theme}-table-dataset\">`;\n    html +=     '<thead>';\n    html +=       '<tr>';\n    for (let colName of dataset[0]) {\n      html +=       `<th>${colName}</th>`;\n    }\n    html +=       '</tr>';\n    html +=     '</thead>';\n    // Table data\n    html +=     '<tbody>';\n    html +=     _generateTableRows.call(this, dataset);\n    html +=     '</tbody>';\n    html +=   '</table>';\n/*\n    // Fixed table (header)\n    html +=   `<table class=\"${theme}-table-fixed-header\">`;\n    html +=     '<thead>';\n    html +=       '<tr>';\n    for (let colName of dataset[0]) {\n      html +=       `<th>${colName}</th>`;\n    }\n    html +=       '</tr>';\n    html +=     '</thead>';\n    html +=   '</table>';\n*/\n    // Close wrapper\n    html += '</div>';\n\n    // Inject HTML string\n    el.querySelector('.' + theme + '-rendering').innerHTML = html;\n\n    fixedHeader = el.querySelector('.' + theme + '-table-fixed-header');\n    el.querySelector('.' + theme + '-table').onscroll = function(e){\n      fixedHeader.style.top = e.target.scrollTop + 'px';\n    };\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    var el = this.el().querySelector('.' + this.theme() + '-table')\n    if (el && el.onscroll) {\n      el.onscroll = undefined;\n    }\n  }\n};\n","export function prettyNumber(input) {\n  // If it has 3 or fewer sig figs already, just return the number.\n  var input = Number(input),\n      sciNo = input.toPrecision(3),\n      prefix = '',\n      suffixes = ['', 'k', 'M', 'B', 'T'];\n\n  if (Number(sciNo) == input && String(input).length <= 4) {\n    return String(input);\n  }\n\n  if (Math.abs(input) >= 1000000000000000) {\n    return sciNo;\n  }\n\n  if (input >= 1 || input <= -1) {\n    if (input < 0){\n      //Pull off the negative side and stash that.\n      input = -input;\n      prefix = '-';\n    }\n    return prefix + recurse(input, 0);\n  }\n  else {\n    return input.toPrecision(3);\n  }\n\n  function recurse(input, iteration) {\n    var input = String(input);\n    var split = input.split('.');\n    // If there's a dot\n    if (split.length > 1) {\n      // Keep the left hand side only\n      input = split[0];\n      var rhs = split[1];\n      // If the left-hand side is too short, pad until it has 3 digits\n      if (input.length == 2 && rhs.length > 0) {\n        // Pad with right-hand side if possible\n        if (rhs.length > 0) {\n          input = input + '.' + rhs.charAt(0);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n      else if (input.length == 1 && rhs.length > 0) {\n        input = input + '.' + rhs.charAt(0);\n        // Pad with right-hand side if possible\n        if (rhs.length > 1) {\n          input += rhs.charAt(1);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n    }\n    var numNumerals = input.length;\n    // if it has a period, then numNumerals is 1 smaller than the string length:\n    if (input.split('.').length > 1) {\n      numNumerals--;\n    }\n    if (numNumerals <= 3) {\n      return String(input) + suffixes[iteration];\n    }\n    else {\n      return recurse(Number(input) / 1000, iteration + 1);\n    }\n  }\n}\n","import { prettyNumber } from '../../utils/pretty-number';\nimport { escapeHtml } from '../../utils/escape-html';\n\nexport default {\n  render: function(){\n    const color = this.config.colors[0];\n    const theme = this.config.theme;\n    const title = this.config.title;\n    const opts = this.config;\n    let value = '-';\n    let html = '';\n    let prefix = '';\n    let suffix = '';\n    let formattedNum;\n    let valueEl;\n\n    if (typeof this.data()[1][1] === 'number') {\n      value = this.data()[1][1];\n    }\n\n    formattedNum = value;\n    if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n      && !isNaN(parseInt(value)) ) {\n        formattedNum = prettyNumber(value);\n    }\n\n    if (opts['prefix']) {\n      prefix = '<span class=\"' + theme + '-metric-prefix\">' + opts['prefix'] + '</span>';\n    }\n    if (opts['suffix']) {\n      suffix = '<span class=\"' + theme + '-metric-suffix\">' + opts['suffix'] + '</span>';\n    }\n\n    html += '<div class=\"' + theme + '\">';\n    html +=   '<div class=\"' + theme + '-metric keen-dataviz-box\" title=\"' + escapeHtml(value) + '\">';\n    html +=     '<div class=\"' + theme + '-metric-value\">' + prefix + escapeHtml(formattedNum) + suffix + '</div>';\n    if (title) {\n      html +=   '<div class=\"' + theme + '-metric-title\">' + escapeHtml(title) + '</div>';\n    }\n    html +=   '</div>';\n    html += '</div>';\n\n    this.el().innerHTML = html;\n    // valueEl = this.el().querySelector('.' + theme + '-metric-value');\n    // valueEl.style.paddingTop = ((height - this.el().offsetHeight) / 2) + 'px';\n    // this.el().querySelector('.' + theme + '-metric').style.height = height + 'px';\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","import { escapeHtml } from '../../utils/escape-html';\n\nexport default {\n  render: function(text){\n    const outer = document.createElement('div');\n    const inner = document.createElement('div');\n    const msg = document.createElement('span');\n\n    const titleContainer = document.createElement('div');\n    const notesContainer = document.createElement('div');\n\n    outer.className = this.config.theme + ' keen-dataviz-box';\n    inner.className = this.config.theme + '-message';\n\n    // Create title and notes for message\n    titleContainer.className = this.config.theme + '-title';\n    titleContainer.innerHTML = escapeHtml(this.config.title || '');\n    notesContainer.className = this.config.theme + '-notes';\n    notesContainer.innerHTML = escapeHtml(this.config.notes || '');\n\n    msg.innerHTML = escapeHtml(text) || '';\n    inner.appendChild(msg);\n    outer.appendChild(titleContainer);\n    outer.appendChild(inner);\n    outer.appendChild(notesContainer);\n\n    this.el().innerHTML = '';\n    this.el().appendChild(outer);\n\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","import { escapeHtml } from '../../../utils/escape-html';\n\nexport default function (d, defaultTitleFormat, defaultValueFormat, color) {\n  let text;\n  let title;\n  // Set config options or defaults\n  const nameFormat = this.config.tooltip_format_name || function (name) { return name; };\n  const titleFormat = this.config.tooltip_format_title || defaultTitleFormat;\n  const valueFormat = this.config.tooltip_format_value || defaultValueFormat;\n\n  // Reverse list to match legend\n  for (let i = 0; i < d.length; i++) {\n    if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }\n    if (!text) {\n      title = titleFormat ? titleFormat(d[i].x) : d[i].x;\n      text = \"<table class='\" + this.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + escapeHtml(title) + \"</th></tr>\" : \"\");\n    }\n    let name = nameFormat(d[i].name);\n    let value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);\n    let bgcolor = this.levelColor ? this.levelColor(d[i].value) : color(d[i].id);\n    if (value) {\n      text += \"<tr class='\" + this.CLASS.tooltipName + \"-\" + d[i].id + \"'>\";\n      text +=   \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + escapeHtml(name) + \"</td>\";\n      text +=   \"<td class='value'>\" + escapeHtml(value) + \"</td>\";\n      text += \"</tr>\";\n    }\n  }\n  return text + \"</table>\";\n}\n","import * as d3 from 'd3';\n\nimport isDateString from '../../../utils/assert-date-string';\n\nexport default function (options) {\n  const cols = options.data.columns;\n  const datavizInstance = this;\n  const chart = this.view._artifacts.c3;\n  const columns = [];\n  const domNode = this.el().querySelector('.' + datavizInstance.config.theme + '-rendering');\n  const legendConfig = datavizInstance.config.legend;\n\n  const pagination = this.view._artifacts.pagination = {\n    ...{\n      hidden: [],\n      labels: [],\n      offset: 0,\n      limit: Math.round((domNode.offsetHeight - 78) / 20),\n      total: 0\n    },\n    ...legendConfig.pagination\n  };\n\n  for (let i = 0; i < cols.length; i++) {\n    if (cols[i][0] !== 'x' && !isDateString(cols[i][1])) {\n      columns.push(cols[i][0]);\n    }\n  }\n\n  const legendElement = this.el().querySelector('.keen-c3-legend');\n\n  let align = 'vertical';\n  if (legendConfig.position === 'top' || legendConfig.position === 'bottom') {\n    align = 'horizontal';\n  }\n\n  const paginateHorizontalLeftElement = document.createElement('div');\n  paginateHorizontalLeftElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-left');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalLeftElement);\n  }\n\n  const legendItemsElement = document.createElement('div');\n  legendItemsElement.setAttribute('class', `keen-c3-legend-items keen-c3-legend-${align}-items`);\n  legendElement.append(legendItemsElement);\n\n  const paginateVerticalElement = document.createElement('div');\n  paginateVerticalElement.setAttribute('class', 'keen-c3-legend-pagination keen-c3-legend-pagination-icons');\n  if (align === 'vertical') {\n    legendElement.append(paginateVerticalElement);\n  }\n\n  const paginateHorizontalRightElement = document.createElement('div');\n  paginateHorizontalRightElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-right');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalRightElement);\n  }\n\n  paginateData();\n\n  function paginateData(){\n    pagination.labels = columns.slice(pagination.offset, pagination.offset + pagination.limit);\n    pagination.total = columns.length;\n    renderLegendComponent.call(datavizInstance, pagination.labels);\n    if (pagination.total > pagination.limit) {\n      renderPaginationComponent.call(datavizInstance);\n    }\n    chart.resize();\n  }\n\n  function renderLegendComponent(){\n    legendItemsElement.innerHTML = '';\n\n    pagination.labels.forEach(label => {\n      const labelShortened = legendConfig.label.textMaxLength ? label.slice(0, legendConfig.label.textMaxLength - 1) : label;\n      const legendItem = document.createElement(\"div\");\n      legendItem.innerHTML = `<span class='legend-item-text'>${labelShortened}</span>`;\n      legendItem.chartPartId = label;\n      legendItem.setAttribute('class', 'legend-item');\n      legendItemsElement.append(legendItem);\n\n      const legendItemColorSample = document.createElement(\"span\");\n      legendItemColorSample.setAttribute('class', 'legend-item-color-sample');\n      legendItemColorSample.style.backgroundColor = chart.color(legendItem.chartPartId);\n      legendItem.prepend(legendItemColorSample);\n\n      const tooltipElement = document.createElement(\"div\");\n      legendItem.addEventListener('mouseover', (event) => {\n        chart.focus(legendItem.chartPartId);\n        if (legendConfig.tooltip.show && legendItem.chartPartId.length > legendConfig.label.textMaxLength) {\n          tooltipElement.setAttribute('class', `keen-c3-legend-label-overlay keen-c3-legend-position-${legendConfig.position}`);\n          tooltipElement.innerHTML =\n            `${\n              options.legend.tooltip.pointer ? `<div class='overlay-pointer'></div>` : ``\n            }${legendItem.chartPartId}`;\n          legendItem.append(tooltipElement);\n        }\n      });\n      legendItem.addEventListener('mouseout', (event) => {\n        chart.revert();\n        tooltipElement.remove();\n      });\n      legendItem.addEventListener('click', (event) => {\n        let opacity = 1;\n        const isHidden = pagination.hidden.indexOf(legendItem.chartPartId);\n        if (isHidden < 0) {\n          pagination.hidden.push(legendItem.chartPartId);\n          opacity = .35;\n        }\n        else {\n          pagination.hidden.splice(isHidden, 1);\n          opacity = 1;\n        }\n        legendItem.style.opacity = opacity;\n        chart.toggle(legendItem.chartPartId);\n      });\n  });\n\n  }\n\n  function renderPaginationComponent(){\n    paginateVerticalElement.innerHTML = '';\n    paginateHorizontalLeftElement.innerHTML = '';\n    paginateHorizontalRightElement.innerHTML = '';\n\n    const arrowUp = document.createElement('i');\n    const arrowDown = document.createElement('i');\n\n    const paginate = (direction) => {\n      if (direction === 'forward') {\n        const diff = pagination.offset + pagination.limit;\n        if (diff < pagination.total) {\n          pagination.offset = diff;\n          return;\n        }\n        pagination.offset = 0;\n        return;\n      }\n\n      const diff = pagination.offset - pagination.limit;\n      if (diff >= 0) {\n        pagination.offset = diff;\n        return;\n      }\n\n      pagination.offset = Math.floor(pagination.total/pagination.limit) * pagination.limit;\n    };\n\n    arrowDown.addEventListener('click', () => {\n      paginate('forward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    arrowUp.addEventListener('click', () => {\n      paginate('backward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    if (legendConfig.position === 'left' || legendConfig.position === 'right') {\n      arrowUp.setAttribute('class', 'up');\n      arrowDown.setAttribute('class', 'down');\n      paginateVerticalElement.append(arrowDown);\n      paginateVerticalElement.append(arrowUp);\n    } else {\n      // bottom top\n      arrowUp.setAttribute('class', 'left');\n      arrowDown.setAttribute('class', 'right');\n      paginateHorizontalLeftElement.append(arrowUp);\n      paginateHorizontalRightElement.append(arrowDown);\n    }\n\n  }\n\n  function clearSelectedText() {\n    let selection;\n    if (document.selection && document.selection.empty) {\n      selection = document.selection;\n      selection.empty();\n    }\n    else if (window.getSelection) {\n      selection = window.getSelection();\n      selection.removeAllRanges();\n    }\n  }\n}\n","export default function (startDate, endDate) {\n  const timeDiff = Math.abs(new Date(startDate).getTime() - new Date(endDate).getTime());\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'June',\n    'July',\n    'Aug',\n    'Sept',\n    'Oct',\n    'Nov',\n    'Dec'\n  ];\n\n  // Yearly (31536000000) + Monthly\n  if (timeDiff >= 2419200000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getFullYear();\n    };\n  }\n  // Daily\n  else if (timeDiff >= 86400000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getDate();\n    };\n  }\n  // Hourly\n  else if (timeDiff >= 3600000) {\n    return '%I:%M %p';\n  }\n  // Minutely\n  else {\n    return '%I:%M:%S %p';\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__19__;","import c3 from 'c3';\nimport d3 from 'd3';\n\nimport { each } from '../utils/each';\nimport { extend } from '../utils/extend';\nimport { extendDeep } from '../utils/extend-deep';\nimport isDateString from '../utils/assert-date-string';\nimport c3DefaultDateFormat from './c3/extensions/default-date-format';\nimport c3PaginatingLegend from './c3/extensions/paginating-legend';\nimport c3TooltipContents from './c3/extensions/tooltip-contents';\n\nimport message from './default/message';\nimport metric from './default/metric';\nimport table from './default/table';\nimport spinner from './default/spinner';\n\nexport default function(lib) {\n  let timer;\n  bindResizeListener(function(){\n    if (timer) {\n      clearTimeout(timer);\n    }\n    const delay = (lib.visuals.length > 12) ? 1000 : 250;\n    timer = setTimeout(function(){\n      each(lib.visuals, function(chart){\n        if (chart.view._artifacts.c3) {\n          chart.view._artifacts.c3.resize();\n        }\n      });\n    }, delay);\n  });\n\n  return defineC3();\n};\n\nfunction defineC3(){\n  const types = {\n    message,\n    metric,\n    table,\n    spinner,\n  };\n\n  const c3Types = [\n    // Standard types\n    'area',\n    'area-spline',\n    'area-step',\n    'bar',\n    'donut',\n    'gauge',\n    'line',\n    'pie',\n    'step',\n    'spline',\n\n    // Horizontal variant types\n    'horizontal-area',\n    'horizontal-area-spline',\n    'horizontal-area-step',\n    'horizontal-bar',\n    'horizontal-line',\n    'horizontal-step',\n    'horizontal-spline'\n  ];\n\n  function getDefaultOptions(){\n    const ENFORCED_OPTIONS = {\n      bindto: this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'),\n      color: {\n        pattern: this.config.colors\n      },\n      data: {\n        colors: { ...this.config.colorMapping },\n        columns: [],\n        type: this.config.type.replace('horizontal-', '')\n      },\n      size: {\n        width: this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart').offsetWidth,\n        height:\n          this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart').offsetHeight > 0 ?\n            this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart').offsetHeight\n            : undefined,\n      }\n    };\n\n    return extendDeep({}, this.config, ENFORCED_OPTIONS);\n  }\n\n  each(c3Types, function(type, index) {\n    types[type] = {\n      render: function(){\n        const options = getDefaultOptions.call(this);\n\n        if (this.data()[0].length === 1 || this.data().length === 1) {\n          this.message('No data to display');\n          return;\n        }\n\n        if (type === 'gauge') {\n          // Accommodate a neat bug:\n          options.legend.show = false;\n          options.data.columns = [[\n            this.title() || this.data()[1][0],\n            this.data()[1][1]\n          ]];\n        }\n        else if (type === 'pie' || type === 'donut') {\n          options.data.columns = this.data().slice(1);\n        }\n        else {\n\n          // Apply formatting for horizontal variant types\n          if (type.indexOf('horizontal-') > -1) {\n            options.axis.rotated = type.indexOf('horizontal-') > -1;\n          }\n\n          if (isDateString(this.data()[1][0])) {\n            // TIMESERIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'timeseries';\n            options.axis.x.tick = options.axis.x.tick || {\n              format: this.config.dateFormat || c3DefaultDateFormat(this.data()[1][0], this.data()[2] ? this.data()[2][0] : this.data()[1][0]),\n              culling: { max: 5 }\n            };\n\n            options.data.columns[0] = [];\n            each(this.dataset.selectColumn(0), function(cell, i){\n              if (i > 0) {\n                cell = new Date(cell);\n              }\n              options.data.columns[0][i] = cell;\n            });\n            options.data.columns[0][0] = 'x';\n            options.data.x = 'x';\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n          else {\n            // CATEGORIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'category';\n            options.axis.x.categories = this.dataset.selectColumn(0).slice(1);\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n\n          if (this.data()[0].length === 2) {\n            options.legend.show = false;\n          }\n\n          each(this.data()[0], function(cell, i){\n            if (i > 0) {\n              options.data.columns.push(this.dataset.selectColumn(i));\n            }\n          }.bind(this));\n\n        }\n\n        if (options.legend.show === true) {\n            const c3options = { ...options };\n                // Apply custom color handling\n            c3options.data.color = c3CustomDataMapping.bind(this);\n\n            // Apply custom tooltip\n            c3options.tooltip = {\n              contents: c3TooltipContents,\n              format: {\n                title: this.config.tooltip.format.title,\n                value: (value, ratio, id, index) => {\n                  let valueFormatted = c3CustomTooltipFiltering.call(this, value, ratio, id, index);\n                  if (this.config.tooltip && this.config.tooltip.format && this.config.tooltip.format.value)\n                  {\n                    valueFormatted = this.config.tooltip.format.value.call(this, valueFormatted, ratio, id, index);\n                  }\n                  return valueFormatted;\n                }\n              }\n            };\n\n            c3options.legend.show = false; // hide default c3 legend\n\n            // Render artifacts\n            this.view._artifacts['c3'] = c3.generate(c3options);\n            c3PaginatingLegend.call(this, options);\n        }\n        else {\n          this.view._artifacts['c3'] = c3.generate(options);\n        }\n\n      },\n      update: function(){\n        // no special update handling\n        this.render();\n      },\n      destroy: function(){\n        if (this.view._artifacts['c3']) {\n          this.view._artifacts['c3'].destroy();\n          this.view._artifacts['c3'] = null;\n        }\n      }\n    };\n  });\n\n  return types;\n}\n\nfunction c3CustomDataMapping(color, d) {\n  const type = this.config.type;\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if ((d.id && scope.indexOf(d.id) > -1)\n            || (d && !d.id && scope.indexOf(d) > -1)) {\n              return color;\n          }\n          else {\n            if (type === 'donut' || type === 'pie') {\n              return 'rgba(0,0,0,.1)';\n            }\n            else {\n              return 'rgba(0,0,0,.07)';\n            }\n          }\n  }\n  else {\n    return color;\n  }\n}\n\nfunction c3CustomTooltipFiltering(value, ratio, id, index) {\n  const type = this.config.type;\n\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if (scope.indexOf(id) > -1) {\n            return value;\n          }\n  }\n  else {\n    return value;\n  }\n}\n\nfunction bindResizeListener(fn){\n  if ('undefined' === typeof window) return;\n  window.onresize = window.resize = function(){};\n  if (window.addEventListener) {\n    window.addEventListener('resize', fn, true);\n  }\n  else if (window.attachEvent) {\n    window.attachEvent('onresize', fn);\n  }\n}\n","import Dataset from './dataset';\nimport { extend } from './utils/extend';\nimport { stripHtmlTags } from './utils/strip-html-tags';\n\nexport default function (data) {\n  if (!arguments.length) return this.dataset.data();\n  if (data instanceof Dataset) {\n    this.dataset = data;\n    return this;\n  }\n  else {\n    return parseResponse.call(this, data);\n  }\n};\n\nfunction parseResponse(response) {\n  var dataset,\n      indexBy,\n      meta,\n      parser,\n      parserArgs = [],\n      query,\n      selectedParser,\n      title,\n      type;\n\n  indexBy = this.config.indexBy;\n  meta = response.metadata || {};\n  query = (typeof response.query !== 'undefined') ? response.query : {};\n\n  // Ensure all required params are present\n  query = extend({\n    analysis_type: null,\n    event_collection: null,\n    filters: [],\n    group_by: null,\n    interval: null,\n    timeframe: null,\n    timezone: null\n  }, query);\n\n  if (query.analysis_type === 'funnel') {\n    parser = 'funnel';\n  }\n  else if (query.analysis_type === 'extraction'){\n    parser = 'extraction';\n  }\n  else if (query.analysis_type === 'select_unique') {\n    if (!query.group_by && !query.interval) {\n      parser = 'list';\n    }\n    // else { Not supported }\n  }\n  else if (query.analysis_type) {\n    if (!query.group_by && !query.interval) {\n      parser = 'metric';\n    }\n    else if (query.group_by && !query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-metric';\n        parserArgs.push(query.group_by);\n      }\n      else {\n        parser = 'grouped-metric';\n      }\n    }\n    else if (query.interval && !query.group_by) {\n      parser = 'interval';\n      parserArgs.push(indexBy);\n    }\n    else if (query.group_by && query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-interval';\n        parserArgs.push(query.group_by);\n        parserArgs.push(indexBy);\n      }\n      else {\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy);\n      }\n    }\n  }\n\n  if (!parser) {\n\n    // Metric\n    // -------------------------------\n    if (typeof response.result === 'number'){\n      parser = 'metric';\n    }\n\n    // Everything else\n    // -------------------------------\n    if (response.result instanceof Array && response.result.length > 0){\n\n      // Interval w/ single value\n      // -------------------------------\n      if (response.result[0].timeframe && (typeof response.result[0].value == 'number' || response.result[0].value == null)) {\n        parser = 'interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Static GroupBy\n      // -------------------------------\n      if (typeof response.result[0].result == 'number'){\n        parser = 'grouped-metric';\n      }\n\n      // Grouped Interval\n      // -------------------------------\n      if (response.result[0].value instanceof Array){\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Funnel\n      // -------------------------------\n      if (typeof response.result[0] === 'number'\n        && typeof response.steps !== 'undefined'){\n          parser = 'funnel';\n          // Move steps into query object\n          query.steps = response.steps;\n      }\n\n      // Select Unique\n      // -------------------------------\n      if ((typeof response.result[0] === 'string' || typeof response.result[0] == 'number') && typeof response.steps === 'undefined'){\n        parser = 'list';\n      }\n\n      // Extraction\n      // -------------------------------\n      if (!parser) {\n        parser = 'extraction';\n      }\n    }\n  }\n\n  // Set title from saved query body, or create a default title\n  if (!this.config.title) {\n    if (meta.display_name) {\n      title = meta.display_name;\n    }\n    else {\n      title = getDefaultTitle(query);\n    }\n    this.config.title = title;\n  }\n\n  // Set type from saved query body, or use a default type\n  if (!this.config.type) {\n    if (meta.visualization && meta.visualization.chart_type) {\n      type = meta.visualization.chart_type;\n    }\n    else {\n      type = getDefaultType(parser);\n    }\n    this.config.type = type;\n  }\n\n  // Define the appropriate parser\n  selectedParser = Dataset.parser.apply(this, [parser].concat(parserArgs));\n\n  // Parse the response with augmented query body\n  dataset = selectedParser(extend(response, { 'query': query }));\n\n  // Set true dates for 'interval' data\n  if (parser.indexOf('interval') > -1) {\n    dataset.updateColumn(0, function(value, i){\n      return new Date(value);\n    });\n  }\n\n  dataset.updateRow(0, function(value, i){\n    return stripHtmlTags(value);\n  });\n\n  this.dataset = dataset;\n\n  return this;\n}\n\nfunction getDefaultTitle(query) {\n  var analysis = query.analysis_type ? query.analysis_type.replace('_', ' ') : '',\n      title;\n\n  title = analysis.replace( /\\b./g, function(a){\n    return a.toUpperCase();\n  });\n\n  if (query.event_collection) {\n    title += ' - ' + query.event_collection;\n  }\n  return title;\n}\n\nfunction getDefaultType(parser) {\n  let type;\n  switch (parser) {\n    case 'metric':\n      type = 'metric';\n      break;\n    case 'interval':\n      type = 'area';\n      break;\n    case 'grouped-metric':\n    case 'double-grouped-metric':\n      type = 'bar';\n      break;\n    case 'grouped-interval':\n    case 'double-grouped-interval':\n      type = 'line';\n      break;\n    case 'funnel':\n      type = 'horizontal-bar';\n      break;\n    case 'list':\n    case 'extraction':\n    default:\n      type = 'table';\n  }\n  return type;\n}\n","export function valueAtDeepKey(obj, is, value) {\n  if (typeof is == 'string')\n    return valueAtDeepKey(obj, is.split('.'), value);\n  else if (is.length==1 && value!==undefined && obj !== null &&\n    typeof obj[is[0]] !== 'undefined')\n    return obj[is[0]] = value;\n  else if (is.length==0)\n    return obj;\n  else if (typeof is === 'undefined' || typeof obj === 'undefined'\n    || is === null || obj === null\n    || typeof obj[is[0]] === 'undefined')\n    return null;\n  else\n    return valueAtDeepKey(obj[is[0]], is.slice(1), value);\n}\n","// Pure awesomeness by Will Rayner (penguinboy)\n// https://gist.github.com/penguinboy/762197\n\nexport function flatten(ob){\n  var toReturn = {};\n  for (var i in ob) {\n    if (!ob.hasOwnProperty(i)) continue;\n    if ((typeof ob[i]) == 'object' && ob[i] !== null) {\n      var flatObject = flatten(ob[i]);\n      for (var x in flatObject) {\n        if (!flatObject.hasOwnProperty(x)) continue;\n        toReturn[i + '.' + x] = flatObject[x];\n      }\n    } else {\n      toReturn[i] = ob[i];\n    }\n  }\n  return toReturn;\n};\n","let Dataset; /* injected */\n\nimport { each } from '../../utils/each';\nimport { flatten } from '../utils/flatten';\nimport { valueAtDeepKey } from '../utils/object';\n\nexport default function initialize(lib){\n  Dataset = lib;\n  return function(name){\n    var options = Array.prototype.slice.call(arguments, 1);\n\n    if (!parsers[name]) {\n      throw 'Requested parser does not exist';\n    }\n    else {\n      return parsers[name].apply(this, options);\n    }\n  };\n}\n\nfunction parseMetric(){\n  return function(res){\n    return new Dataset()\n      .set(['Value', 'Result'], res.result)\n      .type('metric');\n  }\n}\n\n//var myParser = Dataset.parser('interval', 'timeframe.end');\nfunction parseInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      dataset.set(['Result', index], record.value);\n    });\n    return dataset;\n  }\n}\n\nfunction parseGroupedMetric(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-metric');\n    each(res.result, function(record, i){\n      var label;\n      each(record, function(value, key){\n        if (key !== 'result') {\n          label = key;\n        }\n      });\n      dataset.set(['Result', String(record[label])], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('grouped-interval', 'timeframe.end');\nfunction parseGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      if (record.value.length) {\n        each(record.value, function(group, j){\n          var label;\n          each(group, function(value, key){\n            if (key !== 'result') {\n              label = key;\n            }\n          });\n          dataset.set([ String(group[label]), index ], group.result);\n        });\n      }\n      else {\n        dataset.appendRow(index);\n      }\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-metric', ['first', 'second']);\nfunction parseDoubleGroupedMetric(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-metric');\n    each(res.result, function(record, i){\n      var rowLabel = record[options[0][0]] + ' ' + record[options[0][1]];\n      dataset.set([ 'Result', rowLabel ], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-interval', ['first', 'second'], 'timeframe.end');\nfunction parseDoubleGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[1] && options[1] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      each(record['value'], function(value, j){\n        var label = value[options[0][0]] + ' ' + value[options[0][1]];\n        dataset.set([ label, index ], value.result);\n      });\n    });\n    return dataset;\n  }\n}\n\nfunction parseFunnel(){\n  return function(res){\n    var result, steps, dataset;\n    if (typeof res.steps !== 'undefined'\n        && typeof res.result !== 'undefined'\n          && res.result instanceof Array) {\n            // Ad-hoc funnel response\n            result = res.result;\n            steps = res.steps;\n    }\n    else if (typeof res.result.steps !== 'undefined'\n        && typeof res.result.result !== 'undefined'\n          && res.result.result instanceof Array) {\n            // Saved funnel response\n            result = res.result.result;\n            steps = res.result.steps;\n    }\n    dataset = new Dataset().type('funnel');\n    dataset.appendColumn('Step Value');\n    each(result, function(value, i){\n      if (typeof steps !== 'undefined' && steps[i]) {\n        dataset.appendRow(String(steps[i].event_collection), [value]);\n      }\n    });\n    return dataset;\n  }\n}\n\nfunction parseList(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('list');\n    each(res.result, function(value, i){\n      dataset.set( [ 'Result', String(i+1) ], value );\n    });\n    return dataset;\n  }\n}\n\nfunction parseExtraction(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('extraction');\n    // create header\n    for (let i=0; i<1; i++){\n      let record = res.result[i];\n      each(flatten(record), function(value, key){\n        dataset.set([ key, String(i+1) ], value);\n      });\n    }\n\n    // get keys of the Object\n    const names = Object.keys(flatten(res.result[0]));\n\n    for (let i=1; i<res.result.length; i++){\n      let record = [i+1];\n      for (let iNames=0; iNames<names.length; iNames++){\n        record.push(valueAtDeepKey(res.result[i], names[iNames]));\n      }\n      dataset.matrix[String(i+1)] = record;\n    }\n\n    dataset.deleteColumn(0);\n    return dataset;\n  }\n}\n\n// Parser definitions\nconst parsers = {\n  metric: parseMetric,\n  interval: parseInterval,\n  'grouped-metric': parseGroupedMetric,\n  'grouped-interval': parseGroupedInterval,\n  'double-grouped-metric': parseDoubleGroupedMetric,\n  'double-grouped-interval': parseDoubleGroupedInterval,\n  funnel: parseFunnel,\n  list: parseList,\n  extraction: parseExtraction,\n};\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function updateColumn(q, input) {\n  var self = this,\n      index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data(), function(row, i){\n        var cell;\n        if (i > 0) {\n          cell = input.call(self, row[index], i, row);\n          if (typeof cell !== 'undefined') {\n            self.matrix[i][index] = cell;\n          }\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.data().length - 1) {\n        input = input.concat( createNullList(self.data().length - 1 - input.length) );\n      }\n      else {\n        // If this new column is longer than existing columns,\n        // we need to update the rest to match ...\n        each(input, function(value, i){\n          if (self.matrix.length -1 < input.length) {\n            appendRow.call(self, String( self.matrix.length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[i+1][index] = value;\n      });\n\n    }\n\n  }\n  return self;\n}\n\nexport function updateRow(q, input){\n  var self = this,\n      index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data()[index], function(value, i){\n        var col = self.selectColumn(i),\n        cell = input.call(self, value, i, col);\n        if (typeof cell !== 'undefined') {\n          self.matrix[index][i] = cell;\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.matrix[0].length - 1) {\n        input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n      }\n      else {\n        each(input, function(value, i){\n          if (self.matrix[0].length -1 < input.length) {\n            appendColumn.call(self, String( self.matrix[0].length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[index][i+1] = value;\n      });\n    }\n\n  }\n  return self;\n}\n","import { each } from '../../utils/each';\nimport analysesUtilMethods from '../utils/analyses';\n\nexport function sortColumns(str, comp) {\n  var self = this,\n      head = this.matrix[0].slice(1), // minus index\n      cols = [],\n      clone = [],\n      fn = comp || analysesUtilMethods.getColumnLabel;\n\n  // Isolate each column (except the index)\n  each(head, function(cell, i) {\n    cols.push(self.selectColumn(i+1).slice(0));\n  });\n  cols.sort(function(a,b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  each(cols, function(col, i) {\n    self\n      .deleteColumn(i+1)\n      .insertColumn(i+1, col[0], col.slice(1));\n  });\n  return self;\n}\n\nexport function sortRows(str, comp) {\n  var self = this,\n      head = this.matrix.slice(0,1),\n      body = this.matrix.slice(1),\n      fn = comp || analysesUtilMethods.getRowIndex;\n  body.sort(function(a, b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  self.data(head.concat(body));\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function selectColumn(q) {\n  const result = [];\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1 && typeof this.matrix[0][index] !== 'undefined') {\n    each(this.matrix, function(row, i) {\n      result.push(row[index]);\n    });\n  }\n  return result;\n}\n\nexport function selectRow(q) {\n  let result = [];\n  const index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1 && typeof this.matrix[index] !== 'undefined') {\n    result = this.matrix[index];\n  }\n  return result;\n}\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function insertColumn(index, str, input) {\n  const self = this;\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n\n    self.matrix[0].splice(index, 0, label);\n    each(self.matrix, function(row, i) {\n      var cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].splice(index, 0, cell);\n      }\n    });\n\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat( createNullList(self.matrix.length - 1 - input.length) );\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String( self.matrix.length ));\n        }\n      });\n    }\n\n    self.matrix[0].splice(index, 0, label);\n    each(input, function(value, i){\n      self.matrix[i+1].splice(index, 0, value);\n    });\n\n  }\n  return self;\n}\n\nexport function insertRow(index, str, input) {\n  const self = this;\n  const newRow = [];\n  const label = (str !== undefined) ? str : null;\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i) {\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.splice(index, 0, newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length ));\n        }\n      });\n    }\n\n    self.matrix.splice(index, 0, newRow.concat(input) );\n  }\n\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function filterColumns(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i) {\n    clone.push([]);\n  });\n\n  each(self.matrix[0], function(col, i){\n    var selectedColumn = self.selectColumn(i);\n    if (i == 0 || fn.call(self, selectedColumn, i)) {\n      each(selectedColumn, function(cell, ri){\n        clone[ri].push(cell);\n      });\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n\nexport function filterRows(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i){\n    if (i == 0 || fn.call(self, row, i)) {\n      clone.push(row);\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function deleteColumn(q) {\n  const self = this;\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n    each(self.matrix, function(row, i){\n      self.matrix[i].splice(index, 1);\n    });\n  }\n  return self;\n}\n\nexport function deleteRow(q) {\n  var index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n    this.matrix.splice(index, 1);\n  }\n  return this;\n}\n","import data from './data';\nimport { Dataset } from './dataset';\n// Utils\nimport { each } from './utils/each';\nimport isDateString from './utils/assert-date-string';\nimport { stripHtmlTags } from './utils/strip-html-tags';\nimport { escapeHtml } from './utils/escape-html';\nimport libraries from './libraries';\nimport { extendDeep } from './utils/extend-deep';\n\n// Constructor\nexport const Dataviz = function (options = {}) {\n  if (this instanceof Dataviz === false) {\n    return new Dataviz(options);\n  }\n\n  const datavizInstance = this;\n\n  const defaultOptions = {\n    showDeprecationWarnings: true,\n    container: undefined, // querySelector of container, for example '#someDiv'\n    containerElement: undefined, // HTML parent element for the chart\n    // width: undefined, *deprecated* - use CSS\n    // height: undefined, *deprecated* - use CSS\n    title: undefined,\n    notes: undefined,\n    theme: 'keen-dataviz',\n\n    colors: [\n      '#00bbde', '#fe6672', '#eeb058', '#8a8ad6', '#ff855c', '#00cfbb',\n      '#5a9eed', '#73d483', '#c879bb', '#0099b6', '#d74d58', '#cb9141',\n      '#6b6bb6', '#d86945', '#00aa99', '#4281c9', '#57b566', '#ac5c9e',\n      '#27cceb', '#ff818b', '#f6bf71', '#9b9be1', '#ff9b79', '#26dfcd',\n      '#73aff4', '#87e096', '#d88bcb',\n    ],\n\n    colorMapping: {},\n\n    indexBy: 'timeframe.start',\n    labels: [],\n    labelMapping: {},\n    library: 'default',\n    sortGroups: undefined,\n    sortIntervals: undefined,\n    showLoadingSpinner: false,\n\n    // C3 chartOptions\n    type: undefined,\n    stacked: false,\n    dateFormat: undefined,\n    legend: {\n      show: true,\n      position: 'right',\n      label: {\n        textMaxLength: 12\n      },\n      pagination: {\n        offset: 0, // start from\n        limit: 5 // items per page\n      },\n      tooltip: {\n        show: true,\n        pointer: true\n      }\n    },\n\n    axis: {},\n    color: {},\n    data: {\n      order: null\n    },\n    size: {\n      // control it with CSS of .c3-chart\n    },\n    padding: {},\n    point: {\n      focus: {\n        expand: {\n          enabled: false\n        }\n      },\n      r: 2,\n      show: true\n    },\n    tooltip: {\n      format: {\n        // https://c3js.org/samples/tooltip_format.html\n      }\n    },\n    transition: {\n      // duration: 0\n    }\n  };\n\n  this.config = { ...extendDeep(defaultOptions, options) };\n\n  // get DOM node by query\n  if (this.config.container) {\n    this.el(this.config.container);\n  }\n\n  this.dataset = new Dataset();\n  this.view = {\n    _prepared: false,\n    _rendered: false,\n    _artifacts: { /* state bin */ }\n  };\n\n  Dataviz.visuals.push(this);\n\n  if (this.config.showLoadingSpinner) {\n    this.prepare();\n  }\n};\n\nDataviz.libraries = { default: {} };\nif (typeof window !== 'undefined') {\n  Dataviz.libraries.default = libraries(Dataviz);\n}\nDataviz.visuals = [];\n\nDataviz.register = function (name, actions) {\n  Dataviz.libraries[name] = Dataviz.libraries[name] || {};\n  each(actions, function(method, key){\n    Dataviz.libraries[name][key] = method;\n  });\n};\n\nDataviz.find = function(target){\n  if (!arguments.length) return Dataviz.visuals;\n  const el = target.nodeName ? target : document.querySelector(target);\n  let match = null;\n  each(Dataviz.visuals, function(visual){\n    if (el == visual.config.container){\n      match = visual;\n      return false;\n    }\n  });\n  return match;\n};\n\n\n  // Prototype\n  // ------------\n\nDataviz.prototype.attributes = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.attributes() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  const view = this.config;\n  each(obj, function(prop, key){\n    // Handle deprecated property names\n    if (key === 'chartType') {\n      key = 'type';\n    }\n    view[key] = prop;\n  });\n  return this;\n};\n\nDataviz.prototype.call = function(fn){\n    fn.call(this);\n    return this;\n};\n\nDataviz.prototype.chartOptions = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.chartOptions() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  this.config = extendDeep(this.config, obj);\n  return this;\n};\n\nDataviz.prototype.colors = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colors() is deprecated. Use: new KeenDataviz({ colors: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.colors;\n  this.config.colors = (arr instanceof Array ? arr : []);\n  return this;\n};\n\nDataviz.prototype.colorMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colorMapping() is deprecated. Use: new KeenDataviz({ colorMapping: _your_value_here_ })');\n  }\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.colorMapping;\n  if (obj === null) {\n    this.config.colorMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      datavizInstance.config.colorMapping[key] = (value ? value : null);\n    });\n  }\n  return this;\n};\n\nDataviz.prototype.data = data;\n\nDataviz.prototype.dateFormat = function(val){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.dateFormat() is deprecated. Use: new KeenDataviz({ dateFormat: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.dateFormat;\n  if (typeof val === 'string' || typeof val === 'function') {\n    this.config.dateFormat = val;\n  }\n  else {\n    this.config.dateFormat = undefined;\n  }\n  return this;\n};\n\nDataviz.prototype.destroy = function(){\n  const library = this.library();\n  const type = this.config.type;\n  const element = this.el();\n\n    // Call destroy method if present\n  if (Dataviz.libraries[library]\n      && Dataviz.libraries[library][type]){\n        Dataviz.libraries[library][type].destroy.call(this);\n  }\n\n    // Clear rendered artifacts, state bin\n  if (element) {\n    element.innerHTML = '';\n  }\n  this.view._prepared = false;\n  this.view._rendered = false;\n  this.view._artifacts = {};\n  return this;\n};\n\nDataviz.prototype.el = function(target){\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.containerElement;\n  domReady(function(){\n    if (target && target !== null) {\n      if (target.nodeName) {\n        datavizInstance.config.containerElement = target;\n      }\n      else if (document.querySelector) {\n        datavizInstance.config.containerElement = document.querySelector(target);\n      }\n    }\n    else {\n      datavizInstance.config.containerElement = undefined;\n    }\n  });\n  return this;\n};\n\nDataviz.prototype.height = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.height() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\n// IMPORTANT: Must be run before data parsing\nDataviz.prototype.indexBy = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.indexBy() is deprecated. Use: new KeenDataviz({ indexBy: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.indexBy;\n  this.config.indexBy = (str ? String(str) : 'timeframe.start');\n  return this;\n};\n\nDataviz.prototype.labels = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labels() is deprecated. Use: new KeenDataviz({ labels: _your_value_here_ })');\n  }\n\n  if (!arguments.length) return this.config.labels;\n  this.config.labels = (arr instanceof Array ? arr : []);\n\n  setLabels(this);\n\n  return this;\n};\n\nfunction setLabels(datavizInstance){\n  // Write labels\n  if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n    datavizInstance.dataset.updateColumn(0, function(value, index){\n      if (datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n  else {\n    datavizInstance.dataset.updateRow(0, function(value, index){\n      if (index > 0 && datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.labelMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labelMapping() is deprecated. Use: new KeenDataviz({ labelMapping: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.labelMapping;\n  if (obj === null) {\n    this.config.labelMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      this.config.labelMapping[key] = (value ? value : null);\n    }.bind(this));\n  }\n\n  mapLabels(this);\n\n  return this;\n};\n\nfunction mapLabels(datavizInstance){\n  // Write labels\n  if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n    datavizInstance.dataset.updateColumn(0, function(value){\n      if (datavizInstance.config.labelMapping[value]) {\n        return stripHtmlTags(String(datavizInstance.config.labelMapping[value]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n  else {\n    datavizInstance.dataset.updateRow(0, function(value){\n      if (datavizInstance.config.labelMapping[value]) {\n        return stripHtmlTags(String(datavizInstance.config.labelMapping[value]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.library = function(str){\n    if (!arguments.length) return this.config['library'];\n    this.config['library'] = (str ? String(str) : null);\n    return this;\n};\n\nDataviz.prototype.message = function(){\n    if (this.view._rendered) {\n      this.destroy();\n    }\n    if (this.el()) {\n      this.el().innerHTML = '';\n      const message = Dataviz.libraries.default.message;\n      if (message.render) {\n        message.render.apply(this, arguments);\n      }\n    }\n    return this;\n};\n\nDataviz.prototype.notes = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.notes() is deprecated. Use: new KeenDataviz({ notes: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.notes;\n  this.config.notes = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.prepare = function(){\n    const datavizInstance = this;\n\n    if (!this.el()) {\n      throw `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n      return;\n    }\n\n    domReady(function(){\n      if (datavizInstance.view._rendered) {\n        datavizInstance.destroy();\n      }\n      if (datavizInstance.el()) {\n        datavizInstance.el().innerHTML = '';\n        const loader = Dataviz.libraries.default.spinner;\n        if (loader.render) {\n          loader.render.call(datavizInstance);\n        }\n        datavizInstance.view._prepared = true;\n      }\n    });\n\n    return this;\n};\n\nDataviz.prototype.render = function(rawData = undefined){\n  const datavizInstance = this;\n  if (rawData) {\n    return datavizInstance.data(rawData).render();\n  }\n  if (Object.keys(this.config.labelMapping).length > 0){\n    mapLabels(datavizInstance);\n  }\n  if (!!this.config.labels && Object.keys(this.config.labels).length > 0){\n    setLabels(datavizInstance);\n  }\n  if (!!this.config.sortGroups) {\n    sortGroups(datavizInstance);\n  }\n  if (!!this.config.sortIntervals) {\n    sortIntervals(datavizInstance);\n  }\n\n  const loader = Dataviz.libraries.default.spinner;\n  const library = this.config.library;\n  const type = this.config.type;\n  const containerElement = this.el();\n\n  if (!containerElement || containerElement === undefined) {\n    const msg = `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n    console.error(msg);\n    throw msg;\n    return;\n  }\n\n  domReady(function(){\n    if (datavizInstance.view._prepared && loader.destroy) {\n      loader.destroy.apply(datavizInstance, arguments);\n    }\n    containerElement.innerHTML = '';\n\n    if (Dataviz.libraries[library] === 'undefined'){\n      // Error: Unregistered library\n      const msg = `Incorrect library`;\n      datavizInstance.message(msg);\n      throw msg;\n      return;\n    }\n    else {\n      if (typeof Dataviz.libraries[library][type] === 'undefined') {\n        const msg = `Incorrect chart type`;\n        datavizInstance.message(msg);\n        throw msg;\n        return;\n      }\n      else {\n        buildDomWrapper(containerElement,\n          datavizInstance.config\n        );\n        Dataviz.libraries[library][type].render.call(datavizInstance);\n        datavizInstance.view._rendered = true;\n      }\n    }\n  });\n  return this;\n};\n\nDataviz.prototype.sortGroups = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortGroups() is deprecated. Use: new KeenDataviz({ sortGroups: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortGroups;\n  this.config.sortGroups = (str ? String(str) : null);\n\n  sortGroups(this, str);\n\n  return this;\n};\n\nfunction sortGroups(datavizInstance){\n  // Sort groups\n  if (datavizInstance.config.sortGroups && datavizInstance.data().length > 1) {\n    if (isDateString(datavizInstance.data()[1][0])) {\n      datavizInstance.dataset.sortColumns(datavizInstance.config.sortGroups, datavizInstance.dataset.getColumnSum);\n    }\n    else {\n      datavizInstance.dataset.sortRows(datavizInstance.config.sortGroups, datavizInstance.dataset.getRowSum);\n    }\n  }\n}\n\nDataviz.prototype.sortIntervals = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortIntervals() is deprecated. Use: new KeenDataviz({ sortIntervals: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortIntervals;\n  this.config.sortIntervals = (str ? String(str) : null);\n\n  sortIntervals(this);\n\n  return this;\n};\n\nfunction sortIntervals(datavizInstance){\n  if (datavizInstance.config.sortIntervals) {\n    datavizInstance.dataset.sortRows(datavizInstance.config.sortIntervals);\n  }\n}\n\nDataviz.prototype.stacked = function(bool){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.stacked() is deprecated. Use: new KeenDataviz({ stacked: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.stacked;\n  this.config.stacked = bool ? true : false;\n  return this;\n};\n\nDataviz.prototype.theme = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.theme() is deprecated. Use: new KeenDataviz({ theme: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.theme;\n  this.config.theme = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.title = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.title() is deprecated. Use: new KeenDataviz({ title: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.title;\n  this.config.title = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.type = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.type() is deprecated. Use: new KeenDataviz({ type: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.type;\n  this.config.type = (str ? convertChartTypes(str) : null);\n  return this;\n};\n\nDataviz.prototype.update = function(){\n  const library = this.config.library;\n  const type = this.config.type;\n  const element = this.el();\n  if (library && type && element && Dataviz.libraries[library][type].update) {\n    Dataviz.libraries[library][type].update.apply(this, arguments);\n  }\n  return this;\n};\n\nDataviz.prototype.width = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.width() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\n  // Deprecations\n  Dataviz.prototype.chartType = Dataviz.prototype.type;\n  Dataviz.prototype.error = Dataviz.prototype.message;\n  Dataviz.prototype.parseRawData = Dataviz.prototype.data;\n  Dataviz.prototype.parseRequest = function(){\n    // this.emit('error', 'This method is no longer supported. Use .data() instead: https://github.com/keen/keen-dataviz.js#data');\n    return this;\n  };\n  Dataviz.prototype.initialize = function(){\n    // this.emit('error', 'This method is no longer supported, and can be omitted as it has no impact');\n    return this;\n  };\n\n  // Private\n  // ------------\n\nfunction buildDomWrapper(el, options) {\n  let html = '';\n  let chart100percentWide = '';\n  if (options.legend.position === 'top' || options.legend.position === 'bottom') {\n    chart100percentWide = 'c3-chart-100-percent';\n  }\n\n  let container = `<div class=\"c3-chart ${chart100percentWide}\"></div>`;\n  let align = 'horizontal';\n  if (options.legend.position === 'left' || options.legend.position === 'right') {\n    align = 'vertical';\n  }\n  if (options.legend.position === 'top' || options.legend.position === 'left') {\n    container = `<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>${container}`;\n  } else {\n    container = `${container}<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>`;\n  }\n  html += `<div class=\"${options.theme}\">`;\n  if (options.title) {\n    html += `<div class=\"${options.theme}-title\">${options.title}</div>`;\n  }\n  html += `<div class=\"${options.theme}-rendering ${options.theme}-rendering-${align}\">${container}</div>`;\n  if (options.notes) {\n    html += `<div class=\"${options.theme}-notes\">${options.notes}</div>`;\n  }\n  html += `</div>`;\n  el.innerHTML = html;\n}\n\nfunction convertChartTypes(str) {\n  const map = {\n    areachart: 'area',\n    barchart: 'horizontal-bar',\n    columnchart: 'bar',\n    linechart: 'line',\n    piechart: 'pie',\n  };\n  return map[str] || str;\n}\n\nfunction testDom(fn) {\n  if (/in/.test(document.readyState)) {\n    setTimeout(function(){\n      testDom(fn);\n    }, 9);\n  } else {\n    fn();\n  }\n}\n\nfunction domReady(fn) {\n  if (typeof document !== 'undefined' || typeof window === 'undefined') {\n    fn();\n    return;\n  }\n  // Firefox 3.5 shim\n  if (document.readyState == null && document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', function DOMContentLoaded() {\n      document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n      document.readyState = 'complete';\n    }, false);\n    document.readyState = 'loading';\n  }\n  testDom(fn);\n}\n\nexport { Dataset } from './dataset';\n\nexport default Dataviz;\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","import { Dataviz, Dataset } from './index';\n\nconst env = typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {};\n\nexport const extendKeenGlobalObject = function(env) {\n  env.KeenDataviz = Dataviz;\n  env.KeenDataset = Dataset;\n\n  // just for backward compatibility\n  env.Keen = env.Keen || {};\n  env.Keen.Dataset = Dataset;\n  env.Keen.Dataviz = Dataviz;\n};\n\nif (\n     (typeof KEEN_GLOBAL_OBJECT !== 'undefined'\n      && KEEN_GLOBAL_OBJECT)\n     || typeof KEEN_EXPOSE_AS_GLOBAL_OBJECT !== 'undefined'\n   ) {\n  extendKeenGlobalObject(env);\n}\n\nexport { Dataviz, Dataset } from './index';\nexport default Dataviz;\n"],"sourceRoot":""}