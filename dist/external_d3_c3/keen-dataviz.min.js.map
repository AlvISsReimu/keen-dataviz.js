{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/utils/each.js","webpack:///./lib/utils/escape-html.js","webpack:///./lib/utils/extend.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/promise-polyfill/src/finally.js","webpack:///./lib/utils/assert-date-string.js","webpack:///./lib/dataset/utils/create-null-list.js","webpack:///./lib/dataset/modifiers/append.js","webpack:///./lib/utils/extend-deep.js","webpack:///external \"d3\"","webpack:///./lib/utils/strip-html-tags.js","webpack:///./lib/dataset/utils/analyses.js","webpack:///./lib/dataset/index.js","webpack:///./node_modules/promise-polyfill/src/index.js","webpack:///./lib/libraries/default/spinner.js","webpack:///./lib/libraries/default/table.js","webpack:///./lib/utils/pretty-number.js","webpack:///./lib/libraries/default/metric.js","webpack:///./lib/libraries/default/message.js","webpack:///./lib/libraries/c3/extensions/tooltip-contents.js","webpack:///./lib/libraries/c3/extensions/paginating-legend.js","webpack:///./lib/libraries/c3/extensions/default-date-format.js","webpack:///external \"c3\"","webpack:///./lib/libraries/index.js","webpack:///./lib/data.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/promise-polyfill/src/polyfill.js","webpack:///./lib/dataset/utils/object.js","webpack:///./lib/dataset/utils/flatten.js","webpack:///./lib/dataset/utils/parsers.js","webpack:///./lib/dataset/modifiers/update.js","webpack:///./lib/dataset/modifiers/sort.js","webpack:///./lib/dataset/modifiers/select.js","webpack:///./lib/dataset/modifiers/insert.js","webpack:///./lib/dataset/modifiers/filter.js","webpack:///./lib/dataset/modifiers/delete.js","webpack:///./lib/index.js","webpack:///./lib/browser.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__9__","__WEBPACK_EXTERNAL_MODULE__22__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","each","cb","Array","length","escapeHtml","string","escape","str","match","matchHtmlRegExp","exec","html","index","lastIndex","charCodeAt","substring","extend","target","arguments","prop","g","this","Function","eval","e","__webpack_exports__","callback","constructor","then","resolve","reason","reject","testObject","input","getTime","isNaN","testString","test","_typeof","len","list","push","appendColumn","appendRow","_createNullList","_each","self","label","slice","undefined","matrix","row","cell","concat","_createNullList2","default","String","newRow","col","selectColumn","extendDeep","key","stripHtmlTags","inputString","replace","average","arr","start","end","set","sum","val","parseFloat","maximum","nums","Math","max","apply","minimum","min","getColumnAverage","getRowAverage","getColumnSum","getRowSum","getColumnMaximum","getRowMaximum","getColumnMinimum","getRowMinimum","getColumnLabel","getRowIndex","append","del","filter","insert","select","sort","update","_extend","Dataset","config","meta","type","data","coords","Error","colIndex","indexOf","rowIndex","colResult","rowResult","selectRow","analyses","parser","_parsers2","setTimeoutFunc","setTimeout","noop","Promise","fn","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","onFulfilled","onRejected","ret","promise","newValue","finale","thisArg","_unhandledRejectionFn","done","ex","prom","_finally__WEBPACK_IMPORTED_MODULE_0__","all","args","remaining","res","race","values","setImmediate","err","console","warn","render","view","_artifacts","spinner","theme","el","innerHTML","destroy","interval","clearInterval","radius","currentPage","_generateTableRows","datavizInstance","dataset","customConfig","table","pagination","page","limit","arrows","datasetPaginated","pages","ceil","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","return","pageNumber","prevPage","nextPage","_this","msg","mappedMsg","errorMapping","showErrorMessages","message","fieldNumber","columnNames","columns","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","colName","_generateTableHeader","querySelector","querySelectorAll","forEach","item","addEventListener","event","sortOrder","getAttribute","setAttribute","first","shift","b","sortOrderNumber","nameA","toUpperCase","nameB","unshift","attachBtnEventListeners","btn","parseInt","onrendered","prettyNumber","sciNo","Number","toPrecision","prefix","suffixes","abs","recurse","iteration","split","rhs","charAt","numNumerals","_prettyNumber","_escapeHtml","colors","title","opts","suffix","formattedNum","text","outer","document","createElement","inner","titleContainer","notesContainer","className","notes","appendChild","showTitle","defaultTitleFormat","defaultValueFormat","color","nameFormat","tooltip_format_name","titleFormat","tooltip_format_title","valueFormat","tooltip_format_value","x","CLASS","tooltip","ratio","id","bgcolor","levelColor","tooltipName","options","cols","chart","c3","domNode","legendConfig","legend","_extends","hidden","labels","offset","round","offsetHeight","total","_assertDateString2","legendElement","align","position","paginateHorizontalLeftElement","legendItemsElement","paginateVerticalElement","paginateHorizontalRightElement","paginateData","labelShortened","textMaxLength","legendItem","chartPartId","legendItemColorSample","style","backgroundColor","prepend","tooltipElement","focus","show","pointer","revert","remove","opacity","isHidden","splice","toggle","arrowUp","arrowDown","paginate","direction","diff","floor","clearSelectedText","resize","selection","empty","getSelection","removeAllRanges","_assertDateString","startDate","endDate","timeDiff","Date","months","ms","date","getMonth","getFullYear","getDate","lib","timer","onresize","attachEvent","bindResizeListener","clearTimeout","delay","visuals","types","metric","ENFORCED_OPTIONS","bindto","pattern","colorMapping","height","titleElement","getComputedStyle","notesElement","DEFAULT_OPTIONS","size","width","offsetWidth","_extendDeep","clearOnRender","removeLegend","axis","rotated","tick","format","dateFormat","_defaultDateFormat2","culling","stacked","groups","categories","bind","partialIntervalIndicator","results","partialResultsRegion","class","regions","_toConsumableArray","c3options","scope","contents","c3TooltipContents","valueFormatted","generate","c3PaginatingLegend","defineC3","response","indexBy","query","selectedParser","parserArgs","metadata","analysis_type","event_collection","filters","group_by","timeframe","timezone","result","steps","display_name","analysis","getDefaultTitle","visualization","chart_type","getDefaultType","updateColumn","updateRow","_stripHtmlTags","_dataset","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","nextTick","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","global","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","toString","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","documentElement","script","onreadystatechange","removeChild","random","source","task","clearImmediate","Timeout","clearFn","_id","_clearFn","setInterval","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","globalNS","_finally__WEBPACK_IMPORTED_MODULE_1__","_index__WEBPACK_IMPORTED_MODULE_0__","valueAtDeepKey","obj","is","flatten","ob","toReturn","flatObject","parsers","_flatten","_object","record","grouped-metric","grouped-interval","group","j","double-grouped-metric","rowLabel","double-grouped-interval","funnel","extraction","datasetExtraction","_loop","names","keys","iNames","deleteColumn","q","_append","sortColumns","comp","head","analysesUtilMethods","op","insertColumn","sortRows","body","_analyses","insertRow","filterColumns","clone","selectedColumn","ri","filterRows","deleteRow","Dataviz","_defaultOptions","defaultOptions","_defineProperty","showDeprecationWarnings","showLoadingSpinner","container","containerElement","labelMapping","labelMappingRegExp","library","sortGroups","sortIntervals","order","padding","point","expand","enabled","transition","draggable","multiple","convertChartTypes","_prepared","_rendered","prepare","setLabels","mapLabelsExec","_ref","valueAfterMatching","regExpAndLabel","mapLabels","areachart","barchart","columnchart","linechart","piechart","domReady","readyState","DOMContentLoaded","removeEventListener","testDom","libraries","_libraries2","register","actions","method","find","nodeName","visual","attributes","log","chartOptions","element","num","loader","firstResult","isArray","timeframes","map","resultItem","resultTimeframe","timeframeItem","JSON","stringify","error","getLabel","ds2","returnValue","renderAsPromise","customCallback","chart100percentWide","buildDomWrapper","bool","chartType","parseRawData","parseRequest","initialize","_index","extendKeenGlobalObject","KeenDataviz","KeenDataset","Keen","keenGlobals","webpackKeenGlobals"],"mappings":"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","file":"keen-dataviz.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"), require(\"c3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\", \"c3\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\"), require(\"c3\")) : factory(root[\"d3\"], root[\"c3\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__22__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 39);\n","export function each(o, cb, s) {\n  var n;\n  if (!o) {\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array) {\n    // Indexed arrays, needed for Safari\n    for (n = 0; n < o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false) {\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o) {\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","const matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nexport function escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","export function extend(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n}\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","export default function(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n","export function testObject(input) {\n  if (input !== null && typeof input.getTime === 'function' && !isNaN(input.getTime())) {\n    return true;\n  }\n  return false;\n}\n\nexport function testString(input) {\n  const ISO_8601 = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n  return ISO_8601.test(input);\n}\n\nexport default function (input) {\n  if (typeof input === 'object') {\n    return testObject(input);\n  } else if (typeof input === 'string') {\n    return testString(input);\n  }\n  return false;\n}\n","export default function (len) {\n  const list = [];\n  for (let i = 0; i < len; i++) {\n    list.push(null);\n  }\n  return list;\n}\n","import createNullList from '../utils/create-null-list';\nimport { each } from '../../utils/each';\n\nexport function appendColumn(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n    self.matrix[0].push(label);\n    each(self.matrix, function(row, i) {\n      let cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].push(cell);\n      }\n    });\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat(createNullList(self.matrix.length - 1 - input.length));\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String(self.matrix.length));\n        }\n      });\n    }\n\n    self.matrix[0].push(label);\n    each(input, function(value, i){\n      self.matrix[i+1][self.matrix[0].length-1] = value;\n    });\n\n  }\n\n  return self;\n}\n\nexport function appendRow(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n  const newRow = [];\n\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i){\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.push(newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length));\n        }\n      });\n    }\n\n    self.matrix.push(newRow.concat(input));\n  }\n\n  return self;\n}\n","import { each } from './each';\n\nexport function extendDeep(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    each(arguments[i], function(prop, key){\n      if (( typeof target[key] !== 'undefined' && typeof prop !== 'undefined' ) &&\n          ( typeof target[key] === 'object'    && typeof prop === 'object' ) &&\n          ( target[key] !== null               && prop !== null )) {\n            extendDeep(target[key], prop);\n      }\n      else {\n        target[key] = prop;\n      }\n    });\n  }\n  return target;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","/**\n * Strip html tags from string\n *\n * @param  {string} string The string to strip\n * @return {string}\n * @public\n */\n\nexport function stripHtmlTags(inputString) {\n  return inputString.replace(/(<([^>]+)>)/ig, '');\n}\n","import { each } from '../../utils/each';\nimport { extend } from '../../utils/extend';\n\nfunction average(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0,\n      avg = null;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum / set.length;\n}\n\nfunction maximum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.max.apply(Math, nums);\n}\n\nfunction minimum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.min.apply(Math, nums);\n}\n\nfunction sum(arr, start, end){\n  // Copy set with given range\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum;\n}\n\nconst getColumnAverage = function (arr) {\n  return average(arr, 1);\n};\nconst getRowAverage = getColumnAverage;\n\nconst getColumnSum = function (arr) {\n  return sum(arr, 1);\n};\nconst getRowSum = getColumnSum;\n\nconst getColumnMaximum = function (arr) {\n  return maximum(arr, 1);\n};\nconst getRowMaximum = getColumnMaximum;\n\nconst getColumnMinimum = function (arr) {\n  return minimum(arr, 1);\n};\nconst getRowMinimum = getColumnMinimum;\n\nconst getColumnLabel = function (arr) {\n  return arr[0];\n};\nconst getRowIndex = getColumnLabel;\n\nexport default {\n  average,\n  maximum,\n  minimum,\n  sum,\n  getColumnAverage,\n  getRowAverage,\n  getColumnSum,\n  getRowSum,\n  getColumnMaximum,\n  getRowMaximum,\n  getColumnMinimum,\n  getRowMinimum,\n  getColumnLabel,\n  getRowIndex,\n};\n","// Modifiers\nimport * as append from './modifiers/append';\nimport * as del from './modifiers/delete';\nimport * as filter from './modifiers/filter';\nimport * as insert from './modifiers/insert';\nimport * as select from './modifiers/select';\nimport * as sort from './modifiers/sort';\nimport * as update from './modifiers/update';\n\n// Utils\nimport analyses from './utils/analyses';\nimport { extend } from '../utils/extend';\nimport parsers from './utils/parsers';\n\nexport const Dataset = function (config = {}) {\n  if (this instanceof Dataset === false) {\n    return new Dataset(config);\n  }\n\n  this.matrix = [\n    ['Index']\n  ];\n  this.meta = {\n    type: undefined\n  };\n  this.config = config;\n}\n\nDataset.prototype.data = function (arr) {\n  if (!arguments.length) return this.matrix;\n  this.matrix = (arr instanceof Array ? arr : null);\n  return this;\n};\n\nDataset.prototype.set = function (coords, value) {\n  if (arguments.length < 2 || coords.length < 2) {\n    throw Error('Incorrect arguments provided for #set method');\n  }\n\n  var colIndex = 'number' === typeof coords[0] ? coords[0] : this.matrix[0].indexOf(coords[0]),\n      rowIndex = 'number' === typeof coords[1] ? coords[1] : select.selectColumn.call(this, 0).indexOf(coords[1]);\n\n  var colResult = select.selectColumn.call(this, coords[0]),\n      rowResult = select.selectRow.call(this, coords[1]);\n\n  // Column doesn't exist, create and reset colIndex\n  if (colResult.length < 1) {\n    append.appendColumn.call(this, String(coords[0]));\n    colIndex = this.matrix[0].length - 1;\n  }\n\n  // Row doesn't exist, create and reset rowIndex\n  if (rowResult.length < 1) {\n    append.appendRow.call(this, String(coords[1]));\n    rowIndex = this.matrix.length - 1;\n  }\n\n  // Set provided value\n  this.matrix[ rowIndex ][ colIndex ] = value;\n  return this;\n};\n\nDataset.prototype.type = function(str){\n  if (!arguments.length) return this.meta['type'];\n  this.meta['type'] = (str ? String(str) : undefined);\n  return this;\n};\n\nextend(Dataset.prototype, append);\nextend(Dataset.prototype, del);\nextend(Dataset.prototype, filter);\nextend(Dataset.prototype, insert);\nextend(Dataset.prototype, select);\nextend(Dataset.prototype, sort);\nextend(Dataset.prototype, update);\nextend(Dataset.prototype, analyses);\nDataset.parser = parsers(Dataset);\n\nexport default Dataset;\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","export default {\n  render: function(){\n    let html = '';\n    const artifacts = this.view._artifacts.spinner = {};\n\n    // Build DOM element\n    html += '<div class=\"' + this.config.theme + '\">';\n    html +=   '<div class=\"keen-spinner-container keen-dataviz-box\">';\n    html +=     '<div class=\"keen-spinner-indicator\"></div>';\n    html +=   '</div>';\n    html += '</div>';\n    this.el().innerHTML = html;\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    if (this.view._artifacts.spinner) {\n      if (this.view._artifacts.spinner.interval) {\n        clearInterval(this.view._artifacts.spinner.interval);\n      }\n      this.view._artifacts.spinner.radius = 0;\n      try {\n        delete this.view._artifacts.spinner;\n      }\n      catch (e) {\n        this.view._artifacts.spinner = undefined;\n      }\n    }\n    this.el().innerHTML = '';\n  }\n};\n","import { each } from '../../utils/each';\n\nconst defaults = {\n  /*\n  DEPRECATED - use CSS styles\n\n  height: undefined,\n  width: undefined,\n  stickyHeader: false,\n  stickyFooter: false\n  */\n};\n\nlet currentPage;\nfunction _generateTableRows(datavizInstance, dataset) {\n  let html = '';\n  const defaultConfig = {\n    page: 1,\n    limit: 0,\n    arrows: true\n  };\n  let customConfig = {};\n  if (datavizInstance.config.table && datavizInstance.config.table.pagination) {\n    customConfig = datavizInstance.config.table.pagination;\n  }\n  const config = {\n    ...defaultConfig,\n    ...customConfig\n  };\n\n  if (!currentPage){\n    currentPage = config.page;\n  }\n\n  let datasetPaginated;\n  let pages = 0;\n  if (config.limit === 0) {\n    datasetPaginated = dataset.slice(1); // remove header\n  } else {\n    const start = config.limit * (currentPage - 1) + 1;\n    const end = start + config.limit;\n    datasetPaginated = dataset.slice(start, end);\n    pages = Math.ceil((dataset.length - 1) / config.limit);\n  }\n\n  for (let row of datasetPaginated) {\n    html +=   '<tr class=\"table-data-row\">';\n    for (let rowCol of row) {\n      html +=   `<td>${rowCol}</td>`;\n    }\n    html +=   '</tr>';\n  }\n\n  if (pages > 1){\n    html += `<tr class=\"table-pagination\"><td colspan=\"999\">`;\n    let pageNumber = 1;\n    const prevPage = (currentPage === 1) ? 1 : (currentPage - 1);\n    const nextPage = (currentPage === pages) ? pages : (currentPage + 1);\n    if (config.arrows){\n      html += `<a class=\"arrow btn\" data-page=\"${prevPage}\"><</a>`;\n    }\n    while (pageNumber <= pages){\n      html += `<a class=\"btn ${\n        pageNumber === currentPage ? 'active' : ''\n      }\" data-page=\"${pageNumber}\">${pageNumber}</a>`;\n      pageNumber++;\n    }\n    if (config.arrows){\n      html += `<a class=\"arrow btn\" data-page=\"${nextPage}\">></a>`;\n    }\n    html += '</td></tr>';\n  }\n\n  return html;\n}\n\nfunction _generateTableHeader(datavizInstance, dataset) {\n  let html = '';\n  let fieldNumber = -1;\n  let columnNames =\n    (datavizInstance.config.table && datavizInstance.config.table.columns)\n    || dataset[0];\n  for (let colName of columnNames) {\n    fieldNumber +=1;\n    html +=  `<th fieldNumber=\"${fieldNumber}\">${colName}</th>`;\n  }\n  return html;\n}\n\n\n  const render = function() {\n    const dataset = this.dataset.matrix;\n\n    const el = this.el();\n    const theme = this.config.theme;\n    const datavizInstance = this;\n\n    let html = '';\n\n    const isEmpty = dataset.length === 1 && dataset[0].length === 0;\n    if (isEmpty) {\n      const msg = 'No data to display';\n      const mappedMsg = this.config.errorMapping[msg] || msg;\n      if (this.config.showErrorMessages) {\n        this.message(mappedMsg);\n      }\n      return;\n    }\n\n    // Open wrapper\n    html += `<div class=\"${theme}-table\">`;\n\n    // Static, scrollable table\n    html +=   `<table class=\"${theme}-table-dataset\">`;\n    html +=     '<thead>';\n    html +=       '<tr>';\n    html +=       _generateTableHeader(datavizInstance, dataset);\n    html +=       '</tr>';\n    html +=     '</thead>';\n    // Table data\n    html +=     '<tbody>';\n    html +=     _generateTableRows(datavizInstance, dataset);\n    html +=     '</tbody>';\n    html +=   '</table>';\n/* */\n    // Close wrapper\n    html += '</div>';\n\n    // Inject HTML string\n    el.querySelector(`.${theme}-rendering`).innerHTML = html;\n\n    el\n      .querySelectorAll(`.${theme}-rendering th`)\n      .forEach((item) => {\n        item.addEventListener('click', (event) => {\n          let sortOrder = event.target.getAttribute('order') || 'asc';\n          let fieldNumber =  event.target.getAttribute('fieldNumber');\n          let checker = function (a, b) {\n            let sortOrderNumber = (sortOrder === 'asc') ? 1 : -1;\n\n            if (typeof a[fieldNumber] === 'string') {\n              let nameA = a[fieldNumber].toUpperCase(); // ignore upper and lowercase\n              let nameB = b[fieldNumber].toUpperCase(); // ignore upper and lowercase\n              if (nameA < nameB) {\n                return -1 * sortOrderNumber;\n              }\n              if (nameA > nameB) {\n                return 1* sortOrderNumber;\n              }\n\n              // names must be equal\n              return 0;\n            }\n            return (a[fieldNumber] - b[fieldNumber]) * sortOrderNumber;\n          };\n\n          if (sortOrder === 'asc') {\n            sortOrder = 'desc';\n          } else {\n            sortOrder = 'asc'\n          }\n          event.target.setAttribute('order', sortOrder);\n\n          const first = this.dataset.matrix.shift();\n          this.dataset.matrix.sort(checker);\n          this.dataset.matrix.unshift(first);\n\n          el.querySelector(`.${theme}-rendering tbody`).innerHTML =\n             _generateTableRows(datavizInstance, dataset);\n          attachBtnEventListeners();\n        });\n      });\n\n\n    const attachBtnEventListeners = () => {\n      el.querySelectorAll('.btn').forEach(btn => {\n        btn.addEventListener('click', (event) => {\n          currentPage = parseInt(event.target.getAttribute('data-page'));\n          el.querySelector(`.${theme}-rendering tbody`).innerHTML =\n             _generateTableRows(datavizInstance, dataset);\n             attachBtnEventListeners();\n          }, true);\n      });\n    };\n\n    attachBtnEventListeners(datavizInstance, el, theme);\n\n    if (this.config.onrendered) {\n      this.config.onrendered();\n    }\n  };\n\n\n\nconst update = function(){\n    // no special update handling\n    this.render();\n  };\n\nconst destroy=  function(){};\n\nexport default { render, update, destroy };\n","export function prettyNumber(input) {\n  // If it has 3 or fewer sig figs already, just return the number.\n  var input = Number(input),\n      sciNo = input.toPrecision(3),\n      prefix = '',\n      suffixes = ['', 'k', 'M', 'B', 'T'];\n\n  if (Number(sciNo) == input && String(input).length <= 4) {\n    return String(input);\n  }\n\n  if (Math.abs(input) >= 1000000000000000) {\n    return sciNo;\n  }\n\n  if (input >= 1 || input <= -1) {\n    if (input < 0){\n      //Pull off the negative side and stash that.\n      input = -input;\n      prefix = '-';\n    }\n    return prefix + recurse(input, 0);\n  }\n  else {\n    return input.toPrecision(3);\n  }\n\n  function recurse(input, iteration) {\n    var input = String(input);\n    var split = input.split('.');\n    // If there's a dot\n    if (split.length > 1) {\n      // Keep the left hand side only\n      input = split[0];\n      var rhs = split[1];\n      // If the left-hand side is too short, pad until it has 3 digits\n      if (input.length == 2 && rhs.length > 0) {\n        // Pad with right-hand side if possible\n        if (rhs.length > 0) {\n          input = input + '.' + rhs.charAt(0);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n      else if (input.length == 1 && rhs.length > 0) {\n        input = input + '.' + rhs.charAt(0);\n        // Pad with right-hand side if possible\n        if (rhs.length > 1) {\n          input += rhs.charAt(1);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n    }\n    var numNumerals = input.length;\n    // if it has a period, then numNumerals is 1 smaller than the string length:\n    if (input.split('.').length > 1) {\n      numNumerals--;\n    }\n    if (numNumerals <= 3) {\n      return String(input) + suffixes[iteration];\n    }\n    else {\n      return recurse(Number(input) / 1000, iteration + 1);\n    }\n  }\n}\n","import { prettyNumber } from '../../utils/pretty-number';\nimport { escapeHtml } from '../../utils/escape-html';\n\nexport default {\n  render: function(){\n    const color = this.config.colors[0];\n    const theme = this.config.theme;\n    const title = this.config.title;\n    const opts = this.config;\n    let value = '-';\n    let html = '';\n    let prefix = '';\n    let suffix = '';\n    let formattedNum;\n    let valueEl;\n\n    if (typeof this.data()[1][1] === 'number') {\n      value = this.data()[1][1];\n    }\n\n    formattedNum = value;\n    if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n      && !isNaN(parseInt(value)) ) {\n        formattedNum = prettyNumber(value);\n    }\n\n    if (opts['prefix']) {\n      prefix = '<span class=\"' + theme + '-metric-prefix\">' + opts['prefix'] + '</span>';\n    }\n    if (opts['suffix']) {\n      suffix = '<span class=\"' + theme + '-metric-suffix\">' + opts['suffix'] + '</span>';\n    }\n\n    html += '<div class=\"' + theme + '\">';\n    html +=   '<div class=\"' + theme + '-metric keen-dataviz-box\" title=\"' + escapeHtml(value) + '\">';\n    html +=     '<span><div class=\"' + theme + '-metric-value\">' + prefix + escapeHtml(formattedNum) + suffix + '</div>';\n    if (title) {\n      html +=   '<div class=\"' + theme + '-metric-title\">' + escapeHtml(title) + '</div>';\n    }\n    html +=   '</span></div>';\n    html += '</div>';\n\n    this.el().innerHTML = html;\n\n    if (this.config.onrendered) {\n      this.config.onrendered();\n    }\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","import { escapeHtml } from '../../utils/escape-html';\n\nexport default {\n  render: function(text){\n    const outer = document.createElement('div');\n    const inner = document.createElement('div');\n    const msg = document.createElement('span');\n\n    const titleContainer = document.createElement('div');\n    const notesContainer = document.createElement('div');\n\n    outer.className = this.config.theme + ' keen-dataviz-box';\n    inner.className = this.config.theme + '-message';\n\n    // Create title and notes for message\n    titleContainer.className = this.config.theme + '-title';\n    titleContainer.innerHTML = escapeHtml(this.config.title || '');\n    notesContainer.className = this.config.theme + '-notes';\n    notesContainer.innerHTML = escapeHtml(this.config.notes || '');\n\n    msg.innerHTML = escapeHtml(text) || '';\n    inner.appendChild(msg);\n\n    if (this.config.title && this.config.showTitle) {\n      outer.appendChild(titleContainer);\n    }\n\n    outer.appendChild(inner);\n\n    if (this.config.notes) {\n      outer.appendChild(notesContainer);\n    }\n\n    this.el().innerHTML = '';\n    this.el().appendChild(outer);\n\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","import { escapeHtml } from '../../../utils/escape-html';\n\nexport default function (d, defaultTitleFormat, defaultValueFormat, color) {\n  let text;\n  let title;\n  // Set config options or defaults\n  const nameFormat = this.config.tooltip_format_name || function (name) { return name; };\n  const titleFormat = this.config.tooltip_format_title || defaultTitleFormat;\n  const valueFormat = this.config.tooltip_format_value || defaultValueFormat;\n\n  // Reverse list to match legend\n  for (let i = 0; i < d.length; i++) {\n    if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }\n    if (!text) {\n      title = titleFormat ? titleFormat(d[i].x) : d[i].x;\n      text = \"<table class='\" + this.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + escapeHtml(title) + \"</th></tr>\" : \"\");\n    }\n    let name = nameFormat(d[i].name);\n    let value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);\n    let bgcolor = this.levelColor ? this.levelColor(d[i].value) : color(d[i].id);\n    if (value) {\n      text += \"<tr class='\" + this.CLASS.tooltipName + \"-\" + d[i].id + \"'>\";\n      text +=   \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + escapeHtml(name) + \"</td>\";\n      text +=   \"<td class='value'>\" + escapeHtml(value) + \"</td>\";\n      text += \"</tr>\";\n    }\n  }\n  return text + \"</table>\";\n}\n","import * as d3 from 'd3';\n\nimport isDateString from '../../../utils/assert-date-string';\n\nexport default function (options) {\n  const cols = options.data.columns;\n  const datavizInstance = this;\n  const chart = this.view._artifacts.c3;\n  const columns = [];\n  const domNode = this.el().querySelector('.' + datavizInstance.config.theme + '-rendering');\n  const legendConfig = datavizInstance.config.legend;\n\n  const pagination = this.view._artifacts.pagination = {\n    ...{\n      hidden: [],\n      labels: [],\n      offset: 0,\n      limit: Math.round((domNode.offsetHeight - 78) / 20),\n      total: 0\n    },\n    ...legendConfig.pagination\n  };\n\n  for (let i = 0; i < cols.length; i++) {\n    if (cols[i][0] !== 'x' && !isDateString(cols[i][1])) {\n      columns.push(cols[i][0]);\n    }\n  }\n\n  const legendElement = this.el().querySelector('.keen-c3-legend');\n\n  let align = 'vertical';\n  if (legendConfig.position === 'top' || legendConfig.position === 'bottom') {\n    align = 'horizontal';\n  }\n\n  const paginateHorizontalLeftElement = document.createElement('div');\n  paginateHorizontalLeftElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-left');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalLeftElement);\n  }\n\n  const legendItemsElement = document.createElement('div');\n  legendItemsElement.setAttribute('class', `keen-c3-legend-items keen-c3-legend-${align}-items`);\n  legendElement.append(legendItemsElement);\n\n  const paginateVerticalElement = document.createElement('div');\n  paginateVerticalElement.setAttribute('class', 'keen-c3-legend-pagination keen-c3-legend-pagination-icons');\n  if (align === 'vertical') {\n    legendElement.append(paginateVerticalElement);\n  }\n\n  const paginateHorizontalRightElement = document.createElement('div');\n  paginateHorizontalRightElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-right');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalRightElement);\n  }\n\n  paginateData();\n\n  function paginateData(){\n    pagination.labels = columns.slice(pagination.offset, pagination.offset + pagination.limit);\n    pagination.total = columns.length;\n    renderLegendComponent.call(datavizInstance, pagination.labels);\n    if (pagination.total > pagination.limit) {\n      renderPaginationComponent.call(datavizInstance);\n    }\n    chart.resize();\n  }\n\n  function renderLegendComponent(){\n    legendItemsElement.innerHTML = '';\n\n    pagination.labels.forEach(label => {\n      const labelShortened = legendConfig.label.textMaxLength ? label.slice(0, legendConfig.label.textMaxLength - 1) : label;\n      const legendItem = document.createElement(\"div\");\n      legendItem.innerHTML = `<span class='legend-item-text'>${labelShortened}</span>`;\n      legendItem.chartPartId = label;\n      legendItem.setAttribute('class', 'legend-item');\n      legendItemsElement.append(legendItem);\n\n      const legendItemColorSample = document.createElement(\"span\");\n      legendItemColorSample.setAttribute('class', 'legend-item-color-sample');\n      legendItemColorSample.style.backgroundColor = chart.color(legendItem.chartPartId);\n      legendItem.prepend(legendItemColorSample);\n\n      const tooltipElement = document.createElement(\"div\");\n      legendItem.addEventListener('mouseover', (event) => {\n        chart.focus(legendItem.chartPartId);\n        if (legendConfig.tooltip.show && legendItem.chartPartId.length > legendConfig.label.textMaxLength) {\n          tooltipElement.setAttribute('class', `keen-c3-legend-label-overlay keen-c3-legend-position-${legendConfig.position}`);\n          tooltipElement.innerHTML =\n            `${\n              options.legend.tooltip.pointer ? `<div class='overlay-pointer'></div>` : ``\n            }${legendItem.chartPartId}`;\n          legendItem.append(tooltipElement);\n        }\n      });\n      legendItem.addEventListener('mouseout', (event) => {\n        chart.revert();\n        tooltipElement.remove();\n      });\n      legendItem.addEventListener('click', (event) => {\n        let opacity = 1;\n        const isHidden = pagination.hidden.indexOf(legendItem.chartPartId);\n        if (isHidden < 0) {\n          pagination.hidden.push(legendItem.chartPartId);\n          opacity = .35;\n        }\n        else {\n          pagination.hidden.splice(isHidden, 1);\n          opacity = 1;\n        }\n        legendItem.style.opacity = opacity;\n        chart.toggle(legendItem.chartPartId);\n      });\n  });\n\n  }\n\n  function renderPaginationComponent(){\n    paginateVerticalElement.innerHTML = '';\n    paginateHorizontalLeftElement.innerHTML = '';\n    paginateHorizontalRightElement.innerHTML = '';\n\n    const arrowUp = document.createElement('i');\n    const arrowDown = document.createElement('i');\n\n    const paginate = (direction) => {\n      if (direction === 'forward') {\n        const diff = pagination.offset + pagination.limit;\n        if (diff < pagination.total) {\n          pagination.offset = diff;\n          return;\n        }\n        pagination.offset = 0;\n        return;\n      }\n\n      const diff = pagination.offset - pagination.limit;\n      if (diff >= 0) {\n        pagination.offset = diff;\n        return;\n      }\n\n      pagination.offset = Math.floor(pagination.total/pagination.limit) * pagination.limit;\n    };\n\n    arrowDown.addEventListener('click', () => {\n      paginate('forward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    arrowUp.addEventListener('click', () => {\n      paginate('backward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    if (legendConfig.position === 'left' || legendConfig.position === 'right') {\n      arrowUp.setAttribute('class', 'up');\n      arrowDown.setAttribute('class', 'down');\n      paginateVerticalElement.append(arrowDown);\n      paginateVerticalElement.append(arrowUp);\n    } else {\n      // bottom top\n      arrowUp.setAttribute('class', 'left');\n      arrowDown.setAttribute('class', 'right');\n      paginateHorizontalLeftElement.append(arrowUp);\n      paginateHorizontalRightElement.append(arrowDown);\n    }\n\n  }\n\n  function clearSelectedText() {\n    let selection;\n    if (document.selection && document.selection.empty) {\n      selection = document.selection;\n      selection.empty();\n    }\n    else if (window.getSelection) {\n      selection = window.getSelection();\n      selection.removeAllRanges();\n    }\n  }\n}\n","export default function (startDate, endDate) {\n  const timeDiff = Math.abs(new Date(startDate).getTime() - new Date(endDate).getTime());\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'June',\n    'July',\n    'Aug',\n    'Sept',\n    'Oct',\n    'Nov',\n    'Dec'\n  ];\n\n  // Yearly (31536000000) + Monthly\n  if (timeDiff >= 2419200000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getFullYear();\n    };\n  }\n  // Daily\n  else if (timeDiff >= 86400000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getDate();\n    };\n  }\n  // Hourly\n  else if (timeDiff >= 3600000) {\n    return '%I:%M %p';\n  }\n  // Minutely\n  else {\n    return '%I:%M:%S %p';\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__22__;","import d3 from 'd3';\nimport c3 from 'c3';\n\nimport { each } from '../utils/each';\nimport { extend } from '../utils/extend';\nimport { extendDeep } from '../utils/extend-deep';\nimport isDateString from '../utils/assert-date-string';\nimport c3DefaultDateFormat from './c3/extensions/default-date-format';\nimport c3PaginatingLegend from './c3/extensions/paginating-legend';\nimport c3TooltipContents from './c3/extensions/tooltip-contents';\n\nimport message from './default/message';\nimport metric from './default/metric';\nimport table from './default/table';\nimport spinner from './default/spinner';\n\nexport default function(lib) {\n  let timer;\n  bindResizeListener(function(){\n    if (timer) {\n      clearTimeout(timer);\n    }\n    const delay = (lib.visuals.length > 12) ? 1000 : 250;\n    timer = setTimeout(function(){\n      each(lib.visuals, function(chart){\n        if (chart.view._artifacts.c3) {\n          chart.view._artifacts.c3.resize();\n        }\n      });\n    }, delay);\n  });\n\n  return defineC3();\n};\n\nfunction defineC3(){\n  const types = {\n    message,\n    metric,\n    table,\n    spinner,\n  };\n\n  const c3Types = [\n    // Standard types\n    'area',\n    'area-spline',\n    'area-step',\n    'bar',\n    'donut',\n    'gauge',\n    'line',\n    'pie',\n    'step',\n    'spline',\n\n    // Horizontal variant types\n    'horizontal-area',\n    'horizontal-area-spline',\n    'horizontal-area-step',\n    'horizontal-bar',\n    'horizontal-line',\n    'horizontal-step',\n    'horizontal-spline'\n  ];\n\n  function getDefaultOptions(){\n    const ENFORCED_OPTIONS = {\n      bindto: this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'),\n      color: {\n        pattern: this.config.colors\n      },\n      data: {\n        colors: { ...this.config.colorMapping },\n        columns: [],\n        type: this.config.type.replace('horizontal-', '')\n      },\n    };\n\n    let height = this.el().offsetHeight;\n    if (this.config.showTitle) {\n      const titleElement = this.el().querySelector('.keen-dataviz-title');\n      if (titleElement) {\n        height -= titleElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    if (this.config.notes) {\n      const notesElement = this.el().querySelector('.keen-dataviz-notes');\n      if (notesElement) {\n        height -= notesElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    if (this.config.legend && this.config.legend.show &&\n      (\n        this.config.legend.position === 'top' ||\n        this.config.legend.position === 'bottom'\n      )\n    ) {\n      const legendElement = this.el().querySelector('.keen-c3-legend');\n      if (legendElement) {\n        height -= legendElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    const DEFAULT_OPTIONS = {\n      size: {\n        width: this.el().querySelector('.c3-chart').offsetWidth,\n        height:\n          height > 0 ?\n            height\n            : undefined,\n      }\n    };\n\n    return extendDeep({}, DEFAULT_OPTIONS, this.config, ENFORCED_OPTIONS);\n  }\n\n  each(c3Types, function(type, index) {\n    types[type] = {\n      render: function(){\n        const options = getDefaultOptions.call(this);\n\n        if (!!this.config.clearOnRender && options.data.columns.length > 0) {\n          options.data.columns.splice(1);\n        }\n\n        if (this.data()[0].length === 1 || this.data().length === 1) {\n          const msg = 'No data to display';\n          const mappedMsg = this.config.errorMapping[msg] || msg;\n          if (this.config.showErrorMessages) {\n            this.message(mappedMsg);\n          }\n          return;\n        }\n\n        let removeLegend = false;\n\n        if (type === 'gauge') {\n          // Accommodate a neat bug:\n          options.legend.show = false;\n          options.data.columns = [[\n            this.config.title || this.data()[1][0],\n            this.data()[1][1]\n          ]];\n          removeLegend = true;\n        }\n        else if (type === 'pie' || type === 'donut') {\n          options.data.columns = this.data().slice(1);\n        }\n        else {\n\n          // Apply formatting for horizontal variant types\n          if (type.indexOf('horizontal-') > -1) {\n            options.axis.rotated = type.indexOf('horizontal-') > -1;\n          }\n\n          if (isDateString(this.data()[1][0])) {\n            // TIMESERIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'timeseries';\n            options.axis.x.tick = options.axis.x.tick || {\n              format: this.config.dateFormat || c3DefaultDateFormat(this.data()[1][0], this.data()[2] ? this.data()[2][0] : this.data()[1][0]),\n              culling: { max: 5 }\n            };\n\n            options.data.columns[0] = [];\n            each(this.dataset.selectColumn(0), function(cell, i){\n              if (i > 0) {\n                cell = new Date(cell);\n              }\n              options.data.columns[0][i] = cell;\n            });\n            options.data.columns[0][0] = 'x';\n            options.data.x = 'x';\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n          else {\n            // CATEGORIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'category';\n            options.axis.x.categories = this.dataset.selectColumn(0).slice(1);\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n\n          if (this.data()[0].length === 2) {\n            options.legend.show = false;\n            removeLegend = true;\n          }\n\n          each(this.data()[0], function(cell, i){\n            if (i > 0) {\n              options.data.columns.push(this.dataset.selectColumn(i));\n            }\n          }.bind(this));\n        }\n\n        if (removeLegend){\n          const legendElement = this.el().querySelector('.keen-c3-legend');\n          if (legendElement) {\n            legendElement.remove();\n            options.size.width = this.el().querySelector('.c3-chart').offsetWidth;\n          }\n          options.legend.show = false;\n        }\n\n        const chartTypesWithPartialIntervalIndicator = ['area', 'area-spline', 'area-step', 'line', 'spline', 'step'];\n\n        if (options.partialIntervalIndicator\n          && options.partialIntervalIndicator.show\n          && chartTypesWithPartialIntervalIndicator.indexOf(options.type) > -1\n        ) {\n          const results = options.data.columns && options.data.columns[0];\n          if (results && results.length > 1) {\n            const partialResultsRegion = {\n              axis: 'x',\n              start: new Date(results[results.length-2]),\n              class: options.partialIntervalIndicator.className\n            };\n            options.regions = [...(options.regions || []), partialResultsRegion];\n          }\n        }\n\n        if (options.legend.show === true) {\n            const c3options = { ...options };\n                // Apply custom color handling\n            c3options.data.color = c3CustomDataMapping.bind(this);\n\n            // Apply custom tooltip\n            c3options.tooltip = {\n              contents: c3TooltipContents,\n              format: {\n                title: this.config.tooltip.format.title,\n                value: (value, ratio, id, index) => {\n                  let valueFormatted = c3CustomTooltipFiltering.call(this, value, ratio, id, index);\n                  if (this.config.tooltip && this.config.tooltip.format && this.config.tooltip.format.value)\n                  {\n                    valueFormatted = this.config.tooltip.format.value.call(this, valueFormatted, ratio, id, index);\n                  }\n                  return valueFormatted;\n                }\n              }\n            };\n\n            c3options.legend.show = false; // hide default c3 legend\n\n            // Render artifacts\n            this.view._artifacts['c3'] = c3.generate(c3options);\n            c3PaginatingLegend.call(this, options);\n        }\n        else {\n          this.view._artifacts['c3'] = c3.generate(options);\n        }\n\n      },\n      update: function(){\n        // no special update handling\n        this.render();\n      },\n      destroy: function(){\n        if (this.view._artifacts['c3']) {\n          this.view._artifacts['c3'].destroy();\n          this.view._artifacts['c3'] = null;\n        }\n      }\n    };\n  });\n\n  return types;\n}\n\nfunction c3CustomDataMapping(color, d) {\n  const type = this.config.type;\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if ((d.id && scope.indexOf(d.id) > -1)\n            || (d && !d.id && scope.indexOf(d) > -1)) {\n              return color;\n          }\n          else {\n            if (type === 'donut' || type === 'pie') {\n              return 'rgba(0,0,0,.1)';\n            }\n            else {\n              return 'rgba(0,0,0,.07)';\n            }\n          }\n  }\n  else {\n    return color;\n  }\n}\n\nfunction c3CustomTooltipFiltering(value, ratio, id, index) {\n  const type = this.config.type;\n\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if (scope.indexOf(id) > -1) {\n            return value;\n          }\n  }\n  else {\n    return value;\n  }\n}\n\nfunction bindResizeListener(fn){\n  if ('undefined' === typeof window) return;\n  window.onresize = window.resize = function(){};\n  if (window.addEventListener) {\n    window.addEventListener('resize', fn, true);\n  }\n  else if (window.attachEvent) {\n    window.attachEvent('onresize', fn);\n  }\n}\n","import Dataset from './dataset';\nimport { extend } from './utils/extend';\nimport { stripHtmlTags } from './utils/strip-html-tags';\n\nexport default function (data) {\n  if (!arguments.length) return this.dataset.data();\n  if (data instanceof Dataset) {\n    this.dataset = data;\n    return this;\n  }\n  else {\n    return parseResponse.call(this, data);\n  }\n};\n\nfunction parseResponse(response) {\n  var dataset,\n      indexBy,\n      meta,\n      parser,\n      parserArgs = [],\n      query,\n      selectedParser,\n      title,\n      type;\n\n  indexBy = this.config.indexBy;\n  meta = response.metadata || {};\n  query = (typeof response.query !== 'undefined') ? response.query : {};\n\n  // Ensure all required params are present\n  query = extend({\n    analysis_type: null,\n    event_collection: null,\n    filters: [],\n    group_by: null,\n    interval: null,\n    timeframe: null,\n    timezone: null\n  }, query);\n\n  if (query.analysis_type === 'funnel') {\n    parser = 'funnel';\n  }\n  else if (query.analysis_type === 'extraction'){\n    parser = 'extraction';\n  }\n  else if (query.analysis_type === 'select_unique') {\n    if (!query.group_by && !query.interval) {\n      parser = 'list';\n    }\n    // else { Not supported }\n  }\n  else if (query.analysis_type) {\n    if (!query.group_by && !query.interval) {\n      parser = 'metric';\n    }\n    else if (query.group_by && !query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-metric';\n        parserArgs.push(query.group_by);\n      }\n      else {\n        parser = 'grouped-metric';\n      }\n    }\n    else if (query.interval && !query.group_by) {\n      parser = 'interval';\n      parserArgs.push(indexBy);\n    }\n    else if (query.group_by && query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-interval';\n        parserArgs.push(query.group_by);\n        parserArgs.push(indexBy);\n      }\n      else {\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy);\n      }\n    }\n  }\n\n  if (!parser) {\n\n    // Metric\n    // -------------------------------\n    if (typeof response.result === 'number'){\n      parser = 'metric';\n    }\n\n    // Everything else\n    // -------------------------------\n    if (response.result instanceof Array && response.result.length > 0){\n\n      // Interval w/ single value\n      // -------------------------------\n      if (response.result[0].timeframe && (typeof response.result[0].value == 'number' || response.result[0].value == null)) {\n        parser = 'interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Static GroupBy\n      // -------------------------------\n      if (typeof response.result[0].result == 'number'){\n        parser = 'grouped-metric';\n      }\n\n      // Grouped Interval\n      // -------------------------------\n      if (response.result[0].value instanceof Array){\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Funnel\n      // -------------------------------\n      if (typeof response.result[0] === 'number'\n        && typeof response.steps !== 'undefined'){\n          parser = 'funnel';\n          // Move steps into query object\n          query.steps = response.steps;\n      }\n\n      // Select Unique\n      // -------------------------------\n      if ((typeof response.result[0] === 'string' || typeof response.result[0] == 'number') && typeof response.steps === 'undefined'){\n        parser = 'list';\n      }\n\n      // Extraction\n      // -------------------------------\n      if (!parser) {\n        parser = 'extraction';\n      }\n    }\n\n    if (!parser) {\n      parser = 'extraction';\n    }\n  }\n\n  // Set title from saved query body, or create a default title\n  if (this.config.title === undefined) {\n    if (meta.display_name) {\n      title = meta.display_name;\n    }\n    else {\n      title = getDefaultTitle(query);\n    }\n    this.config.title = title;\n  }\n\n  // Set type from saved query body, or use a default type\n  if (!this.config.type) {\n    if (meta.visualization && meta.visualization.chart_type) {\n      type = meta.visualization.chart_type;\n    }\n    else {\n      type = getDefaultType(parser);\n    }\n    this.config.type = type;\n  }\n\n  // Define the appropriate parser\n  selectedParser = Dataset.parser.apply(this, [parser].concat(parserArgs));\n\n  // Parse the response with augmented query body\n  dataset = selectedParser(extend(response, { 'query': query }));\n\n  // Set true dates for 'interval' data\n  if (parser.indexOf('interval') > -1) {\n    dataset.updateColumn(0, function(value, i){\n      return new Date(value);\n    });\n  }\n\n  dataset.updateRow(0, function(value, i){\n    return stripHtmlTags(value);\n  });\n\n  this.dataset = dataset;\n\n  return this;\n}\n\nfunction getDefaultTitle(query) {\n  var analysis = query.analysis_type ? query.analysis_type.replace('_', ' ') : '',\n      title;\n\n  title = analysis.replace( /\\b./g, function(a){\n    return a.toUpperCase();\n  });\n\n  if (query.event_collection) {\n    title += ' - ' + query.event_collection;\n  }\n  return title;\n}\n\nfunction getDefaultType(parser) {\n  let type;\n  switch (parser) {\n    case 'metric':\n      type = 'metric';\n      break;\n    case 'interval':\n      type = 'area';\n      break;\n    case 'grouped-metric':\n    case 'double-grouped-metric':\n      type = 'bar';\n      break;\n    case 'grouped-interval':\n    case 'double-grouped-interval':\n      type = 'line';\n      break;\n    case 'funnel':\n      type = 'horizontal-bar';\n      break;\n    case 'list':\n    case 'extraction':\n    default:\n      type = 'table';\n  }\n  return type;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","import Promise from './index';\nimport promiseFinally from './finally';\n\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!globalNS.Promise) {\n  globalNS.Promise = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","export function valueAtDeepKey(obj, is, value) {\n  if (typeof is == 'string')\n    return valueAtDeepKey(obj, is.split('.'), value);\n  else if (is.length==1 && value!==undefined && obj !== null &&\n    typeof obj[is[0]] !== 'undefined')\n    return obj[is[0]] = value;\n  else if (is.length==0)\n    return obj;\n  else if (typeof is === 'undefined' || typeof obj === 'undefined'\n    || is === null || obj === null\n    || typeof obj[is[0]] === 'undefined')\n    return null;\n  else\n    return valueAtDeepKey(obj[is[0]], is.slice(1), value);\n}\n","// Pure awesomeness by Will Rayner (penguinboy)\n// https://gist.github.com/penguinboy/762197\n\nexport function flatten(ob){\n  var toReturn = {};\n  for (var i in ob) {\n    if (!ob.hasOwnProperty(i)) continue;\n    if ((typeof ob[i]) == 'object' && ob[i] !== null) {\n      var flatObject = flatten(ob[i]);\n      for (var x in flatObject) {\n        if (!flatObject.hasOwnProperty(x)) continue;\n        toReturn[i + '.' + x] = flatObject[x];\n      }\n    } else {\n      toReturn[i] = ob[i];\n    }\n  }\n  return toReturn;\n};\n","let Dataset; /* injected */\n\nimport { each } from '../../utils/each';\nimport { flatten } from '../utils/flatten';\nimport { valueAtDeepKey } from '../utils/object';\n\nexport default function initialize(lib){\n  Dataset = lib;\n  return function(name){\n    var options = Array.prototype.slice.call(arguments, 1);\n\n    if (!parsers[name]) {\n      throw 'Requested parser does not exist';\n    }\n    else {\n      return parsers[name].apply(this, options);\n    }\n  };\n}\n\nfunction parseMetric(){\n  return function(res){\n    return new Dataset()\n      .set(['Value', 'Result'], res.result)\n      .type('metric');\n  }\n}\n\n//var myParser = Dataset.parser('interval', 'timeframe.end');\nfunction parseInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      dataset.set(['Result', index], record.value);\n    });\n    return dataset;\n  }\n}\n\nfunction parseGroupedMetric(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-metric');\n    each(res.result, function(record, i){\n      var label;\n      each(record, function(value, key){\n        if (key !== 'result') {\n          label = key;\n        }\n      });\n      dataset.set(['Result', String(record[label])], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('grouped-interval', 'timeframe.end');\nfunction parseGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      if (record.value.length) {\n        each(record.value, function(group, j){\n          var label;\n          each(group, function(value, key){\n            if (key !== 'result') {\n              label = key;\n            }\n          });\n          dataset.set([ String(group[label]), index ], group.result);\n        });\n      }\n      else {\n        dataset.appendRow(index);\n      }\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-metric', ['first', 'second']);\nfunction parseDoubleGroupedMetric(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-metric');\n    each(res.result, function(record, i){\n      var rowLabel = record[options[0][0]] + ' ' + record[options[0][1]];\n      dataset.set([ 'Result', rowLabel ], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-interval', ['first', 'second'], 'timeframe.end');\nfunction parseDoubleGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[1] && options[1] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      each(record['value'], function(value, j){\n        var label = value[options[0][0]] + ' ' + value[options[0][1]];\n        dataset.set([ label, index ], value.result);\n      });\n    });\n    return dataset;\n  }\n}\n\nfunction parseFunnel(){\n  return function(res){\n    var result, steps, dataset;\n    if (typeof res.steps !== 'undefined'\n        && typeof res.result !== 'undefined'\n          && res.result instanceof Array) {\n            // Ad-hoc funnel response\n            result = res.result;\n            steps = res.steps;\n    }\n    else if (typeof res.result.steps !== 'undefined'\n        && typeof res.result.result !== 'undefined'\n          && res.result.result instanceof Array) {\n            // Saved funnel response\n            result = res.result.result;\n            steps = res.result.steps;\n    }\n    dataset = new Dataset().type('funnel');\n    dataset.appendColumn('Step Value');\n    each(result, function(value, i){\n      if (typeof steps !== 'undefined' && steps[i]) {\n        dataset.appendRow(String(steps[i].event_collection), [value]);\n      }\n    });\n    return dataset;\n  }\n}\n\nfunction parseList(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('list');\n    each(res.result, function(value, i){\n      dataset.set( [ 'Result', String(i+1) ], value );\n    });\n    return dataset;\n  }\n}\n\nfunction parseExtraction(){\n  let config = this.config;\n  return function(res){\n    const datasetExtraction = new Dataset()\n      .type('extraction');\n    // create header\n    for (let i=0; i<1; i++){\n      let record = res.result[i];\n      each(flatten(record), function(value, key){\n        datasetExtraction.set([ key, String(i+1) ], value);\n      });\n    }\n\n    // get keys of the Object\n    let names = Object.keys(flatten(res.result[0]));\n\n    if (Dataset) {\n      if (config.table\n        && config.table.columns) {\n        names = config.table.columns;\n      }\n    }\n\n    for (let i=0; i<res.result.length; i++){\n      let record = [i+1];\n      for (let iNames=0; iNames<names.length; iNames++){\n        record.push(valueAtDeepKey(res.result[i], names[iNames]));\n      }\n      datasetExtraction.matrix[String(i+1)] = record;\n    }\n\n    datasetExtraction.deleteColumn(0);\n    return datasetExtraction;\n  }\n}\n\n// Parser definitions\nconst parsers = {\n  metric: parseMetric,\n  interval: parseInterval,\n  'grouped-metric': parseGroupedMetric,\n  'grouped-interval': parseGroupedInterval,\n  'double-grouped-metric': parseDoubleGroupedMetric,\n  'double-grouped-interval': parseDoubleGroupedInterval,\n  funnel: parseFunnel,\n  list: parseList,\n  extraction: parseExtraction,\n};\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function updateColumn(q, input) {\n  var self = this,\n      index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data(), function(row, i){\n        var cell;\n        if (i > 0) {\n          cell = input.call(self, row[index], i, row);\n          if (typeof cell !== 'undefined') {\n            self.matrix[i][index] = cell;\n          }\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.data().length - 1) {\n        input = input.concat( createNullList(self.data().length - 1 - input.length) );\n      }\n      else {\n        // If this new column is longer than existing columns,\n        // we need to update the rest to match ...\n        each(input, function(value, i){\n          if (self.matrix.length -1 < input.length) {\n            appendRow.call(self, String( self.matrix.length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[i+1][index] = value;\n      });\n\n    }\n\n  }\n  return self;\n}\n\nexport function updateRow(q, input){\n  var self = this,\n      index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data()[index], function(value, i){\n        var col = self.selectColumn(i),\n        cell = input.call(self, value, i, col);\n        if (typeof cell !== 'undefined') {\n          self.matrix[index][i] = cell;\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.matrix[0].length - 1) {\n        input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n      }\n      else {\n        each(input, function(value, i){\n          if (self.matrix[0].length -1 < input.length) {\n            appendColumn.call(self, String( self.matrix[0].length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[index][i+1] = value;\n      });\n    }\n\n  }\n  return self;\n}\n","import { each } from '../../utils/each';\nimport analysesUtilMethods from '../utils/analyses';\n\nexport function sortColumns(str, comp) {\n  var self = this,\n      head = this.matrix[0].slice(1), // minus index\n      cols = [],\n      clone = [],\n      fn = comp || analysesUtilMethods.getColumnLabel;\n\n  // Isolate each column (except the index)\n  each(head, function(cell, i) {\n    cols.push(self.selectColumn(i+1).slice(0));\n  });\n  cols.sort(function(a,b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  each(cols, function(col, i) {\n    self\n      .deleteColumn(i+1)\n      .insertColumn(i+1, col[0], col.slice(1));\n  });\n  return self;\n}\n\nexport function sortRows(str, comp) {\n  var self = this,\n      head = this.matrix.slice(0,1),\n      body = this.matrix.slice(1),\n      fn = comp || analysesUtilMethods.getRowIndex;\n  body.sort(function(a, b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  self.data(head.concat(body));\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function selectColumn(q) {\n  const result = [];\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1 && typeof this.matrix[0][index] !== 'undefined') {\n    each(this.matrix, function(row, i) {\n      result.push(row[index]);\n    });\n  }\n  return result;\n}\n\nexport function selectRow(q) {\n  let result = [];\n  const index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1 && typeof this.matrix[index] !== 'undefined') {\n    result = this.matrix[index];\n  }\n  return result;\n}\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function insertColumn(index, str, input) {\n  const self = this;\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n\n    self.matrix[0].splice(index, 0, label);\n    each(self.matrix, function(row, i) {\n      var cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].splice(index, 0, cell);\n      }\n    });\n\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat( createNullList(self.matrix.length - 1 - input.length) );\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String( self.matrix.length ));\n        }\n      });\n    }\n\n    self.matrix[0].splice(index, 0, label);\n    each(input, function(value, i){\n      self.matrix[i+1].splice(index, 0, value);\n    });\n\n  }\n  return self;\n}\n\nexport function insertRow(index, str, input) {\n  const self = this;\n  const newRow = [];\n  const label = (str !== undefined) ? str : null;\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i) {\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.splice(index, 0, newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length ));\n        }\n      });\n    }\n\n    self.matrix.splice(index, 0, newRow.concat(input) );\n  }\n\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function filterColumns(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i) {\n    clone.push([]);\n  });\n\n  each(self.matrix[0], function(col, i){\n    var selectedColumn = self.selectColumn(i);\n    if (i == 0 || fn.call(self, selectedColumn, i)) {\n      each(selectedColumn, function(cell, ri){\n        clone[ri].push(cell);\n      });\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n\nexport function filterRows(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i){\n    if (i == 0 || fn.call(self, row, i)) {\n      clone.push(row);\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function deleteColumn(q) {\n  const self = this;\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n    each(self.matrix, function(row, i){\n      self.matrix[i].splice(index, 1);\n    });\n  }\n  return self;\n}\n\nexport function deleteRow(q) {\n  var index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n    this.matrix.splice(index, 1);\n  }\n  return this;\n}\n","import 'promise-polyfill/src/polyfill';\n\nimport data from './data';\nimport { Dataset } from './dataset';\n// Utils\nimport { each } from './utils/each';\nimport isDateString from './utils/assert-date-string';\nimport { stripHtmlTags } from './utils/strip-html-tags';\nimport { escapeHtml } from './utils/escape-html';\nimport libraries from './libraries';\nimport { extendDeep } from './utils/extend-deep';\n\n// Constructor\nexport const Dataviz = function (options = {}) {\n  if (this instanceof Dataviz === false) {\n    return new Dataviz(options);\n  }\n\n  const datavizInstance = this;\n\n  const defaultOptions = {\n    showDeprecationWarnings: true,\n    showLoadingSpinner: false,\n\n    container: undefined, // querySelector of container, for example '#someDiv'\n    containerElement: undefined, // HTML parent element for the chart\n\n    // width: undefined, *deprecated* - use CSS\n    // height: undefined, *deprecated* - use CSS\n\n    title: undefined,\n    showTitle: true,\n\n    notes: undefined,\n    theme: 'keen-dataviz',\n\n    colors: [\n      '#00bbde', '#fe6672', '#eeb058', '#8a8ad6', '#ff855c', '#00cfbb',\n      '#5a9eed', '#73d483', '#c879bb', '#0099b6', '#d74d58', '#cb9141',\n      '#6b6bb6', '#d86945', '#00aa99', '#4281c9', '#57b566', '#ac5c9e',\n      '#27cceb', '#ff818b', '#f6bf71', '#9b9be1', '#ff9b79', '#26dfcd',\n      '#73aff4', '#87e096', '#d88bcb',\n    ],\n\n    colorMapping: {},\n\n    indexBy: 'timeframe.start',\n    labels: [],\n    labelMapping: {},\n    labelMappingRegExp: undefined,\n    errorMapping: {},\n    showErrorMessages: true,\n    library: 'default',\n    sortGroups: undefined,\n    sortIntervals: undefined,\n\n    results: undefined, // raw data\n\n    // C3 chartOptions\n    type: undefined,\n    stacked: false,\n    dateFormat: undefined,\n    legend: {\n      show: true,\n      position: 'right',\n      label: {\n        textMaxLength: 12\n      },\n      pagination: {\n        offset: 0, // start from\n        limit: 5 // items per page\n      },\n      tooltip: {\n        show: true,\n        pointer: true\n      }\n    },\n\n    axis: {},\n    color: {},\n    data: {\n      order: null\n    },\n    size: {\n      // control it with CSS of .c3-chart\n    },\n    padding: {},\n    point: {\n      focus: {\n        expand: {\n          enabled: false\n        }\n      },\n      r: 2,\n      show: true\n    },\n    tooltip: {\n      format: {\n        // https://c3js.org/samples/tooltip_format.html\n      }\n    },\n    transition: {\n      // duration: 0\n    },\n    data: {\n      selection: {\n       enabled: true,\n       draggable: true,\n       multiple: true\n     }\n   },\n   partialIntervalIndicator: {\n     show: undefined,\n     className: 'partial-interval-indicator'\n   }\n  };\n\n  this.config = { ...extendDeep(defaultOptions, options) };\n\n  if (this.config.type) {\n    // backward compatibility with v2016... areachart -> area\n    this.config.type = convertChartTypes(this.config.type);\n  }\n\n  // get DOM node by query\n  if (this.config.container) {\n    this.el(this.config.container);\n  }\n\n  if (options.legend !== undefined && !options.legend) {\n    this.config.legend = {\n      ...options,\n      show: false\n    };\n  }\n\n  this.dataset = new Dataset(this.config);\n  this.view = {\n    _prepared: false,\n    _rendered: false,\n    _artifacts: { /* state bin */ }\n  };\n\n  Dataviz.visuals.push(this);\n\n  if (this.config.showLoadingSpinner) {\n    this.prepare();\n  }\n\n  if (!!this.config.results) {\n    this.render(this.config.results);\n  }\n};\n\nDataviz.libraries = { default: {} };\nif (typeof window !== 'undefined') {\n  Dataviz.libraries.default = libraries(Dataviz);\n}\nDataviz.visuals = [];\n\nDataviz.register = function (name, actions) {\n  Dataviz.libraries[name] = Dataviz.libraries[name] || {};\n  each(actions, function(method, key){\n    Dataviz.libraries[name][key] = method;\n  });\n};\n\nDataviz.find = function(target){\n  if (!arguments.length) return Dataviz.visuals;\n  const el = target.nodeName ? target : document.querySelector(target);\n  let match = null;\n  each(Dataviz.visuals, function(visual){\n    if (el == visual.config.container){\n      match = visual;\n      return false;\n    }\n  });\n  return match;\n};\n\n\n  // Prototype\n  // ------------\n\nDataviz.prototype.attributes = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.attributes() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  const view = this.config;\n  each(obj, function(prop, key){\n    // Handle deprecated property names\n    if (key === 'chartType') {\n      key = 'type';\n    }\n    view[key] = prop;\n  });\n  return this;\n};\n\nDataviz.prototype.call = function(fn){\n    fn.call(this);\n    return this;\n};\n\nDataviz.prototype.chartOptions = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.chartOptions() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  this.config = extendDeep(this.config, obj);\n  return this;\n};\n\nDataviz.prototype.colors = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colors() is deprecated. Use: new KeenDataviz({ colors: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.colors;\n  this.config.colors = (arr instanceof Array ? arr : []);\n  return this;\n};\n\nDataviz.prototype.colorMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colorMapping() is deprecated. Use: new KeenDataviz({ colorMapping: _your_value_here_ })');\n  }\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.colorMapping;\n  if (obj === null) {\n    this.config.colorMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      datavizInstance.config.colorMapping[key] = (value ? value : null);\n    });\n  }\n  return this;\n};\n\nDataviz.prototype.data = data;\n\nDataviz.prototype.dateFormat = function(val){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.dateFormat() is deprecated. Use: new KeenDataviz({ dateFormat: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.dateFormat;\n  if (typeof val === 'string' || typeof val === 'function') {\n    this.config.dateFormat = val;\n  }\n  else {\n    this.config.dateFormat = undefined;\n  }\n  return this;\n};\n\nDataviz.prototype.destroy = function(){\n  const library = this.library();\n  const type = this.config.type;\n  const element = this.el();\n\n    // Call destroy method if present\n  if (Dataviz.libraries[library]\n      && Dataviz.libraries[library][type]){\n        Dataviz.libraries[library][type].destroy.call(this);\n  }\n\n    // Clear rendered artifacts, state bin\n  if (element) {\n    element.innerHTML = '';\n  }\n  this.view._prepared = false;\n  this.view._rendered = false;\n  this.view._artifacts = {};\n  return this;\n};\n\nDataviz.prototype.el = function(target){\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.containerElement;\n  domReady(function(){\n    if (target && target !== null) {\n      if (target.nodeName) {\n        datavizInstance.config.containerElement = target;\n      }\n      else if (document.querySelector) {\n        datavizInstance.config.containerElement = document.querySelector(target);\n      }\n    }\n    else {\n      datavizInstance.config.containerElement = undefined;\n    }\n  });\n  return this;\n};\n\nDataviz.prototype.height = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.height() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\n// IMPORTANT: Must be run before data parsing\nDataviz.prototype.indexBy = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.indexBy() is deprecated. Use: new KeenDataviz({ indexBy: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.indexBy;\n  this.config.indexBy = (str ? String(str) : 'timeframe.start');\n  return this;\n};\n\nDataviz.prototype.labels = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labels() is deprecated. Use: new KeenDataviz({ labels: _your_value_here_ })');\n  }\n\n  if (!arguments.length) return this.config.labels;\n  this.config.labels = (arr instanceof Array ? arr : []);\n\n  setLabels(this);\n\n  return this;\n};\n\nfunction setLabels(datavizInstance){\n  // Write labels\n  if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n    datavizInstance.dataset.updateColumn(0, function(value, index){\n      if (datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n  else {\n    datavizInstance.dataset.updateRow(0, function(value, index){\n      if (index > 0 && datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.labelMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labelMapping() is deprecated. Use: new KeenDataviz({ labelMapping: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.labelMapping;\n  if (obj === null) {\n    this.config.labelMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      this.config.labelMapping[key] = (value ? value : null);\n    }.bind(this));\n  }\n\n  mapLabels(this);\n\n  return this;\n};\n\nfunction mapLabelsExec({ datavizInstance, value }){\n  if (datavizInstance.config.labelMappingRegExp){\n    let valueAfterMatching = value;\n    datavizInstance.config.labelMappingRegExp.forEach(regExpAndLabel => {\n      if (regExpAndLabel.length > 1) {\n        let regExpObj = regExpAndLabel[0];\n        if (regExpObj.test(value)){\n          valueAfterMatching = regExpAndLabel[1];\n        }\n      }\n    });\n    return stripHtmlTags(valueAfterMatching);\n  }\n  if (datavizInstance.config.labelMapping[value]) {\n    return stripHtmlTags(String(datavizInstance.config.labelMapping[value]));\n  }\n  return stripHtmlTags(value);\n}\n\nfunction mapLabels(datavizInstance){\n  // Write labels\n  if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n    datavizInstance.dataset.updateColumn(0, function(value){\n      return mapLabelsExec({ datavizInstance, value });\n    }.bind(datavizInstance));\n  }\n  else {\n    datavizInstance.dataset.updateRow(0, function(value){\n      return mapLabelsExec({ datavizInstance, value });\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.library = function(str){\n    if (!arguments.length) return this.config['library'];\n    this.config['library'] = (str ? String(str) : null);\n    return this;\n};\n\nDataviz.prototype.message = function(){\n    if (this.view._rendered) {\n      this.destroy();\n    }\n    if (this.el()) {\n      this.el().innerHTML = '';\n      const message = Dataviz.libraries.default.message;\n      if (message.render) {\n        message.render.apply(this, arguments);\n      }\n    }\n    return this;\n};\n\nDataviz.prototype.notes = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.notes() is deprecated. Use: new KeenDataviz({ notes: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.notes;\n  this.config.notes = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.prepare = function(){\n    const datavizInstance = this;\n\n    if (!this.el()) {\n      throw `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n      return;\n    }\n\n    domReady(function(){\n      if (datavizInstance.view._rendered) {\n        datavizInstance.destroy();\n      }\n      if (datavizInstance.el()) {\n        datavizInstance.el().innerHTML = '';\n        const loader = Dataviz.libraries.default.spinner;\n        if (loader.render) {\n          loader.render.call(datavizInstance);\n        }\n        datavizInstance.view._prepared = true;\n      }\n    });\n\n    return this;\n};\n\nDataviz.prototype.render = function(results = undefined){\n  const datavizInstance = this;\n  if (!!results) {\n    const firstResult = results[0] || results;\n    if (\n      firstResult.query\n      && firstResult.query.interval\n      && firstResult.query.timeframe\n      && firstResult.query.timeframe === 'string'\n      && firstResult.query.timeframe.indexOf('this_') > -1\n      && this.config.partialIntervalIndicator\n      && this.config.partialIntervalIndicator.show === undefined\n    )\n    {\n      this.config.partialIntervalIndicator.show = true;\n    }\n\n    if (Array.isArray(results)) {\n      const timeframes = results.map(resultItem => resultItem.query.timeframe);\n      timeframes.forEach(resultTimeframe => {\n        let foundDifferent = timeframes.find(timeframeItem =>\n          JSON.stringify(timeframeItem) !== JSON.stringify(resultTimeframe)\n        );\n        if (foundDifferent){\n          const msg = 'Timeframes of the queries should be the same';\n          console.error(msg);\n          throw msg;\n        }\n      });\n      // first result is important to prepare X on the chart\n      return datavizInstance\n        .data(results[0])\n        .call(() => {\n          const getLabel = (input) => {\n            return `${input.query.event_collection} ${input.query.analysis_type}`;\n          }\n          let label = getLabel(results[0]);\n          if (datavizInstance.config.labelMapping[label]) {\n            label = datavizInstance.config.labelMapping[label];\n          }\n          this.dataset.deleteColumn(1);\n          let firstResultPassed = false;\n          for (let result of results) {\n            label = getLabel(result);;\n            let ds2 = Dataset.parser('interval')(result);\n            datavizInstance.dataset.appendColumn(label, ds2.selectColumn(1).slice(1));\n          }\n        })\n        .render();\n    }\n\n    return datavizInstance.data(results).render();\n  }\n  if (\n    (!!this.config.labelMapping && Object.keys(this.config.labelMapping).length > 0)\n    ||\n    (!!this.config.labelMappingRegExp && this.config.labelMappingRegExp.length > 0)\n  ){\n    mapLabels(datavizInstance);\n  }\n  if (!!this.config.labels && Object.keys(this.config.labels).length > 0){\n    setLabels(datavizInstance);\n  }\n  if (!!this.config.sortGroups) {\n    sortGroups(datavizInstance);\n  }\n  if (!!this.config.sortIntervals) {\n    sortIntervals(datavizInstance);\n  }\n\n  const loader = Dataviz.libraries.default.spinner;\n  const library = this.config.library;\n  const type = this.config.type;\n  const containerElement = this.el();\n\n  if (!containerElement || containerElement === undefined) {\n    const msg = `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n    console.error(msg);\n    throw msg;\n    return;\n  }\n\n  let returnValue = datavizInstance;\n\n  if (datavizInstance.config.renderAsPromise) {\n    returnValue = new Promise((resolve, reject) => {\n      const customCallback = this.config.onrendered;\n      datavizInstance.config.onrendered = () => {\n        if (customCallback) {\n          customCallback();\n        }\n        resolve(datavizInstance);\n      }\n    });\n  }\n\n  domReady(function(){\n    if (datavizInstance.view._prepared && loader.destroy) {\n      loader.destroy.apply(datavizInstance, arguments);\n    }\n    containerElement.innerHTML = '';\n\n    if (Dataviz.libraries[library] === 'undefined'){\n      // Error: Unregistered library\n      const msg = `Incorrect library`;\n      datavizInstance.message(msg);\n      throw msg;\n      return;\n    }\n    else {\n      if (typeof Dataviz.libraries[library][type] === 'undefined') {\n        const msg = `Incorrect chart type`;\n        const mappedMsg = this.config.errorMapping[msg] || msg;\n        datavizInstance.message(mappedMsg);\n        throw msg;\n        return;\n      }\n      else {\n        buildDomWrapper(containerElement,\n          datavizInstance.config\n        );\n        Dataviz.libraries[library][type].render.call(datavizInstance);\n        datavizInstance.view._rendered = true;\n      }\n    }\n  });\n\n  return returnValue;\n};\n\nDataviz.prototype.sortGroups = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortGroups() is deprecated. Use: new KeenDataviz({ sortGroups: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortGroups;\n  this.config.sortGroups = (str ? String(str) : null);\n\n  sortGroups(this, str);\n\n  return this;\n};\n\nfunction sortGroups(datavizInstance){\n  // Sort groups\n  if (datavizInstance.config.sortGroups && datavizInstance.data().length > 1) {\n    if (isDateString(datavizInstance.data()[1][0])) {\n      datavizInstance.dataset.sortColumns(datavizInstance.config.sortGroups, datavizInstance.dataset.getColumnSum);\n    }\n    else {\n      datavizInstance.dataset.sortRows(datavizInstance.config.sortGroups, datavizInstance.dataset.getRowSum);\n    }\n  }\n}\n\nDataviz.prototype.sortIntervals = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortIntervals() is deprecated. Use: new KeenDataviz({ sortIntervals: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortIntervals;\n  this.config.sortIntervals = (str ? String(str) : null);\n\n  sortIntervals(this);\n\n  return this;\n};\n\nfunction sortIntervals(datavizInstance){\n  if (datavizInstance.config.sortIntervals) {\n    datavizInstance.dataset.sortRows(datavizInstance.config.sortIntervals);\n  }\n}\n\nDataviz.prototype.stacked = function(bool){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.stacked() is deprecated. Use: new KeenDataviz({ stacked: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.stacked;\n  this.config.stacked = bool ? true : false;\n  return this;\n};\n\nDataviz.prototype.theme = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.theme() is deprecated. Use: new KeenDataviz({ theme: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.theme;\n  this.config.theme = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.title = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.title() is deprecated. Use: new KeenDataviz({ title: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.title;\n  this.config.title = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.type = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.type() is deprecated. Use: new KeenDataviz({ type: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.type;\n  this.config.type = (str ? convertChartTypes(str) : null);\n  return this;\n};\n\nDataviz.prototype.update = function(){\n  const library = this.config.library;\n  const type = this.config.type;\n  const element = this.el();\n  if (library && type && element && Dataviz.libraries[library][type].update) {\n    Dataviz.libraries[library][type].update.apply(this, arguments);\n  }\n  return this;\n};\n\nDataviz.prototype.width = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.width() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\n  // Deprecations\n  Dataviz.prototype.chartType = Dataviz.prototype.type;\n  Dataviz.prototype.error = Dataviz.prototype.message;\n  Dataviz.prototype.parseRawData = Dataviz.prototype.data;\n  Dataviz.prototype.parseRequest = function(){\n    // this.emit('error', 'This method is no longer supported. Use .data() instead: https://github.com/keen/keen-dataviz.js#data');\n    return this;\n  };\n  Dataviz.prototype.initialize = function(){\n    // this.emit('error', 'This method is no longer supported, and can be omitted as it has no impact');\n    return this;\n  };\n\n  // Private\n  // ------------\n\nfunction buildDomWrapper(el, options) {\n  let html = '';\n  let chart100percentWide = '';\n  if (options.legend.position === 'top' || options.legend.position === 'bottom') {\n    chart100percentWide = 'c3-chart-100-percent';\n  }\n\n  let container = `<div class=\"c3-chart ${chart100percentWide}\"></div>`;\n  let align = 'horizontal';\n  if (options.legend.position === 'left' || options.legend.position === 'right') {\n    align = 'vertical';\n  }\n  if (options.legend && options.legend.show) {\n    if (options.legend.position === 'top' || options.legend.position === 'left') {\n      container = `<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>${container}`;\n    } else {\n      container = `${container}<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>`;\n    }\n  }\n  html += `<div class=\"${options.theme}\">`;\n  if (options.title && options.showTitle) {\n    html += `<div class=\"keen-dataviz-title ${options.theme}-title\">${options.title}</div>`;\n  }\n  html += `<div class=\"${options.theme}-rendering ${options.theme}-rendering-${align}\">${container}</div>`;\n  if (options.notes) {\n    html += `<div class=\"keen-dataviz-notes ${options.theme}-notes\">${options.notes}</div>`;\n  }\n  html += `</div>`;\n  el.innerHTML = html;\n}\n\nfunction convertChartTypes(str) {\n  const map = {\n    areachart: 'area',\n    barchart: 'horizontal-bar',\n    columnchart: 'bar',\n    linechart: 'line',\n    piechart: 'pie',\n  };\n  return map[str] || str;\n}\n\nfunction testDom(fn) {\n  if (/in/.test(document.readyState)) {\n    setTimeout(function(){\n      testDom(fn);\n    }, 9);\n  } else {\n    fn();\n  }\n}\n\nfunction domReady(fn) {\n  if (typeof document !== 'undefined' || typeof window === 'undefined') {\n    fn();\n    return;\n  }\n  // Firefox 3.5 shim\n  if (document.readyState == null && document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', function DOMContentLoaded() {\n      document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n      document.readyState = 'complete';\n    }, false);\n    document.readyState = 'loading';\n  }\n  testDom(fn);\n}\n\nexport { Dataset } from './dataset';\n\nexport default Dataviz;\n","import { Dataviz, Dataset } from './index';\n\nconst env = typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {};\n\nexport const extendKeenGlobalObject = function(env) {\n  env.KeenDataviz = Dataviz;\n  env.KeenDataset = Dataset;\n\n  // just for backward compatibility\n  env.Keen = env.Keen || {};\n  env.Keen.Dataset = Dataset;\n  env.Keen.Dataviz = Dataviz;\n};\n\nif (typeof KEEN_GLOBAL_OBJECT !== 'undefined'\n  && KEEN_GLOBAL_OBJECT) {\n  extendKeenGlobalObject(env);\n}\n\nexport let keenGlobals = undefined;\nif (typeof webpackKeenGlobals !== 'undefined') {\n  keenGlobals = webpackKeenGlobals;\n}\n\nexport { Dataviz, Dataset } from './index';\nexport default Dataviz;\n"],"sourceRoot":""}