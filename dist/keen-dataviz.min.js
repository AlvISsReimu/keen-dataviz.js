(function e(b,g,d){function c(n,k){if(!g[n]){if(!b[n]){var j=typeof require=="function"&&require;if(!k&&j){return j(n,!0)}if(a){return a(n,!0)}var m=new Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m}var h=g[n]={exports:{}};b[n][0].call(h.exports,function(l){var o=b[n][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[n].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(d){(function(m){var h=b("./modifiers/append"),r=b("./modifiers/delete"),g=b("./modifiers/filter"),q=b("./modifiers/insert"),n=b("./modifiers/select"),k=b("./modifiers/sort"),j=b("./modifiers/update");var p=b("./utils/analyses"),l=b("../utils/extend"),o=b("./utils/parsers");function f(){if(this instanceof f===false){return new f()}this.matrix=[["Index"]]}f.prototype.data=function(s){if(!arguments.length){return this.matrix}this.matrix=(s instanceof Array?s:null);return this};f.prototype.set=function(w,v){if(arguments.length<2||w.length<2){throw Error("Incorrect arguments provided for #set method")}var s="number"===typeof w[0]?w[0]:this.matrix[0].indexOf(w[0]),x="number"===typeof w[1]?w[1]:n.selectColumn.call(this,0).indexOf(w[1]);var u=n.selectColumn.call(this,w[0]),t=n.selectRow.call(this,w[1]);if(u.length<1){h.appendColumn.call(this,w[0]);s=this.matrix[0].length-1}if(t.length<1){h.appendRow.call(this,w[1]);x=this.matrix.length-1}this.matrix[x][s]=v;return this};l(f.prototype,h);l(f.prototype,r);l(f.prototype,g);l(f.prototype,q);l(f.prototype,n);l(f.prototype,k);l(f.prototype,j);l(f.prototype,p);f.parser=o(f);if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataset",[],function(){return f})}m.Dataset=f;if(typeof d!=="undefined"){d.Dataset=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../utils/extend":20,"./modifiers/append":2,"./modifiers/delete":3,"./modifiers/filter":4,"./modifiers/insert":5,"./modifiers/select":6,"./modifiers/sort":7,"./modifiers/update":8,"./utils/analyses":9,"./utils/parsers":12}],2:[function(d,f,c){var b=d("../utils/create-null-list"),h=d("../../utils/each");f.exports={appendColumn:g,appendRow:a};function g(n,k){var j=this,m=Array.prototype.slice.call(arguments,2),l=(n!==undefined)?n:null;if(typeof k==="function"){j.matrix[0].push(l);h(j.matrix,function(q,p){var o;if(p>0){o=k.call(j,q,p);if(typeof o==="undefined"){o=null}j.matrix[p].push(o)}})}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix.length-1){k=k.concat(b(j.matrix.length-1-k.length))}else{h(k,function(p,o){if(j.matrix.length-1<k.length){a.call(j,String(j.matrix.length))}})}j.matrix[0].push(l);h(k,function(p,o){j.matrix[o+1][j.matrix[0].length-1]=p})}}return j}function a(o,k){var j=this,n=Array.prototype.slice.call(arguments,2),m=(o!==undefined)?o:null,l=[];l.push(m);if(typeof k==="function"){h(j.matrix[0],function(r,s){var q,p;if(s>0){q=j.selectColumn(s);p=k.call(j,q,s);if(typeof p==="undefined"){p=null}l.push(p)}});j.matrix.push(l)}else{if(!k||k instanceof Array){k=k||[];if(k.length<=j.matrix[0].length-1){k=k.concat(b(j.matrix[0].length-1-k.length))}else{h(k,function(q,p){if(j.matrix[0].length-1<k.length){g.call(j,String(j.matrix[0].length))}})}j.matrix.push(l.concat(k))}}return j}},{"../../utils/each":19,"../utils/create-null-list":10}],3:[function(d,f,c){var g=d("../../utils/each");f.exports={deleteColumn:a,deleteRow:b};function a(k){var h=this,j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1){g(h.matrix,function(m,l){h.matrix[l].splice(j,1)})}return h}function b(j){var h=(typeof j==="number")?j:this.selectColumn(0).indexOf(j);if(h>-1){this.matrix.splice(h,1)}return this}},{"../../utils/each":19}],4:[function(c,d,b){var f=c("../../utils/each");d.exports={filterColumns:a,filterRows:g};function a(j){var h=this,k=new Array();f(h.matrix,function(m,l){k.push([])});f(h.matrix[0],function(l,m){var n=h.selectColumn(m);if(m==0||j.call(h,n,m)){f(n,function(o,p){k[p].push(o)})}});h.data(k);return h}function g(j){var h=this,k=[];f(h.matrix,function(m,l){if(l==0||j.call(h,m,l)){k.push(m)}});h.data(k);return h}},{"../../utils/each":19}],5:[function(f,b,g){var j=f("../../utils/each");var h=f("../utils/create-null-list");var c=f("./append");var l=c.appendRow,d=c.appendColumn;b.exports={insertColumn:a,insertRow:k};function a(p,q,n){var m=this,o;o=(q!==undefined)?q:null;if(typeof n==="function"){m.matrix[0].splice(p,0,o);j(m.matrix,function(t,s){var r;if(s>0){r=n.call(m,t,s);if(typeof r==="undefined"){r=null}m.matrix[s].splice(p,0,r)}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix.length-1){n=n.concat(h(m.matrix.length-1-n.length))}else{j(n,function(s,r){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}m.matrix[0].splice(p,0,o);j(n,function(s,r){m.matrix[r+1].splice(p,0,s)})}}return m}function k(q,r,n){var m=this,p,o=[];p=(r!==undefined)?r:null;o.push(p);if(typeof n==="function"){j(m.matrix[0],function(u,v){var t,s;if(v>0){t=m.selectColumn(v);s=n.call(m,t,v);if(typeof s==="undefined"){s=null}o.push(s)}});m.matrix.splice(q,0,o)}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{j(n,function(t,s){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}m.matrix.splice(q,0,o.concat(n))}}return m}},{"../../utils/each":19,"../utils/create-null-list":10,"./append":2}],6:[function(d,f,c){var g=d("../../utils/each");f.exports={selectColumn:b,selectRow:a};function b(k){var h=new Array(),j=(typeof k==="number")?k:this.matrix[0].indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[0][j]){g(this.matrix,function(m,l){h.push(m[j])})}return h}function a(k){var h=new Array(),j=(typeof k==="number")?k:this.selectColumn(0).indexOf(k);if(j>-1&&"undefined"!==typeof this.matrix[j]){h=this.matrix[j]}return h}},{"../../utils/each":19}],7:[function(d,f,c){var g=d("../../utils/each");f.exports={sortColumns:b,sortRows:a};function b(n,j){var h=this,k=this.matrix[0].slice(1),m=[],o=[],l=j||this.getColumnLabel;g(k,function(p,q){m.push(h.selectColumn(q+1).slice(0))});m.sort(function(q,p){var r=l.call(h,q)>l.call(h,p);if(r){return(n==="asc"?1:-1)}else{if(!r){return(n==="asc"?-1:1)}else{return 0}}});g(m,function(p,q){h.deleteColumn(q+1).insertColumn(q+1,p[0],p.slice(1))});return h}function a(n,k){var j=this,l=this.matrix.slice(0,1),h=this.matrix.slice(1),m=k||this.getRowIndex;h.sort(function(p,o){var q=m.call(j,p)>m.call(j,o);if(q){return(n==="asc"?1:-1)}else{if(!q){return(n==="asc"?-1:1)}else{return 0}}});j.data(l.concat(h));return j}},{"../../utils/each":19}],8:[function(f,a,g){var k=f("../../utils/each");var h=f("../utils/create-null-list");var b=f("./append");var l=b.appendRow,d=b.appendColumn;a.exports={updateColumn:j,updateRow:c};function j(p,n){var m=this,o=(typeof p==="number")?p:this.matrix[0].indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data(),function(s,r){var q;if(r>0){q=n.call(m,s[o],r,s);if(typeof q!=="undefined"){m.matrix[r][o]=q}}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.data().length-1){n=n.concat(h(m.data().length-1-n.length))}else{k(n,function(r,q){if(m.matrix.length-1<n.length){l.call(m,String(m.matrix.length))}})}k(n,function(r,q){m.matrix[q+1][o]=r})}}}return m}function c(p,n){var m=this,o=(typeof p==="number")?p:this.selectColumn(0).indexOf(p);if(o>-1){if(typeof n==="function"){k(m.data()[o],function(t,s){var r=m.selectColumn(s),q=n.call(m,t,s,r);if(typeof q!=="undefined"){m.matrix[o][s]=q}})}else{if(!n||n instanceof Array){n=n||[];if(n.length<=m.matrix[0].length-1){n=n.concat(h(m.matrix[0].length-1-n.length))}else{k(n,function(r,q){if(m.matrix[0].length-1<n.length){d.call(m,String(m.matrix[0].length))}})}k(n,function(r,q){m.matrix[o][q+1]=r})}}}return m}},{"../../utils/each":19,"../utils/create-null-list":10,"./append":2}],9:[function(d,c,h){var m=d("../../utils/each"),l=d("../../utils/extend");var a={};var f={average:b,maximum:g,minimum:k,sum:j};function b(n,s,o){var r=n.slice(s||0,(o?o+1:n.length)),p=0,q=null;m(r,function(u,t){if(typeof u==="number"&&!isNaN(parseFloat(u))){p+=parseFloat(u)}});return p/r.length}function g(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.max.apply(Math,p)}function k(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=[];m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p.push(parseFloat(t))}});return Math.min.apply(Math,p)}function j(n,r,o){var q=n.slice(r||0,(o?o+1:n.length)),p=0;m(q,function(t,s){if(typeof t==="number"&&!isNaN(parseFloat(t))){p+=parseFloat(t)}});return p}m(f,function(p,n){var o=n.charAt(0).toUpperCase()+n.slice(1);a["getColumn"+o]=a["getRow"+o]=function(q){return this[n](q,1)}});a.getColumnLabel=a.getRowIndex=function(n){return n[0]};l(f,a);c.exports=f},{"../../utils/each":19,"../../utils/extend":20}],10:[function(b,c,a){c.exports=function(d){var f=new Array();for(i=0;i<d;i++){f.push(null)}return f}},{}],11:[function(b,c,a){c.exports=d;function d(g){var k={};for(var h in g){if(!g.hasOwnProperty(h)){continue}if((typeof g[h])=="object"&&g[h]!==null){var j=d(g[h]);for(var f in j){if(!j.hasOwnProperty(f)){continue}k[h+"."+f]=j[f]}}else{k[h]=g[h]}}return k}},{}],12:[function(f,c,k){var b;var q=f("../../utils/each"),a=f("../utils/flatten");var r={metric:n,interval:j,"grouped-metric":p,"grouped-interval":s,"double-grouped-metric":h,"double-grouped-interval":g,funnel:o,list:l,extraction:d};c.exports=m;function m(t){b=t;return function(v){var u=Array.prototype.slice.call(arguments,1);if(!r[v]){throw"Requested parser does not exist"}else{return r[v].apply(this,u)}}}function n(){return function(t){var u=new b();return u.set(["Value","Result"],t.result)}}function j(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b();q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;v.set(["Result",x],w.value)});return v}}function p(){return function(t){var u=new b();q(t.result,function(v,x){var w;q(v,function(z,y){if(y!=="result"){w=y}});u.set(["Result",String(v[w])],v.result)});return u}}function s(){var t=Array.prototype.slice.call(arguments);return function(u){var v=new b();q(u.result,function(w,y){var x=t[0]&&t[0]==="timeframe.end"?w.timeframe.end:w.timeframe.start;if(w.value.length){q(w.value,function(B,A){var z;q(B,function(D,C){if(C!=="result"){z=C}});v.set([B[z]||"",x],B.result)})}else{v.appendRow(x)}});return v}}function h(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b();q(u.result,function(w,x){v.set(["Result",w[t[0][0]]+" "+w[t[0][1]]],w.result)});return v}}function g(){var t=Array.prototype.slice.call(arguments);if(!t[0]){throw"Requested parser requires a sequential list (array) of properties to target as a second argument"}return function(u){var v=new b();q(u.result,function(w,y){var x=t[1]&&t[1]==="timeframe.end"?w.timeframe.end:w.timeframe.start;q(w.value,function(B,A){var z=String(B[t[0][0]])+" "+String(B[t[0][1]]);v.set([z,x],B.result)})});return v}}function o(){return function(t){var u=new b();q(t.result,function(w,v){u.set(["Step Value",t.steps[v].event_collection],w)});return u}}function l(){return function(t){var u=new b();q(t.result,function(w,v){u.set(["Value",v+1],w)});return u}}function d(){return function(t){var u=new b();q(t.result,function(v,w){q(a(v),function(y,x){u.set([x,w+1],y)})});u.deleteColumn(0);return u}}},{"../../utils/each":19,"../utils/flatten":11}],13:[function(b,c,a){(function(d){(function(q){var g=b("./dataset");var n={"default":b("./libraries/default")()};var o=b("./utils/apply-color-mapping"),s=b("./utils/apply-label-mapping"),j=b("./utils/apply-labels"),t=b("./utils/apply-sort-groups"),r=b("./utils/each"),p=b("./utils/extend"),l=b("./utils/parse-data");function f(){if(this instanceof f===false){return new f()}this.dataset=new g();this.view={_prepared:false,_rendered:false,_artifacts:{},chartOptions:{},colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},el:undefined,height:undefined,indexBy:"timeframe.start",labels:[],labelMapping:{},library:"default",notes:undefined,sortGroups:undefined,sortIntervals:undefined,stacked:false,theme:"keen-dataviz",title:undefined,type:undefined,width:undefined};f.visuals.push(this)}f.prototype.attributes=function(v){if(!arguments.length){return this.view}var u=this.view;r(v,function(x,w){if(w==="chartType"){w="type"}u[w]=x});return this};f.prototype.call=function(u){u.call(this);return this};f.prototype.chartOptions=function(v){var u=this;if(!arguments.length){return this.view.chartOptions}if(v===null){this.view.chartOptions={}}else{if(typeof v==="object"){r(v,function(x,w){u.view.chartOptions[w]=(x?x:null)})}}return this};f.prototype.colors=function(u){if(!arguments.length){return this.view.colors}this.view.colors=(u instanceof Array?u:[]);return this};f.prototype.colorMapping=function(v){var u=this;if(!arguments.length){return this.view.colorMapping}if(v===null){this.view.colorMapping={}}else{if(typeof v==="object"){r(v,function(x,w){u.view.colorMapping[w]=(x?x:null)})}}return this};f.prototype.data=l;f.prototype.destroy=function(){var u=this.library(),w=this.type(),v=this.el();if(u&&w&&f.libraries[u][w].destroy){f.libraries[u][w].destroy.apply(this,arguments)}if(v){v.innerHTML=""}this.view._prepared=false;this.view._rendered=false;this.view._artifacts={};return this};f.prototype.el=function(v){var u=this;if(!arguments.length){return this.view.el}k(function(){if(v&&v!==null){if(v.nodeName){u.view.el=v}else{if(document.querySelector){u.view.el=document.querySelector(v)}}}else{u.view.el=undefined}});return this};f.prototype.height=function(u){if(!arguments.length){return this.view.height}this.view.height=(!isNaN(parseInt(u))?parseInt(u):null);return this};f.prototype.indexBy=function(u){if(!arguments.length){return this.view.indexBy}this.view.indexBy=(u?String(u):"timeframe.start");return this};f.prototype.labels=function(u){if(!arguments.length){return this.view.labels}else{this.view.labels=(u instanceof Array?u:[]);return this}};f.prototype.labelMapping=function(v){var u=this;if(!arguments.length){return this.view.labelMapping}if(v===null){this.view.labelMapping={}}else{if(typeof v==="object"){r(v,function(x,w){u.view.labelMapping[w]=(x?x:null)})}}return this};f.prototype.library=function(u){if(!arguments.length){return this.view.library}this.view.library=(u?String(u):null);return this};f.prototype.message=function(){var u;if(this.view._rendered){this.destroy()}if(this.el()){this.el().innerHTML="";message=f.libraries["default"].message;if(message.render){message.render.apply(this,arguments)}}return this};f.prototype.notes=function(u){if(!arguments.length){return this.view.notes}this.view.notes=(u?String(u):null);return this};f.prototype.prepare=function(){var v=this,u;if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}k(function(){if(v.view._rendered){v.destroy()}if(v.el()){v.el().innerHTML="";u=f.libraries["default"].spinner;if(u.render){u.render.apply(v,arguments)}v.view._prepared=true}});return this};f.prototype.render=function(){var w=this,u=f.libraries["default"].spinner,v=this.library(),y=this.type(),x=this.el();if(!this.el()){throw"A DOM element is required. Check out the .el() method.";return}k(function(){if(w.view._prepared&&u.destroy){u.destroy.apply(w,arguments)}w.el().innerHTML="";if(v&&y&&x&&f.libraries[v][y].render){m(w.el(),{notes:w.notes(),theme:w.theme(),title:w.title()});f.libraries[v][y].render.apply(w,arguments);w.view._rendered=true}});return this};function m(w,u){var v="";v+='<div class="'+u.theme+'">';if(u.title){v+='<div class="'+u.theme+'-title">'+u.title+"</div>"}v+='<div class="'+u.theme+'-stage"><div class="'+u.theme+'-rendering"></div></div>';if(u.notes){v+='<div class="'+u.theme+'-notes">'+u.notes+"</div>"}v+="</div>";w.innerHTML=v}f.prototype.sortGroups=function(u){if(!arguments.length){return this.view.sortGroups}this.view.sortGroups=(u?String(u):null);return this};f.prototype.sortIntervals=function(u){if(!arguments.length){return this.view.sortInterval}this.view.sortIntervals=(u?String(u):null);if(this.view.sortIntervals){this.dataset.sortRows(this.view.sortIntervals)}return this};f.prototype.stacked=function(u){if(!arguments.length){return this.view.stacked}this.view.stacked=u?true:false;return this};f.prototype.theme=function(u){if(!arguments.length){return this.view.theme}this.view.theme=(u?String(u):null);return this};f.prototype.title=function(u){if(!arguments.length){return this.view.title}this.view.title=(u?String(u):null);return this};f.prototype.type=function(u){if(!arguments.length){return this.view.type}this.view.type=(u?String(u):null);return this};f.prototype.update=function(){var u=this.library(),w=this.type(),v=this.el();if(u&&w&&v&&f.libraries[u][w].update){f.libraries[u][w].update.apply(this,arguments)}return};f.prototype.width=function(u){if(!arguments.length){return this.view.width}this.view.width=(!isNaN(parseInt(u))?parseInt(u):null);return this};f.prototype.chartType=f.prototype.type;f.prototype.error=f.prototype.message;f.prototype.parseRawData=f.prototype.data;f.prototype.parseRequest=function(){return this};f.prototype.initialize=function(){return this};p(f,{libraries:n,visuals:[]});f.register=function(u,v){f.libraries[u]=f.libraries[u]||{};r(v,function(x,w){f.libraries[u][w]=x})};f.find=function(w){if(!arguments.length){return f.visuals}var v=w.nodeName?w:document.querySelector(w),u=null;r(f.visuals,function(x){if(v==x.el()){u=x;return false}});return u};k(function(){console.log("ready")});function k(v){if("undefined"!==typeof document||"undefined"===typeof window){v();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function u(){document.removeEventListener("DOMContentLoaded",u,false);document.readyState="complete"},false);document.readyState="loading"}h(v)}function h(u){if(/in/.test(document.readyState)){setTimeout(function(){h(u)},9)}else{u()}}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-dataviz",[],function(){return f})}q.Dataviz=f;if(typeof d!=="undefined"){d.Dataviz=f}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./dataset":1,"./libraries/default":14,"./utils/apply-color-mapping":15,"./utils/apply-label-mapping":16,"./utils/apply-labels":17,"./utils/apply-sort-groups":18,"./utils/each":19,"./utils/extend":20,"./utils/parse-data":21}],14:[function(b,a,g){var f=b("spin.js");var m=b("../utils/each"),k=b("../utils/extend"),c=b("../utils/pretty-number");var j={};function h(){l();d();n();o();return j}function l(){var p=["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"];m(p,function(r,q){j[r]={render:function(){var s=this;var t=k({axis:{},bindto:this.el().querySelector("."+this.theme()+"-rendering"),data:{columns:[],type:r.replace("horizontal-","")},color:{pattern:this.colors()},size:{height:this.height()?this.height()-this.el().offsetHeight:400,width:this.width()}},this.chartOptions());if(r==="gauge"){t.data.columns=[[this.title()||this.data()[1][0],this.data()[1][1]]]}else{if(r==="pie"||r==="donut"){t.data.columns=this.data().slice(1)}else{if(r.indexOf("horizontal-")>-1){t.axis.rotated=true}if(!isNaN(new Date(this.data()[1][0]).getTime())){t.axis.x={type:"timeseries",tick:{format:"%Y-%m-%d"}};t.data.columns[0]=[];m(this.dataset.selectColumn(0),function(u,v){if(v>0){u=new Date(u)}t.data.columns[0][v]=u});t.data.columns[0][0]="x";t.data.x="x";if(this.stacked()&&this.data()[0].length>2){t.data.groups=[this.dataset.selectRow(0).slice(1)]}}else{t.axis.x={type:"category",categories:this.dataset.selectColumn(0).slice(1)};if(this.stacked()&&this.data()[0].length>2){t.data.groups=[this.dataset.selectRow(0).slice(1)]}}m(this.data()[0],function(u,v){if(v>0){t.data.columns.push(s.dataset.selectColumn(v))}})}}this.view._artifacts.c3=c3.generate(t)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.c3){this.view._artifacts.c3.destroy();this.view._artifacts.c3=null}}}})}function d(){j.message={render:function(t){var r=document.createElement("div"),q=document.createElement("div"),s=document.createElement("span"),p=this.height()||140;r.className=this.theme();q.className=this.theme()+"-message";q.style.height=String(p+"px");q.style.paddingTop=(p/2-12)+"px";q.style.width=String(this.width()+"px");s.innerHTML=t||"";q.appendChild(s);r.appendChild(q);this.el().innerHTML="";this.el().appendChild(r)},update:function(){this.render()},destroy:function(){}}}function n(){j.metric={render:function(){var t=this.theme(),w=this.title(),x=this.data()[1][1]||"-",z=this.height()||140,r=this.width(),q=this.chartOptions(),u="",v="",y="",p,s;p=x;if((typeof q.prettyNumber==="undefined"||q.prettyNumber===true)&&!isNaN(parseInt(x))){p=c(x)}if(q.prefix){v='<span class="'+t+'-metric-prefix">'+q.prefix+"</span>"}if(q.suffix){y='<span class="'+t+'-metric-suffix">'+q.suffix+"</span>"}u+='<div class="'+t+'">';u+='<div class="'+t+'-metric" style="width: '+(r?r+"px":"auto")+';" title="'+x+'">';u+='<span class="'+t+'-metric-value">'+v+p+y+"</span>";if(w){u+='<span class="'+t+'-metric-title">'+w+"</span>"}u+="</div>";u+="</div>";this.el().innerHTML=u;s=this.el().querySelector("."+t+"-metric-value");s.style.paddingTop=((z-this.el().offsetHeight)/2)+"px";this.el().querySelector("."+t+"-metric").style.height=z+"px"},update:function(){this.render()},destroy:function(){}}}function o(){var p={height:140,lines:10,length:8,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#4D4D4D",speed:1.67,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"50%",left:"50%"};j.spinner={render:function(){var q=this.height()||p.height,r=document.createElement("div"),s=document.createElement("div");r.className=this.theme();s.className=this.theme()+"-spinner";s.style.height=String(q+"px");s.style.position="relative";s.style.width=String(this.width()+"px");r.appendChild(s);this.el().innerHTML="";this.el().appendChild(r);this.view._artifacts.spinner=new f(p).spin(s)},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.stop();this.view._artifacts.spinner=null}}}}a.exports=h},{"../utils/each":19,"../utils/extend":20,"../utils/pretty-number":22,"spin.js":23}],15:[function(c,d,a){d.exports=b;function b(){}},{}],16:[function(b,c,a){c.exports=d;function d(){}},{}],17:[function(b,c,a){c.exports=d;function d(){}},{}],18:[function(c,d,b){d.exports=a;function a(){return}},{}],19:[function(b,c,a){c.exports=d;function d(h,f,g){var j;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(j=0;j<h.length;j++){if(f.call(g,h[j],j,h)===false){return 0}}}else{for(j in h){if(h.hasOwnProperty(j)){if(f.call(g,h[j],j,h)===false){return 0}}}}return 1}},{}],20:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],21:[function(c,d,a){var f=c("../dataset");var h=c("./extend");d.exports=function(j){if(!arguments.length){return this.dataset.data()}if(j instanceof f){this.dataset=j}else{if(!this.title()){this.title(b(j.query))}this.dataset=g.call(this,j)}return this};function b(j){var l=j.analysis_type.replace("_"," "),k;k=l.replace(/\b./g,function(m){return m.toUpperCase()});if(j.event_collection){k+=" - "+j.event_collection}return k}function g(k){var n,l,o,j=[],m;l=this.indexBy()?this.indexBy():"timestamp.start";m=(typeof k.query!=="undefined")?k.query:{};m=h({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},m);if(m.analysis_type==="funnel"){o="funnel"}else{if(m.analysis_type==="extraction"){o="extraction"}else{if(m.analysis_type==="select_unique"){if(!m.group_by&&!m.interval){o="list"}}else{if(m.analysis_type){if(!m.group_by&&!m.interval){o="metric"}else{if(m.group_by&&!m.interval){if(typeof m.group_by==="string"){o="grouped-metric"}else{o="double-grouped-metric";j.push(m.group_by)}}else{if(m.interval&&!m.group_by){o="interval";j.push(l)}else{if(m.group_by&&m.interval){if(typeof m.group_by==="string"){o="grouped-interval";j.push(l)}else{o="double-grouped-interval";j.push(m.group_by);j.push(l)}}}}}}}}}if(!o){if(typeof k.result==="number"){o="metric"}if(k.result instanceof Array&&k.result.length>0){if(k.result[0].timeframe&&(typeof k.result[0].value=="number"||k.result[0].value==null)){o="interval";j.push(l)}if(typeof k.result[0].result=="number"){o="grouped-metric"}if(k.result[0].value instanceof Array){o="grouped-interval";j.push(l)}if(typeof k.result[0]=="number"&&typeof k.steps!=="undefined"){o="funnel"}if((typeof k.result[0]=="string"||typeof k.result[0]=="number")&&typeof k.steps==="undefined"){o="list"}if(!o){o="extraction"}}}n=f.parser.apply(this,[o].concat(j))(k);if(o.indexOf("interval")>-1){n.updateColumn(0,function(q,p){return new Date(q)})}return n}},{"../dataset":1,"./extend":20}],22:[function(c,d,b){d.exports=a;function a(f){var f=Number(f),j=f.toPrecision(3),k="",g=["","k","M","B","T"];if(Number(j)==f&&String(f).length<=4){return String(f)}if(f>=1||f<=-1){if(f<0){f=-f;k="-"}return k+h(f,0)}else{return f.toPrecision(3)}function h(l,n){var l=String(l);var m=l.split(".");if(m.length>1){l=m[0];var p=m[1];if(l.length==2&&p.length>0){if(p.length>0){l=l+"."+p.charAt(0)}else{l+="0"}}else{if(l.length==1&&p.length>0){l=l+"."+p.charAt(0);if(p.length>1){l+=p.charAt(1)}else{l+="0"}}}}var o=l.length;if(l.split(".").length>1){o--}if(o<=3){return String(l)+g[n]}else{return h(Number(l)/1000,n+1)}}}},{}],23:[function(b,c,a){(function(d,f){if(typeof c=="object"&&c.exports){c.exports=f()}else{if(typeof define=="function"&&define.amd){define(f)}else{d.Spinner=f()}}}(this,function(){var j=["webkit","Moz","ms","O"],t={},s,n;function l(u,x){var v=document.createElement(u||"div"),w;for(w in x){v[w]=x[w]}return v}function m(v){for(var u=1,w=arguments.length;u<w;u++){v.appendChild(arguments[u])}return v}function g(y,u,A,D){var v=["opacity",u,~~(y*100),A,D].join("-"),w=0.01+A/D*100,C=Math.max(1-(1-y)/u*(100-w),y),B=s.substring(0,s.indexOf("Animation")).toLowerCase(),x=B&&"-"+B+"-"||"";if(!t[v]){n.insertRule("@"+x+"keyframes "+v+"{0%{opacity:"+C+"}"+w+"%{opacity:"+y+"}"+(w+0.01)+"%{opacity:1}"+(w+u)%100+"%{opacity:"+y+"}100%{opacity:"+C+"}}",n.cssRules.length);t[v]=1}return v}function q(x,y){var w=x.style,u,v;y=y.charAt(0).toUpperCase()+y.slice(1);if(w[y]!==undefined){return y}for(v=0;v<j.length;v++){u=j[v]+y;if(w[u]!==undefined){return u}}}function k(u,w){for(var v in w){u.style[q(u,v)||v]=w[v]}return u}function o(w){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var x in v){if(w[x]===undefined){w[x]=v[x]}}}return w}function r(v,u){return typeof v=="string"?v:v[u%v.length]}var h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function f(u){this.opts=o(u||{},f.defaults,h)}f.defaults={};o(f.prototype,{spin:function(D){this.stop();var F=this,v=F.opts,w=F.el=l(null,{className:v.className});k(w,{position:v.position,width:0,zIndex:v.zIndex,left:v.left,top:v.top});if(D){D.insertBefore(w,D.firstChild||null)}w.setAttribute("role","progressbar");F.lines(w,F.opts);if(!s){var A=0,u=(v.lines-1)*(1-v.direction)/2,z,x=v.fps,C=x/v.speed,B=(1-v.opacity)/(C*v.trail/100),E=C/v.lines;(function y(){A++;for(var G=0;G<v.lines;G++){z=Math.max(1-(A+(v.lines-G)*E)%C*B,v.opacity);F.opacity(w,G*v.direction+u,z,v)}F.timeout=F.el&&setTimeout(y,~~(1000/x))})()}return F},stop:function(){var u=this.el;if(u){clearTimeout(this.timeout);if(u.parentNode){u.parentNode.removeChild(u)}this.el=undefined}return this},lines:function(w,y){var v=0,z=(y.lines-1)*(1-y.direction)/2,u;function x(A,B){return k(l(),{position:"absolute",width:y.scale*(y.length+y.width)+"px",height:y.scale*y.width+"px",background:A,boxShadow:B,transformOrigin:"left",transform:"rotate("+~~(360/y.lines*v+y.rotate)+"deg) translate("+y.scale*y.radius+"px,0)",borderRadius:(y.corners*y.scale*y.width>>1)+"px"})}for(;v<y.lines;v++){u=k(l(),{position:"absolute",top:1+~(y.scale*y.width/2)+"px",transform:y.hwaccel?"translate3d(0,0,0)":"",opacity:y.opacity,animation:s&&g(y.opacity,y.trail,z+v*y.direction,y.lines)+" "+1/y.speed+"s linear infinite"});if(y.shadow){m(u,k(x("#000","0 0 4px #000"),{top:"2px"}))}m(w,m(u,x(r(y.color,v),"0 0 1px rgba(0,0,0,.1)")))}return w},opacity:function(v,u,w){if(u<v.childNodes.length){v.childNodes[u].style.opacity=w}}});function p(){function u(w,v){return l("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',v)}n.addRule(".spin-vml","behavior:url(#default#VML)");f.prototype.lines=function(x,w){var v=w.scale*(w.length+w.width),D=w.scale*2*v;function C(){return k(u("group",{coordsize:D+" "+D,coordorigin:-v+" "+-v}),{width:D,height:D})}var y=-(w.width+w.length)*w.scale*2+"px",B=k(C(),{position:"absolute",top:y,left:y}),A;function z(F,E,G){m(B,m(k(C(),{rotation:360/w.lines*F+"deg",left:~~E}),m(k(u("roundrect",{arcsize:w.corners}),{width:v,height:w.scale*w.width,left:w.scale*w.radius,top:-w.scale*w.width>>1,filter:G}),u("fill",{color:r(w.color,F),opacity:w.opacity}),u("stroke",{opacity:0}))))}if(w.shadow){for(A=1;A<=w.lines;A++){z(A,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(A=1;A<=w.lines;A++){z(A)}return m(x,B)};f.prototype.opacity=function(w,v,y,x){var z=w.firstChild;x=x.shadow&&x.lines||0;if(z&&v+x<z.childNodes.length){z=z.childNodes[v+x];z=z&&z.firstChild;z=z&&z.firstChild;if(z){z.opacity=y}}}}if(typeof document!=="undefined"){n=(function(){var u=l("style",{type:"text/css"});m(document.getElementsByTagName("head")[0],u);return u.sheet||u.styleSheet}());var d=k(l("group"),{behavior:"url(#default#VML)"});if(!q(d,"transform")&&d.adj){p()}else{s=q(d,"animation")}}return f}))},{}]},{},[13]);