<!DOCTYPE html>
<html>
  <head>
    <title>Webpack Dev Keen Dataviz Demo</title>
    <meta charset="utf-8">
    <script src="./assets/faker.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/keen-analysis@2.1.2"></script>

    <script src="keen-dataviz.js"></script>
    <script src="demo-config.js"></script>
    <link rel="stylesheet" href="./keen-dataviz.css">
    <link rel="stylesheet" href="./assets/keen-dashboards.css">
    <style>

    </style>
  </head>
  <body>
    <div id="container"></div>

    <script>



const chart = new Keen.Dataviz({
  container: '#container', // required
  showDeprecationWarnings: false,
  legend: {
    position: 'top'
  },  axis: {
      x: {
        localtime: false
      }
    },
    transition: {
      duration: 3000
    },
    zoom: {
      enabled: true
    },
    grid: {
      x: {
        show: true
      },
      y: {
        show: true
      }
    }
});

const client = new Keen(demoConfig);

// execute some query
client
  .query('count', {
    event_collection: 'pageviews',
    timeframe: 'this_160_days',
    interval: 'daily'
  })
  .then(results => {
    // Handle results
    chart.render(results);
  })
  .catch(err => {
    // Handle errors
  });


/*

// Use keen-analysis.js to run a query
// and pass the result into your chart:
const client = new Keen(demoConfig);

const q1 = new Keen.Query('count', {
  event_collection: 'pageviews',
  timeframe: 'this_57_hours',
  interval: 'hourly'
});

const q2 = new Keen.Query('count', {
  event_collection: 'pageviews',
  timeframe: 'this_57_hours',
  interval: 'hourly'
});

client
  .run([q1]).then(function(res){
    // console.log(res);

    const chart = new Keen.Dataviz({
      container: '#container',
      title: 'New Customers per Week',
      notes: 'Lorem ipsum',
      legend: {
        label: {
          textMaxLength: 101
        }
      },
      colors: ['#000', 'blue'],
      labels: ['aaa'],
      labelMapping: {
      '2018-06-18T14:25:38.268Z': 'here'
      },
      type: 'area',
      showLoadingSpinner: true,
      results: res,
      axis: {
        x: {
          localtime: true
        }
      }
    })
;
  //   chart
//   .render(res);



    })
    .catch(function(err){
      // Handle the error
      chart
        .message(err.message);
    });

    */
    </script>

  </body>
</html>
