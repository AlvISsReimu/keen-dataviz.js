<!DOCTYPE html>
<html>
  <head>
    <title>Keen Dataviz Demo | Keen IO</title>
    <link rel="stylesheet" type="text/css" href="https://cloud.typography.com/737368/747986/css/fonts.css" />
    <link rel="stylesheet" href="./assets/keen-dashboards.css" />
    <link rel="stylesheet" href="./assets/demo-styles.css" />

    <link rel="stylesheet" href="https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.2.0.min.css">
    <script src="https://d26b395fwzu5fz.cloudfront.net/keen-tracking-1.2.0.min.js"></script>
    <script src="https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.2.0.min.js"></script>

    <script src="./assets/faker.js"></script>

    <!-- THEMES -->
    <link rel="stylesheet" href="./themes/default.css" />
    <link rel="stylesheet" href="./themes/dashboard.css" />
    <link rel="stylesheet" href="./themes/dark.css" />
  </head>
  <body class="demo-theme-default" onload="init()">

    <div id="theme-selector">
      <label class="keen-ui-label" for="dataviz-theme-selector">
        Select a theme
      </label>
      <div class="keen-ui-select">
        <select id="dataviz-theme-selector">
          <option value="default">Default</option>
          <option value="dashboard">Dashboard</option>
          <option value="dark">Dark</option>
        </select>
      </div>
    </div>

    <div class="container">
      <h1>Dataviz Examples</h1>

      <div class="keen-ui-row">
        <div class="keen-ui-col-8">
          <h2>Line Chart</h2>
          <div class="chart-c3-line-time-multi"></div>
        </div>
        <div class="keen-ui-col-4">
          <h2>Gauge</h2>
          <div class="chart-c3-gauge"></div>
        </div>
      </div>

      <div class="keen-ui-row">
        <div class="keen-ui-col-8">
          <h2>Area Chart</h2>
          <div class="chart-c3-area-time-multi"></div>
        </div>
        <div class="keen-ui-col-4" id="nested">
          <h2>Metric</h2>
          <div class="chart-demo-metric"></div>
        </div>
      </div>



      <div class="keen-ui-row">
        <div class="keen-ui-col-8">
          <h2>Spline Chart</h2>
          <div class="chart-c3-spline-time-multi"></div>
        </div>
        <div class="keen-ui-col-4">
          <h2>Donut Chart</h2>
          <div class="chart-c3-donut"></div>
        </div>
      </div>

      <div class="keen-ui-row">
        <div class="keen-ui-col-8">
          <h2>Step Chart</h2>
          <div class="chart-c3-step-time-multi"></div>
        </div>
        <div class="keen-ui-col-4">
          <h2>Pie Chart</h2>
          <div class="chart-c3-pie"></div>
        </div>
      </div>

      <div class="keen-ui-row">
        <div class="keen-ui-col-8">
          <h2>Area-Spline Chart</h2>
          <div class="chart-c3-area-spline-time-multi"></div>
        </div>
        <div class="keen-ui-col-4">
          <h2>Bar Chart</h2>
          <div class="chart-c3-bar-multi"></div>
        </div>
      </div>

      <div class="keen-ui-row">
        <div class="keen-ui-col-8">
          <h2>Area-Step Chart</h2>
          <div class="chart-c3-area-step-time-multi"></div>
        </div>
        <div class="keen-ui-col-4">
          <h2>Horizontal Bar Chart</h2>
          <div class="chart-c3-bar-stacked"></div>
        </div>
      </div>

      <div class="keen-ui-row">
        <div class="keen-ui-col-6">
          <h2>Message</h2>
          <div class="chart-demo-message"></div>
        </div>
        <div class="keen-ui-col-6">
          <h2>Spinner</h2>
          <div id="chart-demo-spinner"></div>
        </div>
      </div>

      <div class="keen-ui-row">
        <div class="keen-ui-col-12">
          <h2>Table</h2>
          <div class="chart-demo-table"></div>
        </div>
      </div>

    </div>

    <script>
    function init(){

      var themeSelector = document.getElementById('dataviz-theme-selector');
      themeSelector.onchange = function(e){
        document.body.className = 'demo-theme-' + e.target.value;
      };

      var RAND_DATA_MAX = 50;

      var metricData = [
        [ 'Index', 'Value' ],
        [ 'Result', 24502 ]
      ];

      var gaugeData = [
        [ 'Index', 'Value' ],
        [ 'Result', 79.1 ]
      ];

      var groupedData = [
        [ 'Index', 'Result' ],
        [ faker.internet.url(), faker.internet.exampleEmail(), faker.internet.exampleEmail(), 189.98 ],
        [ faker.internet.url(), 135.83 ],
        [ faker.internet.url(), 124.56 ],
        [ faker.internet.url(), 117.22 ],
        [ faker.internet.url(), 55.12  ]
      ];

      function makeGroupedDataset(){
        var ds = new Dataset();
        var len = rand(0, RAND_DATA_MAX);
        for (var i = 0; i < len; i++) {
          ds.appendRow(faker.internet.email(), [faker.random.number()]);
        }
        // ds.appendRow('null', [faker.random.number()]);
        return ds;
      }

      function makeGroupedIntervalDataset(){
        var ds = new Dataset();
        ds.matrix = [
          [ 'Index' ],
          [ '2015-12-01T10:56:00.000Z' ],
          [ '2015-12-01T10:57:00.000Z' ],
          [ '2015-12-01T10:58:00.000Z' ],
          [ '2015-12-01T10:59:00.000Z' ],
          [ '2015-12-01T11:00:00.000Z' ]
        ];

        var len = ds.selectColumn(0).length;
        for (var i = 0; i < RAND_DATA_MAX; i++) {
          var newCol = gen(len-1);
          if (i > 0) {
            ds.appendColumn(newCol[0], newCol.slice(1));
          }
          else {
            // Inject a null value
            ds.appendColumn('null', newCol.slice(1));
          }
        }
        return ds;
      }

      var groupedMultiData = [
        [ 'Index', faker.internet.url(), faker.internet.url(), faker.internet.url()],
        [ 'A', 189.98, 322.43, 654.44 ],
        [ 'B', 135.83, 564.21, 622.12 ],
        [ 'C', 124.56, 611.23, 432.11 ],
        [ 'D', 117.22, 434.37, 488.12 ],
        [ 'E', 55.12, 212.44, 323.55  ]
      ];

      var intervalData = [
        [ 'Index', 'Result' ],
        [ '2014-12-01T00:00:00.000Z', 189.98 ],
        [ '2015-01-01T00:00:00.000Z', 135.83 ],
        [ '2015-02-01T00:00:00.000Z', 124.56 ],
        [ '2015-03-01T00:00:00.000Z', 117.22 ],
        [ '2015-04-01T00:00:00.000Z', 55.12  ]
      ];

      var intervalMultiData = [
        [ 'Index', faker.internet.exampleEmail(), faker.internet.exampleEmail(), faker.internet.exampleEmail() ],
        [ '2014-12-01T00:00:00.000Z', 189.98, 322.43, 654.44 ],
        [ '2015-01-01T00:00:00.000Z', 135.83, 564.21, 622.12 ],
        [ '2015-02-01T00:00:00.000Z', 124.56, 611.23, 432.11 ],
        [ '2015-03-01T00:00:00.000Z', 117.22, 434.37, 488.12 ],
        [ '2015-04-01T00:00:00.000Z', 55.12, 212.44, 323.55  ]
      ];


      // Yearly dataset

      var intervalDataYearly = [
        [ 'Index', 'Result' ],
        [ '2011-01-01T00:00:00.000Z', 189.98 ],
        [ '2012-01-01T00:00:00.000Z', 135.83 ],
        [ '2013-01-01T00:00:00.000Z', 124.56 ],
        [ '2014-01-01T00:00:00.000Z', 117.22 ],
        [ '2015-01-01T00:00:00.000Z', 55.12  ]
      ];

      var intervalMultiDataYearly = [
        [ 'Index', faker.internet.exampleEmail(), faker.internet.exampleEmail(), faker.internet.exampleEmail() ],
        [ '2011-01-01T00:00:00.000Z', 189.98, 322.43, 654.44 ],
        [ '2012-01-01T00:00:00.000Z', 135.83, 564.21, 622.12 ],
        [ '2013-01-01T00:00:00.000Z', 124.56, 611.23, 432.11 ],
        [ '2014-01-01T00:00:00.000Z', 117.22, 434.37, 488.12 ],
        [ '2015-01-01T00:00:00.000Z', 55.12, 212.44, 323.55  ]
      ];

      // Secondly dataset

      var intervalDataSecondly = [
        [ 'Index', 'Result' ],
        [ '2015-12-01T10:59:56.000Z', 189.98 ],
        [ '2015-12-01T10:59:57.000Z', 135.83 ],
        [ '2015-12-01T10:59:58.000Z', 124.56 ],
        [ '2015-12-01T10:59:59.000Z', 117.22 ],
        [ '2015-12-01T11:00:00.000Z', 55.12  ]
      ];

      var intervalMultiDataSecondly = [
        [ 'Index', faker.internet.exampleEmail(), faker.internet.exampleEmail(), faker.internet.exampleEmail() ],
        [ '2015-12-01T10:59:56.000Z', 189.98, 322.43, 654.44 ],
        [ '2015-12-01T10:59:57.000Z', 135.83, 564.21, 622.12 ],
        [ '2015-12-01T10:59:58.000Z', 124.56, 611.23, 432.11 ],
        [ '2015-12-01T10:59:59.000Z', 117.22, 434.37, 488.12 ],
        [ '2015-12-01T11:00:00.000Z', 55.12, 212.44, 323.55  ]
      ];

      // Minutely dataset

      var intervalDataMinutely = [
        [ 'Index', 'Result' ],
        [ '2015-12-01T10:56:00.000Z', 189.98 ],
        [ '2015-12-01T10:57:00.000Z', 135.83 ],
        [ '2015-12-01T10:58:00.000Z', 124.56 ],
        [ '2015-12-01T10:59:00.000Z', 117.22 ],
        [ '2015-12-01T11:00:00.000Z', 55.12  ]
      ];

      var intervalMultiDataMinutely = [
        [ 'Index', faker.internet.exampleEmail(), faker.internet.exampleEmail(), faker.internet.exampleEmail() ],
        [ '2015-12-01T10:56:00.000Z', 189.98, 322.43, 654.44 ],
        [ '2015-12-01T10:57:00.000Z', 135.83, 564.21, 622.12 ],
        [ '2015-12-01T10:58:00.000Z', 124.56, 611.23, 432.11 ],
        [ '2015-12-01T10:59:00.000Z', 117.22, 434.37, 488.12 ],
        [ '2015-12-01T11:00:00.000Z', 55.12, 212.44, 323.55  ]
      ];


      // Hourly dataset

      var intervalDataHourly = [
        [ 'Index', 'Result' ],
        [ '2015-12-01T10:00:00.000Z', 189.98 ],
        [ '2015-12-01T11:00:00.000Z', 135.83 ],
        [ '2015-12-01T12:00:00.000Z', 124.56 ],
        [ '2015-12-01T13:00:00.000Z', 117.22 ],
        [ '2015-12-01T14:00:00.000Z', 55.12  ]
      ];

      var intervalMultiDataHourly = [
        [ 'Index', faker.internet.exampleEmail(), faker.internet.exampleEmail(), faker.internet.exampleEmail() ],
        [ '2015-12-01T10:00:00.000Z', 189.98, 322.43, 654.44 ],
        [ '2015-12-01T11:00:00.000Z', 135.83, 564.21, 622.12 ],
        [ '2015-12-01T12:00:00.000Z', 124.56, 611.23, 432.11 ],
        [ '2015-12-01T13:00:00.000Z', 117.22, 434.37, 488.12 ],
        [ '2015-12-01T14:00:00.000Z', 55.12, 212.44, 323.55  ]
      ];


      // Daily dataset

      var intervalDataDaily = [
        [ 'Index', 'Result' ],
        [ '2015-12-01T00:00:00.000Z', 189.98 ],
        [ '2015-12-02T00:00:00.000Z', 135.83 ],
        [ '2015-12-03T00:00:00.000Z', 124.56 ],
        [ '2015-12-04T00:00:00.000Z', 117.22 ],
        [ '2015-12-05T00:00:00.000Z', 55.12  ]
      ];

      var intervalMultiDataDaily = [
        [ 'Index', faker.internet.exampleEmail(), faker.internet.exampleEmail(), faker.internet.exampleEmail() ],
        [ '2015-12-01T00:00:00.000Z', 189.98, 322.43, 654.44 ],
        [ '2015-12-02T00:00:00.000Z', 135.83, 564.21, 622.12 ],
        [ '2015-12-03T00:00:00.000Z', 124.56, 611.23, 432.11 ],
        [ '2015-12-04T00:00:00.000Z', 117.22, 434.37, 488.12 ],
        [ '2015-12-05T00:00:00.000Z', 55.12, 212.44, 323.55  ]
      ];

      var tableData = [
        [ 'Index', 'First', 'Second', 'Another', 'Fourth', 'Fifth', 'Last' ],
        [ '2015-12-01T00:00:00.000Z', 189.98, 322.43, 654.44, 189.98, 322.43, 654.44 ],
        [ '2015-12-02T00:00:00.000Z', 135.83, 564.21, 622.12, 189.98, 322.43, 654.44 ],
        [ '2015-12-03T00:00:00.000Z', 124.56, 611.23, 432.11, 189.98, 322.43, 654.44 ],
        [ '2015-12-04T00:00:00.000Z', 117.22, 434.37, 488.12, 189.98, 322.43, 654.44 ],
        [ '2015-12-05T00:00:00.000Z', 55.12, 212.44, 323.55, 189.98, 322.43, 654.44  ],
        [ '2015-12-01T00:00:00.000Z', 189.98, 322.43, 654.44, 189.98, 322.43, 654.44 ],
        [ '2015-12-02T00:00:00.000Z', 135.83, 564.21, 622.12, 189.98, 322.43, 654.44 ],
        [ '2015-12-03T00:00:00.000Z', 124.56, 611.23, 432.11, 189.98, 322.43, 654.44 ],
        [ '2015-12-04T00:00:00.000Z', 117.22, 434.37, 488.12, 189.98, 322.43, 654.44 ],
        [ '2015-12-05T00:00:00.000Z', 55.12, 212.44, 323.55, 189.98, 322.43, 654.44  ],
        [ '2015-12-01T00:00:00.000Z', 189.98, 322.43, 654.44, 189.98, 322.43, 654.44 ],
        [ '2015-12-02T00:00:00.000Z', 135.83, 564.21, 622.12, 189.98, 322.43, 654.44 ],
        [ '2015-12-03T00:00:00.000Z', 124.56, 611.23, 432.11, 189.98, 322.43, 654.44 ],
        [ '2015-12-04T00:00:00.000Z', 117.22, 434.37, 488.12, 189.98, 322.43, 654.44 ],
        [ '2015-12-05T00:00:00.000Z', 55.12, 212.44, 323.55, 189.98, 322.43, 654.44  ]
      ];

      window.spinner = new Dataviz()
        .height(280)
        .el('#chart-demo-spinner')
        .type('spinner')
        .render();

      window.message = new Dataviz()
        .height(280)
        .el('.chart-demo-message')
        .type('message')
        .message('This is a manual message!');

      window.metric = new Dataviz()
        .height(280)
        .el('#nested .chart-demo-metric')
        .type('metric')
        .title('High-fives today')
        .prepare();

      window.table = new Dataviz()
        .el('.chart-demo-table')
        // .theme('custom-theme')
        .height(300)
        .type('table')
        .title('Basic table view')
        .notes('Footnotes for this table')
        .call(function(){
          this.dataset.matrix = tableData;
        })
        .render();

      setTimeout(function(){
        window.metric.call(function(){
          this.dataset.matrix = metricData;
        }).render();
      }, 1 * 1000);

      window.gauge = new Dataviz()
        .height(300)
        .el('.chart-c3-gauge')
        .title('Percentage of awesome')
        // .theme('custom-theme')
        .notes('Sample notes go down here')
        .type('gauge')
        // .chartOptions({})
        .call(function(){
          this.dataset.matrix = gaugeData;
        })
        .render();

      window.donut = new Dataviz()
        .height(300)
        .el('.chart-c3-donut')
        .title('Mmmm, donuts...')
        .type('donut')
        .chartOptions({})
        .data(makeGroupedDataset())
        .sortGroups('desc')
        .render();

      window.pie = new Dataviz()
        .height(300)
        .el('.chart-c3-pie')
        .title('Mmmm, pie...')
        .type('piechart')
        .call(function(){
          this.dataset.matrix = groupedData;
        })
        .render();


      // -------------------------
      // BAR
      // -------------------------

      window.barMulti = new Dataviz()
        .height(300)
        .el('.chart-c3-bar-multi')
        .title('Bar Chart')
        .type('bar')
        .call(function(){
          this.dataset.matrix = groupedMultiData;
        })
        .render();

      window.barMultiStacked = new Dataviz()
        .height(300)
        .el('.chart-c3-bar-stacked')
        .title('Bar Chart')
        .type('horizontal-bar')
        .stacked(true)
        .call(function(){
          this.dataset.matrix = groupedMultiData;
        })
        .render();

      // -------------------------
      // END BAR
      // -------------------------


      // -------------------------
      // LINE
      // -------------------------

      window.lineTimeMulti = new Dataviz()
        .height(300)
        .el('.chart-c3-line-time-multi')
        .title('Line Chart')
        .type('line')
        .stacked(false)
        .data(makeGroupedIntervalDataset())
        .sortGroups('desc')
        .render();

      // -------------------------
      // SPLINE
      // -------------------------

      window.splineTimeMulti = new Dataviz()
        .height(300)
        .el('.chart-c3-spline-time-multi')
        .title('Spline Chart')
        .type('spline')
        .call(function(){
          this.dataset.matrix = intervalMultiDataHourly;
        })
        .render();

      // -------------------------
      // AREA
      // -------------------------

      window.areaTimeMulti = new Dataviz()
        .height(300)
        .el('.chart-c3-area-time-multi')
        .title('Area Chart')
        .type('area')
        .data(makeGroupedIntervalDataset())
        .render();

      // -------------------------
      // AREA-SPLINE
      // -------------------------

      window.areaSplineTimeMulti = new Dataviz()
        .height(300)
        .el('.chart-c3-area-spline-time-multi')
        .title('Area-Spline Chart')
        .type('area-spline')
        .call(function(){
          this.dataset.matrix = intervalMultiDataSecondly;
        })
        .render();

      // -------------------------
      // AREA-STEP
      // -------------------------

      window.areaStepTimeMulti = new Dataviz()
        .height(300)
        .el('.chart-c3-area-step-time-multi')
        .title('Area-Step Chart')
        .type('area-step')
        .call(function(){
          this.dataset.matrix = intervalMultiData;
        })
        .render();

      // -------------------------
      // STEP
      // -------------------------

      window.stepTimeMulti = new Dataviz()
        .height(300)
        .el('.chart-c3-step-time-multi')
        .title('Step Chart')
        .type('step')
        .call(function(){
          this.dataset.matrix = intervalMultiData;
        })
        .render();


      function rand(a, b){
        return Math.floor((Math.random() * b) + a);
      }
      function gen(n){
        var arr = [ faker.internet.exampleEmail() ];
        for (var i = 0; i < n; i++) {
          arr.push(rand(0, 1000));
        }
        return arr;
      }

    }
    </script>
  </body>
</html>
